(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{257:function(e,t,n){n(258),e.exports=n(438)},258:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/Mirror/expo-service-worker.js",{scope:"/Mirror/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},399:function(e,t){},438:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Edit",(function(){return ot})),n.d(r,"Indicator",(function(){return ct}));var a={};n.r(a),n.d(a,"Edit",(function(){return gt})),n.d(a,"Indicator",(function(){return ht}));var o={};n.r(o),n.d(o,"Edit",(function(){return Ct})),n.d(o,"Indicator",(function(){return St}));var c=n(502),i=n(0),l=n.n(i),u=n(10),s=n.n(u),d=n(39),m=n(65),f=n(14),b=n(11),p=n.n(b),g=n(233),h=n(478),E=n(479),v=n(480);function y(e,t){var n;if("undefined"===typeof Symbol||null==e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]()).next.bind(n)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j,C=null,x=function(){var e="yyyyMMdd-hhmmss",t=g.a(new Date,e);return null!==C&&C.substring(0,e.length)===t&&(C.length===e.length?t+="-1":t+="-"+(parseInt(C.substring(e.length+1,C.length))+1)),C=t,t},k=function(){var e,t=(new Date).getTime(),n=[x(),x()],r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tabs:(e={},p()(e,n[0],{name:"Main",id:n[0],created:t,edited:t}),p()(e,n[1],{name:"Secondary",id:n[1],created:t,edited:t}),e)},function(e,t){for(var n=e.reduce((function(e,t){return e+t}),0),r={},a=["Wash the dishes","Make cool app","Run out of ideas for sample tasks for the app you're making","Cook pizza for dinner","Finish your chemistry homework","Write a tutorial explaining how monads are isomorphic to burritos in the category of food","Forget to wrap a line at 300 characters","Learn Common Lisp","Do normal human things","Prove P=NP for N=1","Eat some chocolate","Stop eating so much chocolate","Write witty comment","\ud83d\ude42"],o=(new Date).getTime(),c=0;c<n;c++){var i=x();r[i]={id:i,type:0,content:a[Math.floor(Math.random()*a.length)],created:o,edited:o,moved:o}}for(var l={},u=0,s=0;u<e.length;u++){var d=Object.keys(r).slice(s,s+e[u]),m=x();l[m]={id:m,items:d,name:t[u],created:o,edited:o},s+=e[u]}return{cards:r,columns:l}}([9,2,6,5,4],["To Do","Doing","Done","Misc 1","Misc 2"])),a=Object.keys(r.columns);return r.tabs[n[0]].columns=[a[0],a[1],a[2]],r.tabs[n[1]].columns=[a[3],a[4]],r.tabOrder=n,r.cards.main={id:"main",content:"Welcome",type:1,description:"Welcome to your Zettelkasten! You can edit this and use `[[wikilink]]` syntax to link to other nodes.",created:t,edited:t},r},D=function(e,t,n){if(localStorage.version===e){var r=JSON.parse(localStorage.kanban);n(r),localStorage.kanban=JSON.stringify(r),localStorage.version=t}},S=function(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=t(e[r]),n}),{})},T=function(e){var t=new Date(e),n=new Date,r=function(e){return 0===e.getHours()&&0===e.getMinutes()?null:0===e.getMinutes()?g.a(e,"haaa"):g.a(e,"h:mmaaa")}(t);return function(e){var t=h.a(e,n),r=E.a(e,n,{weekStartsOn:1}),a=v.a(e,n);if(0===t)return"Today";if(-1===t)return"Yesterday";if(1===t)return"Tomorrow";var o=g.a(e,"EEE");return 0===r&&t>=0?o:t>=-7&&t<0?"Last "+o:t>0&&t<=7?"Next "+o:t>7&&t<=14?o+" Week":0===a?g.a(e,"MMM do"):g.a(e,"MMM do yyyy")}(t)+(r?" "+r:"")},P=function(){return window.location.hash.replace("#","")||"/"},I=function(){var e=i.useState(P()),t=s()(e,2),n=t[0],r=t[1];return i.useEffect((function(){var e=function(){return r(P())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),[n,i.useCallback((function(e){return window.location.hash=e}),[]),i.useCallback((function(e){return history.replaceState(void 0,void 0,e)}))]},N=function(e){if(!e)return"unknown";var t=e.content.split("\n")[0];return t.length>40?t.substring(0,37)+"...":t},M=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length?0===r.length?r[0]:function(e){for(var t,n=y(r);!(t=n()).done;){var a=t.value;"function"===typeof a?a(e):a&&(a.current=e)}}:null},A=function(e){var t=e.shouldProtect,n=void 0===t||t;return i.useEffect((function(){return n&&(window.onbeforeunload=function(e){return"Are you sure you want to quit?"}),function(){return window.onbeforeunload=null}})),null},R=n(484),L=n(501),z=n(485),F=n(486),_=n(74),B=n.n(_),W=n(234),Z=n(509),H=function(e){var t=e.map,n=e.children,r=i.useState(null),a=s()(r,2),o=a[0],c=a[1],l=function(){return c(null)};return i.createElement(i.Fragment,null,i.createElement(W.a,{anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l},Object.entries(t).map((function(e){var t=s()(e,2),n=t[0],r=t[1];return i.createElement(Z.a,{key:n,onClick:function(){l(),r()}},n)}))),i.cloneElement(n,{onClick:function(e){return c(e.currentTarget)}}))},J=function(e){var t=e.show,n=e.children;return i.createElement("div",{hidden:!t,style:{height:"calc(100% - 48px)"}},t&&n)},K=function(e){var t=e.tabs,n=e.render,r=e.children,a=e.index,o=e.setIndex,c=e.addTab,l=e.renameTab,u=e.deleteTab,s=e.moveTab,m=function(e,n){return n>=0&&n<t.length&&o(n)};return i.createElement("div",{style:{flex:1}},i.createElement(R.a,{position:"static",style:{backgroundColor:"white",zIndex:2,position:"relative"}},i.createElement(L.a,{value:a,onChange:m,indicatorColor:"primary",textColor:"primary"},t.map((function(e){return i.createElement(z.a,{label:e,key:e})})),i.createElement(d.a,{style:{flexGrow:1}}),i.createElement(H,{map:{"Add tab":function(){return c()},"Rename tab":function(){return l(a)},"Delete tab":function(){return u(a)},"Move tab left":function(){return s([a,a-1]),m(0,a-1)},"Move tab right":function(){return s([a,a+1]),m(0,a+1)}}},i.createElement(F.a,null,i.createElement(B.a,null))),r)),t.map((function(e,t){return i.createElement(J,{show:a===t,key:e},a===t&&n(t))})))},G=n(21),U=n.n(G),V=n(487),Y=n(441),$=(Object(V.a)((function(e){return{button:{}}})),n(491)),X=n(219),q=n.n(X),Q=n(220),ee=n.n(Q),te=n(119),ne=n.n(te),re=n(117),ae=n.n(re),oe=n(507),ce=n(496),ie=n(492),le=n(497),ue=n(493),se=n(506),de=n(511),me=n(504),fe=n(498),be=n(18),pe=n(64),ge=n.n(pe);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=Object(be.b)("kanban/TRANSFER_CARD"),ye=Object(be.b)("kanban/REORDER_CARD"),Oe=Object(be.b)("kanban/ADD_CARD"),we=Object(be.b)("kanban/EDIT_CARD_CONTENT"),je=Object(be.b)("kanban/EDIT_CARD"),Ce=Object(be.b)("kanban/DELETE_CARD"),xe=Object(be.b)("kanban/ADD_COLUMN"),ke=Object(be.b)("kanban/DELETE_COLUMN"),De=Object(be.b)("kanban/RENAME_COLUMN"),Se=Object(be.b)("kanban/MOVE_COLUMN"),Te=Object(be.b)("kanban/ARCHIVE_ALL_COLUMN"),Pe=Object(be.b)("kanban/ADD_TAB"),Ie=Object(be.b)("kanban/DELETE_TAB"),Ne=Object(be.b)("kanban/RENAME_TAB"),Me=Object(be.b)("kanban/MOVE_TAB"),Ae=Object(be.b)("zettelkasten/ADD_ZETTEL"),Re=Object(be.b)("zettelkasten/EDIT_ZETTEL"),Le=Object(be.b)("zettelkasten/DELETE_ZETTEL"),ze=Object(be.b)("zettelkasten/TOGGLE_STARRED"),Fe=function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),-1!==n},_e={getColumnsInTabs:function(e){return S(e.tabs,(function(t){return t.columns.map((function(t){return e.columns[t]})).map((function(t){return Ee(Ee({},t),{},{items:t.items.map((function(t){return e.cards[t]}))})}))}))},columns:function(e){return e.columns},tabs:function(e){return e.tabs},tabOrder:function(e){return e.tabOrder},cards:function(e){return e.cards},archivedCards:function(e){return Object.values(e.cards).filter((function(e){return-1!==Object.keys(e).indexOf("archived")}))},activeCards:function(e){return Object.values(e.cards).filter((function(e){return-1===Object.keys(e).indexOf("archived")}))},starredZettels:function(e){return e.starredZettels?e.starredZettels:[]},cardsByTab:function(e){return S(e.tabs,(function(t){return t.columns.flatMap((function(t){return e.columns[t].items}))}))}},Be=function(){try{if(!localStorage.version)throw new Error;if(D("0.1.0","0.2.0",(function(e){var t=(new Date).getTime();return e.cards.main={id:"main",content:"Welcome",description:"Welcome to your Zettelkasten! You can edit this and use `[[wikilink]]` syntax to link to other nodes.",created:t,edited:t},e})),D("0.2.0","0.2.1",(function(e){var t=function(t){var n=Object.values(e.columns).filter((function(e){return-1!==e.items.indexOf(t)})).length;e.cards[t].type=n?0:1};for(var n in e.cards)t(n);return e.cards.main.type=1,e})),localStorage.hasOwnProperty("kanban"))return JSON.parse(localStorage.kanban)||k()}catch(e){}return k()}(),We=Object(be.c)(Be,(j={},p()(j,ve,(function(e,t){var n=t.payload,r=n.srcColID,a=n.dstColID,o=n.srcIndex,c=n.dstIndex,i=e.columns[r].items,l=e.columns[a].items,u=i.splice(o,1),d=s()(u,1)[0],m=(new Date).getTime();e.cards[d].moved=m,e.columns[r].edited=m,e.columns[a].edited=m,l.splice(c,0,d)})),p()(j,ye,(function(e,t){var n=t.payload,r=n.colID,a=n.srcIndex,o=n.dstIndex,c=(new Date).getTime();e.columns[r].edited=c;var i=e.columns[r].items,l=i.splice(a,1),u=s()(l,1)[0];e.cards[u].moved=c,i.splice(o,0,u),e.columns[r].items=i})),p()(j,Oe,(function(e,t){var n=t.payload,r=n.content,a=n.colID,o=x(),c=(new Date).getTime();e.cards[o]={id:o,content:r,type:0,created:c,edited:c,moved:c},e.columns[a].items.unshift(o),e.columns[a].edited=c})),p()(j,ke,(function(e,t){var n=t.payload,r=Object.values(e.tabs).map((function(e){return-1!==e.columns.indexOf(t.payload)})).indexOf(!0);r>=0&&(e.tabs[e.tabOrder[r]].edited=(new Date).getTime()),e.columns[n].items.forEach((function(t){return delete e.cards[t]})),Object.values(e.tabs).forEach((function(e){return Fe(e.columns,n)})),delete e.columns[n]})),p()(j,De,(function(e,t){var n=t.payload,r=n.colID,a=n.name;e.columns[r].name=a,e.columns[r].edited=(new Date).getTime()})),p()(j,we,(function(e,t){var n=t.payload,r=n.cardID,a=n.content;e.cards[r].content=a,e.cards[r].edited=(new Date).getTime()})),p()(j,Ce,(function(e,t){Object.values(e.columns).forEach((function(e){Fe(e.items,t.payload)&&(e.edited=(new Date).getTime())})),delete e.cards[t.payload]})),p()(j,xe,(function(e,t){var n=t.payload,r=n.tabID,a=n.name,o=x(),c=(new Date).getTime();e.columns[o]={id:o,items:[],name:a,created:c,edited:c},e.tabs[r].columns.push(o),e.tabs[r].edited=c})),p()(j,je,(function(e,t){var n=t.payload,r=n.card,a=n.colID,o=(new Date).getTime();e.cards[r.id]=t.payload.card,e.cards[r.id].edited=o;var c=Object.keys(e.columns).filter((function(t){return-1!==e.columns[t].items.indexOf(r.id)}))[0],i=a;c!==i&&(Fe(e.columns[c].items,r.id),e.columns[i].items.unshift(r.id),e.columns[c].edited=e.columns[i].edited=o)})),p()(j,Ie,(function(e,t){for(var n=t.payload,r=e.tabs[e.tabOrder[n]];r.columns.length;){var a=r.columns[0];e.columns[a].items.forEach((function(t){return delete e.cards[t]})),delete e.columns[a],r.columns.shift()}delete e.tabs[e.tabOrder[n]],e.tabOrder.splice(n,1)})),p()(j,Pe,(function(e,t){var n=x(),r=t.payload;e.tabs[n]={name:r,id:n,columns:[],created:(new Date).getTime()},e.tabOrder.push(n)})),p()(j,Ne,(function(e,t){var n=t.payload,r=n.tabID,a=n.name;e.tabs[r].name=a,e.tabs[r].edited=(new Date).getTime()})),p()(j,Se,(function(e,t){var n=s()(t.payload,3),r=n[0],a=n[1],o=n[2],c=e.tabOrder[o],i=e.tabs[c].columns,l=i.splice(r,1),u=s()(l,1)[0];i.splice(a,0,u),e.tabs[c].columns=i,e.tabs[c].edited=(new Date).getTime()})),p()(j,Me,(function(e,t){var n=s()(t.payload,2),r=n[0],a=n[1];if(!(a<0||a>=e.tabs.length)){var o=e.tabOrder,c=o.splice(r,1),i=s()(c,1)[0];o.splice(a,0,i),e.tabOrder=o}})),p()(j,Te,(function(e,t){var n=t.payload,r=(new Date).getTime();e.columns[n].items.forEach((function(n){var a=e.cards[n];a.moved=a.edited=a.archived=r,a.archivedFromColID=t.payload})),e.columns[n].items=[],e.columns[n].edited=r})),p()(j,Ae,(function(e,t){var n=t.payload.zettel,r=n.id||x(),a=(new Date).getTime();e.cards[r]=Ee({id:r,type:1,created:a,edited:a,moved:a},n)})),p()(j,Re,(function(e,t){var n=t.payload.zettel,r=(new Date).getTime();-1!==Object.keys(e.cards).indexOf(n.id)&&(e.cards[n.id]=n,e.cards[n.id].edited=r)})),p()(j,Le,(function(e,t){delete e.cards[t.payload]})),p()(j,ze,(function(e,t){e.starredZettels||(e.starredZettels=[]),-1===e.starredZettels.indexOf(t.payload)?e.starredZettels.push(t.payload):Fe(e.starredZettels,t.payload)})),j)),Ze=ge()(We,{limit:20}),He=n(95),Je=Object(be.a)({reducer:Ze,middleware:function(e){return e().concat(He.a)}});try{document.addEventListener("keyup",(function(e){-1===["input","textarea"].indexOf(document.activeElement.tagName.toLowerCase())&&(e.ctrlKey&&90===e.which&&!e.shiftKey?Je.dispatch(pe.ActionCreators.undo()):(e.ctrlKey&&e.shiftKey&&90===e.which||e.ctrlKey&&89===e.which)&&Je.dispatch(pe.ActionCreators.redo()))}))}catch(vn){}var Ke=Je,Ge=function(e){return e.present},Ue={boards:S(_e,(function(e){return function(t){return e(Ge(t))}}))},Ve=function(){return function(e){try{if(localStorage){var t=JSON.stringify(e);localStorage.setItem("kanban",t),localStorage.setItem("version","0.2.1")}}catch(vn){}}(Ge(Je.getState()))};Je.subscribe(Ve),Ve();var Ye=n(512),$e=n(215),Xe=n.n($e),qe=(n(360),function(e){var t=e.cards?function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#/notes/",a=/(\[\[[A-Za-z0-9_-]+\]\])/gm;null!==(n=a.exec(e));){n.index===a.lastIndex&&a.lastIndex++;var o=(e.substring(0,n.index).match(/`/gm)||[]).length%2===0;if(o){var c=n[1].substring(2,n[1].length-2),i=e.substring(0,n.index),l=N(t[c]),u=r+c,s=e.substring(n.index+n[1].length,e.length);e=i+"["+l+"]("+u+")"+s}}return e}(e.source,e.cards):e.source;return i.createElement(Xe.a,{source:t,escapeHtml:!1})}),Qe=n(490),et=n(150),tt=n(216),nt=function(e){var t=e.value,n=e.setValue,r=e.autoFocus,a=void 0!==r&&r,o=e.addNote,c=e.rowsMax,l=void 0===c?24:c,u=i.useRef(null),s=Object(f.d)(Ue.boards.cards);return i.useEffect((function(){var e=new tt.TextareaEditor(u.current),t={context:function(e){return e.indexOf("[[")>=0},match:/\[\[([A-Za-z0-9_ -]+)$/,search:function(e,t,n){return t([].concat(ae()(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=[],a=e.toLowerCase();for(var o in t)if(t[o].content.toLowerCase().includes(a)&&(r.push(o),r.length===n))return r;for(var c in t)if(t[c].description&&t[c].description.toLowerCase().includes(a)&&(r.push(c),r.length===n))return r;for(var i in t)if(i.toLowerCase().includes(a)&&(r.push(i),r.length===n))return r;return r}(e,s)),[0]))},cache:!0,template:function(e){return 0===e?o?"<em>Add note</em>":"":N(s[e])},replace:function(e){if(0===e&&o){var t=x();return setTimeout((function(){return o(t)}),0),"[["+t+"]]"}return"[["+e+"]]"}},n=new et.Textcomplete(e,[t],{dropdown:{rotate:!0,maxCount:10}});return function(){return n.destroy(),delete window.__addNote}}),[u.current]),i.createElement(se.a,{margin:"dense",fullWidth:!0,variant:"outlined",autoFocus:a,multiline:!0,rows:6,rowsMax:l,value:t,onChange:function(e){return n(e.target.value)},inputProps:{ref:u}})};function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=function(e){var t=e.card,n=e.setCard,r=i.useState(!1),a=s()(r,2),o=a[0],c=a[1],l=Object(f.d)(Ue.boards.cards);return o||"string"===typeof t.description?o?i.createElement(i.Fragment,null,i.createElement(de.a,{className:"custom-label"},"Description"),i.createElement(Qe.a,{onClickAway:function(){return c(!1)}},i.createElement("div",{style:{width:"100%",height:"100%"}},i.createElement(nt,{value:t.description,setValue:function(e){return n(at(at({},t),{},{description:e.length?e:void 0}))},autoFocus:!0})))):i.createElement("div",{style:{marginTop:8}},i.createElement("div",{onClick:function(){return c(!0)}},i.createElement(de.a,{className:"custom-label"},"Description")),i.createElement(qe,{source:t.description,cards:l})):i.createElement(It,{onClick:function(){return c(!0)}},"Add description")},ct=function(e){var t=e.card;if(t.description){var n=t.description.split("\n\n").join("\n").substring(0,500);return t.description.length,i.createElement(Pt,{label:null,title:n,icon:i.createElement(ne.a,null)})}return null},it=n(217),lt=n.n(it),ut=n(20),st=n(500),dt=n(232),mt=n(494),ft=n(514);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ft.a.weekStart=1;var gt=function(e){var t=e.card,n=e.setCard,r=function(e){return n(pt(pt({},t),{},{time:e}))};return t.time?i.createElement("div",{style:{marginTop:10}},i.createElement(de.a,{className:"custom-label"},"Date & time"),i.createElement(ut.a,{utils:dt.a,locale:ft.a},i.createElement(st.a,{value:new Date(t.time),onChange:function(e){return r(e.getTime())},showTodayButton:!0,format:"MMMM do hh:mm aaa"})),i.createElement(Y.a,{color:"primary",variant:"outlined",style:{float:"right",marginTop:12},onClick:function(){return r(null)}},"Reset date")):i.createElement(It,{onClick:function(){return r(Object(mt.a)())}},"Add date & time")},ht=function(e){var t=e.card;return t.time?i.createElement(Pt,{icon:i.createElement(lt.a,null),label:T(t.time),title:Object(g.a)(new Date(t.time),"dd/MM/yyyy hh:mmaaa")}):null},Et=n(495),vt=n(505),yt=n(218),Ot=n.n(yt);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct=function(e){var t=e.card,n=e.setCard,r=function(e){return n(jt(jt({},t),{},{ebs:jt(jt({},t.ebs),e)}))},a=i.useState(t.ebs?kt(t.ebs.estimate):""),o=s()(a,2),c=o[0],l=o[1],u=i.useState(t.ebs?kt(t.ebs.elapsed):""),d=s()(u,2),m=d[0],b=d[1],p=Object(f.d)((function(e){return Object.values(Ge(e).cards).filter((function(e){return e.hasOwnProperty("ebs")&&null!==e.ebs})).filter((function(e){return e.ebs.elapsed&&e.ebs.estimate})).map((function(e){return e.ebs}))})),g=function(e){l(e);var t=Dt(e);"number"===typeof t&&r({estimate:t,computed:xt(t,p)})};if(!t.ebs)return i.createElement(It,{onClick:function(){return g("1h")}},"Add time estimate");var h=function(e){return""!==e&&null!==e&&null===Dt(e)};return i.createElement("div",{style:{marginTop:10}},i.createElement(de.a,{className:"custom-label"},"Time estimate"),i.createElement("div",{style:{width:"30%",float:"left",marginRight:16}},i.createElement(se.a,{label:"Estimate (predicted "+kt(xt(Dt(c)||0,p))+")",margin:"dense",fullWidth:!0,value:c,error:h(c),helperText:h(c)?"Example format: 1h30m":null,onChange:function(e){return g(e.target.value)}})),i.createElement("div",{style:{width:"30%",float:"left",marginRight:16}},i.createElement(se.a,{label:"Elapsed",margin:"dense",fullWidth:!0,value:m,error:h(m),helperText:h(m)?"Example format: 1h30m":null,onChange:function(e){return function(e){b(e);var t=Dt(e);"number"===typeof t&&r({elapsed:t})}(e.target.value)}})),i.createElement("div",{style:{marginTop:12,float:"left"}},i.createElement(Et.a,{label:"Exact duration",control:i.createElement(vt.a,{color:"primary",checked:Boolean(t.ebs.exact),onChange:function(e){return r({exact:e.target.checked})}})})),i.createElement("div",{style:{flexGrow:1}}),i.createElement(Y.a,{color:"primary",variant:"outlined",size:"medium",style:{float:"right",marginTop:12},onClick:function(){return l(""),b(""),n(jt(jt({},t),{},{ebs:null}))}},"Reset estimate"))},xt=function(e,t){if("number"!==typeof e)return e;var n=t.reduce((function(e,n){return e+n.elapsed/n.estimate/t.length}),0);n||(n=1),t.length<10&&(n=(n+1)/2);for(var r=e*n,a=0,o=[3600,900,300];a<o.length;a++){var c=o[a];if(e%c===0&&Math.abs(r-e)>c/2)return c*Math.round(r/c)}return 60*Math.round(r/60)},kt=function(e){if("string"===typeof e)return e;var t=Math.floor(e/3600),n=Math.floor(e%3600/60);return 0===t&&0===n?"0":(t?t+"h":"")+(n?n+"m":"")},Dt=function(e){if("0"===e)return 0;var t=/^(\d+h|\d*\.\d+h)?(\d+m|\d*\.\d+m)?$/m.exec(e);if(!t||3!==t.length||!t.slice(1).filter((function(e){return e})).length)return null;var n=function(e){return parseFloat(e.substring(0,e.length-1))};return 3600*n((t=t.slice(1))[0]||"00")+60*n(t[1]||"00")},St=function(e){var t=e.card;if(t.ebs){var n=(t.ebs.elapsed?kt(t.ebs.elapsed)+"/":"")+kt(t.ebs.exact?t.ebs.estimate:t.ebs.computed),r=t.ebs.elapsed?"Elapsed: "+kt(t.ebs.elapsed):"",a=t.ebs.exact?"Duration: "+kt(t.ebs.estimate)+"\n"+r:"Estimate: "+kt(t.ebs.estimate)+"\nComputed: "+kt(t.ebs.computed)+"\n"+r,o=i.createElement(Ot.a,null);return i.createElement(Pt,{label:n,title:a,icon:o})}return null},Tt=Object(V.a)({label:{padding:3},header:{marginBottom:6,marginTop:6}}),Pt=function(e){var t=e.icon,n=e.label,r=e.title;return i.createElement(Ye.a,{size:"small",icon:t,label:n,title:r,classes:n&&n.length?null:{label:Tt().label},style:{borderRadius:3,background:"white",marginRight:2},variant:"outlined"})},It=function(e){return i.createElement("div",{className:Tt().header},i.createElement(Y.a,U()({variant:"outlined",color:"primary",size:"small"},e)))};function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var At=function(e){var t=e.open,n=e.respond,r=e.title,a=e.subtitle,o=e.labels,c=void 0===o?["Cancel","OK"]:o;return i.createElement(oe.a,{open:t,onClose:function(){return n(null)}},i.createElement(ce.a,null,r),i.createElement(ie.a,null,i.createElement(le.a,null,a)),i.createElement(ue.a,null,i.createElement(Y.a,{onClick:function(){return n(!1)},color:"primary"},c[0]),i.createElement(Y.a,{onClick:function(){return n(!0)},color:"primary",variant:"contained",autoFocus:!0},c[1])))},Rt=function(e){var t=e.open,n=e.respond,r=e.title,a=e.subtitle,o=e.labels,c=void 0===o?["Cancel","OK"]:o,l=e.label,u=e.inputType,d=void 0===u?"text":u,m=e.placeholder,f=void 0===m?"":m,b=e.buttons,p=void 0===b?null:b,g=i.useState(f),h=s()(g,2),E=h[0],v=h[1],y=function(e){n(e),v(f)};return i.createElement(oe.a,{open:t,onClose:function(){return y(null)}},i.createElement(ce.a,null,r),i.createElement(ie.a,null,"string"===typeof a&&i.createElement(le.a,null,a),i.createElement(se.a,{autoFocus:!0,margin:"dense",fullWidth:!0,label:l,type:d,value:E,onChange:function(e){return v(e.target.value)}})),i.createElement(ue.a,null,p,i.createElement(Y.a,{onClick:function(){return y(!1)},color:"primary"},c[0]),i.createElement(Y.a,{onClick:function(){return y(E)},color:"primary",variant:"contained"},c[1])))},Lt=function(e){var t=e.respond,n=e.card,c=Object(f.c)(),l=Object(f.d)((function(e){return Object.values(Ge(e).columns).filter((function(e){return-1!==e.items.indexOf(n.id)}))[0].id})),u=i.useState(l),d=s()(u,2),m=d[0],b=d[1],p=i.useState(n),g=s()(p,2),h=g[0],E=g[1],v=function(e){return E(Mt(Mt({},h),{},{content:e}))},y=Object(f.d)(Ue.boards.columns),O=Object(f.d)(Ue.boards.tabs),w=function(){return t(),v(n.content)};return i.createElement(oe.a,{open:!0,onClose:function(){return w()},fullWidth:!0,maxWidth:"md",disableBackdropClick:JSON.stringify(h)!==JSON.stringify(n)},i.createElement(A,{shouldProtect:JSON.stringify(h)!==JSON.stringify(n)}),i.createElement(ce.a,null,"Edit card"),i.createElement(ie.a,null,i.createElement(de.a,{id:"kanban/card-column",className:"custom-label"},"Column"),i.createElement(me.a,{labelId:"kanban/card-column",value:m,onChange:function(e){return b(e.target.value)}},Object.values(O).flatMap((function(e){return[i.createElement(fe.a,{key:e.id},e.name)].concat(ae()(e.columns.map((function(e){return i.createElement(Z.a,{value:e,key:e},y[e].name)}))))}))),i.createElement(de.a,{id:"kanban/card-title",className:"custom-label"},"Title"),i.createElement(se.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:h.content,onChange:function(e){return v(e.target.value)}}),i.createElement(r.Edit,{card:h,setCard:E}),i.createElement(a.Edit,{card:h,setCard:E}),i.createElement(o.Edit,{card:h,setCard:E})),i.createElement(ue.a,null,i.createElement(Y.a,{onClick:function(){return c(je({card:h,colID:m})),c(Ce(n.id)),w()}},"Delete"),i.createElement(Y.a,{onClick:w,color:"primary"},"Cancel"),i.createElement(Y.a,{onClick:function(){return c(je({card:h,colID:m})),w()},color:"primary",variant:"contained"},"OK")))},zt=function(e){var t=e.open,n=e.respond;return i.createElement(oe.a,{open:t,onClose:n,fullWidth:!0},i.createElement(ce.a,null,"About Mirror"),i.createElement(ie.a,null,i.createElement(le.a,null,"A free and open source personal task management and note taking app.",i.createElement("br",null),"Made by Oliver Balfour. \xa9 2020.",i.createElement("br",null),"App icon is ",i.createElement("a",{href:"https://thenounproject.com/term/mirror/340140/"},"Mirror"),"\xa0 by Lastspark from ",i.createElement("a",{href:"http://thenounproject.com/"},"The Noun Project"),".")),i.createElement(ue.a,null,i.createElement(Y.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},Ft=function(e){var t=e.active,n=e.setActive,r=l.a.useState(!1),a=s()(r,2),o=a[0],c=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"primary",style:{top:"auto",bottom:0}},l.a.createElement($.a,{style:{minHeight:0}},l.a.createElement(F.a,{edge:"start",color:"inherit",onClick:function(){return console.log("open menu")}},l.a.createElement(q.a,null)),l.a.createElement(L.a,{value:t,onChange:function(e,t){return n(t)},TabIndicatorProps:{style:{backgroundColor:"white"}}},l.a.createElement(z.a,{label:l.a.createElement("div",null,l.a.createElement(ee.a,{style:{verticalAlign:"middle"}})," Board")}),l.a.createElement(z.a,{label:l.a.createElement("div",null,l.a.createElement(ne.a,{style:{verticalAlign:"middle"}})," Notes")})),l.a.createElement("div",{style:{flexGrow:1}}),l.a.createElement(H,{map:{"Submit feedback":function(){return window.open("mailto:oliver.leo.balfour+mirrorsupport@googlemail.com","_blank")},About:function(){return c(!0)},"Clear saved state":function(){return"YES"===window.prompt("Delete all saved state? Pressing undo will fix this. Type YES to confirm","NO")&&localStorage.clear()},"Import state":function(){localStorage.kanban=window.prompt("Paste your exported state here. Press cancel (or the undo button after pressing OK) to revert. Refresh the page to confirm and reload state.")},"Export state":function(){return function(e,t,n){n||(n="application/octet-stream");var r=document.createElement("a"),a=new Blob([e],{type:n});r.href=window.URL.createObjectURL(a),r.download=t,r.click()}(localStorage.kanban,"mirror-backup.json","application/json")}}},l.a.createElement(F.a,{edge:"end",color:"inherit"},l.a.createElement(B.a,null))))),l.a.createElement(zt,{open:o,respond:function(){return c(!1)}}))},_t=n(221),Bt=n.n(_t),Wt=n(222),Zt=n.n(Wt),Ht=function(){var e=Object(f.c)();return i.createElement(i.Fragment,null,i.createElement(F.a,{onClick:function(){return e(pe.ActionCreators.undo())}},i.createElement(Bt.a,null)),i.createElement(F.a,{onClick:function(){return e(pe.ActionCreators.redo())}},i.createElement(Zt.a,null)))},Jt=n(499),Kt=n(96),Gt=n.n(Kt),Ut=n(120),Vt=n.n(Ut),Yt=n(70),$t=Object(V.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"row",flexWrap:"nowrap",padding:8,fontSize:"14px","& *":{flexShrink:0}},column:{background:"#DFEEEE",padding:8,paddingBottom:24,width:300,border:"1px solid #CCDCDC",borderRadius:5,margin:8,transition:"border 0.2s",height:"calc(100vh - 160px)",overflow:"hidden"},addColumnContainer:{width:340},addColumn:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px",background:"#DFEEEE",padding:8,paddingBottom:24,width:300,border:"1px solid #CCDCDC",borderRadius:5,margin:8},columnHeaderContainer:{padding:"8 0",display:"flex",justifyContent:"space-between"},columnHeaderText:{paddingLeft:8,paddingBottom:0,fontSize:"1.4em",fontWeight:500},columnHeaderRule:{overflow:"hidden",border:"none",color:"#CCDCDC",backgroundColor:"#CCDCDC",height:"1px",width:317,marginLeft:-9},card:{userSelect:"none",padding:"10px 13px",margin:"0 0 8px 0",background:"white",borderRadius:5,transition:"opacity 0.3s",overflow:"hidden","&:hover, &:focus":{boxShadow:"0 1px 3px rgba(100, 100, 100, 0.3)"},"&>p":{margin:0}},draggingCard:{opacity:.7,boxShadow:"0 1px 3px rgba(100, 100, 100, 0.3)"},columnContainer:{transition:"opacity 0.6s"},draggingColumn:{opacity:.7}}})),Xt=function(e){var t=e.tabInfo,n=t.index,r=t.tab,a=Object(f.c)(),o=$t(),c=Object(f.d)(Ue.boards.tabOrder),l=Object(f.d)(Ue.boards.getColumnsInTabs)[c[n]],u=Object(f.d)(Ue.boards.tabs),m=Object(f.d)(Ue.boards.cards),b=u[c[n]].columns,p=i.useState(!1),g=s()(p,2),h=g[0],E=g[1],v=I(),y=s()(v,2),O=y[0],w=y[1],j="edit"===O.split("/")[4]?O.split("/")[3]:null,C=Object(f.d)(Ue.boards.cardsByTab),x=function(e){return w(e?"/boards/"+u[function(e){return Object.keys(C).filter((function(t){return-1!==C[t].indexOf(e)}))}(e)].name.toLowerCase()+"/"+e+"/edit":"/boards/"+O.split("/")[2])};return i.createElement(d.a,{style:{width:"100vw",overflowX:"auto",height:"100%"}},i.createElement(Yt.a,{onDragEnd:function(e){e.destination&&("card"===e.type?a(function(e){var t=s()(e,4),n=t[0],r=t[1],a=t[2],o=t[3];return n===r?ye({colID:n,srcIndex:a,dstIndex:o}):ve({srcColID:n,dstColID:r,srcIndex:a,dstIndex:o})}([e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index])):"column"===e.type&&a(Se([e.source.index,e.destination.index,n])))}},i.createElement(Yt.c,{droppableId:"default",style:{flexGrow:1,height:"100%"},direction:"horizontal",type:"column"},(function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:o.root,ref:e.innerRef},b.map((function(e,t){return i.createElement(qt,{col:l[t],styles:o,key:e,index:t,setEditingCard:x})})),i.createElement(nn,{styles:o,add:function(){return E(!0)},hide:t.isDraggingOver||t.draggingFromThisWith})),e.placeholder)}))),h&&i.createElement(Rt,{open:!0,respond:function(e){return E(!1)||"string"===typeof e&&e.length&&a(xe({tabID:r.id,name:e}))},title:"Add column",label:"Name"}),j&&m.hasOwnProperty(j)&&i.createElement(Lt,{respond:function(){return x(null)},card:m[j]}))},qt=function(e){var t=e.styles,n=e.col,r=e.index,a=e.setEditingCard,o=n.id,c=n.items,l=(n.name,i.useState(!1)),u=s()(l,2),d=u[0],m=u[1],b=i.useState(""),p=s()(b,2),g=p[0],h=p[1],E=Object(f.c)(),v=function(){g.length&&E(Oe({content:g,colID:o})),h(""),m(!1)},y=function(){d?h(""):O.current.scrollTop=0,m(!d)},O=i.useRef(null),w=function(){console.log("pressed menu button")},j=i.createElement(Yt.c,{droppableId:o,style:{flexGrow:1,height:"100%"},type:"card",ignoreContainerClipping:!0},(function(e,n){return i.createElement(i.Fragment,null,i.createElement("div",{style:{width:300,overflowY:"auto",overflowX:"hidden",height:n.isDraggingOver?"calc(100% - 120px)":"calc(100% - 20px)",paddingBottom:n.isDraggingOver?100:0},ref:M(e.innerRef,O)},d&&i.createElement(Qt,{value:g,setValue:h,add:v,cancel:function(){h(""),m(!1)}}),c.map((function(e,n){return e?i.createElement(tn,{card:e,styles:t,index:n,key:e.id,setEditingCard:a}):null}))),e.placeholder)}));return i.createElement(Yt.b,{draggableId:o,index:r},(function(e,r){return i.createElement("div",U()({ref:e.innerRef},e.draggableProps,{className:t.columnContainer+(r.isDragging?" "+t.draggingColumn:""),style:e.draggableProps.style}),i.createElement("div",{className:t.column},i.createElement("div",e.dragHandleProps,i.createElement(en,{styles:t,col:n,add:y,menu:w})),j))}))},Qt=function(e){var t=e.value,n=e.setValue,r=e.add,a=e.cancel;return i.createElement("div",null,i.createElement(se.a,{label:"New Card",multiline:!0,autoFocus:!0,rowsMax:6,value:t,onChange:function(e){return n(e.target.value)},variant:"filled",style:{width:"100%"}}),i.createElement(Jt.a,{variant:"contained",size:"small",style:{marginBottom:8,boxShadow:"0px 4px 2px -2px rgba(0,0,0,0.15)",width:"100%"}},i.createElement(Y.a,{style:{flexGrow:1},variant:"contained",onClick:r},"Done"),i.createElement(Y.a,{onClick:a},i.createElement(Vt.a,{style:{color:"#555"}}))))},en=function(e){var t=e.styles,n=e.col,r=e.add,a=(e.menu,Object(f.c)()),o=i.useState(!1),c=s()(o,2),l=c[0],u=c[1],d=i.useState(!1),m=s()(d,2),b=m[0],p=m[1];return i.createElement("div",null,i.createElement("div",{className:t.columnHeaderContainer},i.createElement("div",{className:t.columnHeaderText},n.name),i.createElement("div",null,i.createElement(F.a,{size:"small",onClick:function(){return r()}},i.createElement(Gt.a,null)),i.createElement(H,{map:{"Archive all":function(){return a(Te(n.id))},Rename:function(){return p(!0)},Delete:function(){return u(!0)}}},i.createElement(F.a,{size:"small"},i.createElement(B.a,null))))),i.createElement("hr",{className:t.columnHeaderRule}),l&&i.createElement(At,{open:!0,respond:function(e){return u(!1)||e&&a(ke(n.id))},title:"Delete this column?",subtitle:"Don't worry, this action can be undone."}),b&&i.createElement(Rt,{open:!0,respond:function(e){return p(!1)||"string"===typeof e&&e.length&&a(De({colID:n.id,name:e}))},title:'Rename column "'+n.name+'"',subtitle:"Don't worry, this action can be undone.",label:"Name",placeholder:n.name}))},tn=function(e){var t=e.card,n=e.styles,c=e.index,l=e.setEditingCard,u=Object(f.d)(Ue.boards.cards);if(!t)return null;var s=t.id,d=t.content;return i.createElement(i.Fragment,null,i.createElement(Yt.b,{draggableId:s,index:c},(function(e,c){return i.createElement("div",U()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:n.card+(c.isDragging?" "+n.draggingCard:""),style:e.draggableProps.style,onClick:function(){return l(s)}}),i.createElement(qe,{source:d,cards:u}),i.createElement(r.Indicator,{card:t}),i.createElement(a.Indicator,{card:t}),i.createElement(o.Indicator,{card:t}))})))},nn=function(e){var t=e.styles,n=e.add,r=e.hide;return i.createElement("div",{className:t.addColumnContainer,style:{marginLeft:r?334:0}},i.createElement("div",{className:t.addColumn},i.createElement(F.a,{onClick:n},i.createElement(Gt.a,null))))},rn=function(){var e=Object(f.c)(),t=I(),n=s()(t,2),r=n[0],a=n[1],o=Object(f.d)(Ue.boards.tabs),c=Object(f.d)(Ue.boards.tabOrder),l=c.map((function(e){return o[e].name.toLowerCase()===r.split("/")[2]})).indexOf(!0),u=function(e){return a("/boards/"+o[c[e]].name.toLowerCase())};l<0&&(l=0);var d=i.useState(!1),m=s()(d,2),b=m[0],p=m[1],g=i.useState(!1),h=s()(g,2),E=h[0],v=h[1],y=i.useState(!1),O=s()(y,2),w=O[0],j=O[1];return i.createElement(i.Fragment,null,i.createElement(K,{tabs:c.map((function(e){return o[e].name})),render:function(e){return i.createElement(Xt,{tabInfo:{tab:o[c[e]],index:e}})},addTab:function(){return v(!0)},renameTab:function(){return j(!0)},deleteTab:function(){return Object.values(o).length>1?p(!0):alert("Cannot delete only tab")},moveTab:function(t){return e(Me(t))},children:i.createElement(Ht,null),index:l,setIndex:u}),b&&i.createElement(At,{open:!0,respond:function(t){return p(!1)||t&&(e(Ie(l)),u(Math.max(0,l-1)))},title:"Delete this tab?",subtitle:"Don't worry, this action can be undone."}),E&&i.createElement(Rt,{open:!0,respond:function(t){return v(!1)||"string"===typeof t&&t.length&&e(Pe(t))},title:"Add tab",label:"Name"}),w&&i.createElement(Rt,{open:!0,respond:function(t){return j(!1)||"string"===typeof t&&t.length&&e(Ne({tabID:c[l],name:t}))},title:"Rename tab "+o[c[l]].name,label:"Name"}))},an=n(223),on=n.n(an),cn=n(151),ln=n.n(cn),un=n(225),sn=n.n(un),dn=n(224),mn=n.n(dn);function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pn=Object(V.a)((function(e){return{container:{background:"#DFEEEE",position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",justifyContent:"center",alignItems:"flex-start",padding:10},zettel:{background:"white",borderRadius:5,width:650,margin:10,marginTop:70,boxShadow:"0 1px 3px rgba(100, 100, 100, 0.3)",padding:16,paddingTop:8,paddingBottom:12,"&>p":{marginTop:0},"&>p:last-child":{marginBottom:0}},zettelTitle:{marginBottom:8,marginTop:8,fontSize:24,fontWeight:600,textAlign:"center"},editingButtons:{float:"right"},buttons:{position:"absolute",top:15,left:0,right:0,display:"flex",justifyContent:"center"}}})),gn=function(){var e=I(),t=s()(e,2),n=t[0],r=t[1],a=Object(f.c)(),o=Object(f.d)(Ue.boards.cards),c=Object(f.d)(Ue.boards.starredZettels),l=pn(),u=n.split("/")[2]||"main",d=o[u],m=i.useState(bn({},d)),b=s()(m,2),p=b[0],g=b[1],h=function(e){return g(bn(bn({},p),e))};if("object"!==typeof d)return null;var E="edit"===n.split("/")[3],v=function(e){return r(e?"/notes/"+u+"/edit":"/notes/"+u)},y=function(){return a(ze(u))};d.id!==p.id&&(a(Re({zettel:p})),g(bn({},d)));var O=function(e){a(Ae({zettel:{content:"New note",description:"...",id:e}})),r("/notes/"+e+"/edit")};return i.createElement(i.Fragment,null,i.createElement(A,{shouldProtect:JSON.stringify(p)!==JSON.stringify(d)}),i.createElement("div",{className:l.container},E&&i.createElement("div",{className:l.zettel},i.createElement(se.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:p.content||"",onChange:function(e){return h({content:e.target.value})}}),i.createElement(nt,{value:p.description||"",setValue:function(e){return h({description:e})},addNote:function(e){a(Re({zettel:p})),O(e)},rowsMax:30}),i.createElement("div",{className:l.editingButtons},i.createElement(Y.a,{onClick:function(){return v(!1),g(bn({},d))},color:"primary"},"Cancel"),i.createElement(Y.a,{onClick:function(){return a(Re({zettel:p})),v(!1)},color:"primary",variant:"contained"},"Save"))),i.createElement("div",{className:l.zettel+(E?" notes-editing":"")},i.createElement("div",{className:l.zettelTitle},(E?p.content:d.content)||""),i.createElement(qe,{source:(E?p.description:d.description)||"",cards:o}))),i.createElement("div",{className:l.buttons,id:"zettel-buttons-container"},i.createElement(Jt.a,{variant:"contained",color:"primary"},!E&&i.createElement(Y.a,{onClick:function(){return v(!0)},title:"Edit note"},i.createElement(on.a,null)),"main"!==d.id&&i.createElement(Y.a,{onClick:function(){return a(Ce(u)),r("/notes/main")},title:"Delete note"},i.createElement(Vt.a,null)),!E&&i.createElement(Y.a,{onClick:function(){return O(x())},title:"Add note"},i.createElement(Gt.a,null)),i.createElement(Y.a,{onClick:function(){return alert("TODO")},title:"Search notes"},i.createElement(ln.a,null)),-1===c.indexOf(d.id)?i.createElement(Y.a,{onClick:y,title:"Star this note"},i.createElement(mn.a,null)):i.createElement(Y.a,{onClick:y,title:"Unstar this note"},i.createElement(sn.a,null)))))},hn=["/board","/notes"],En=function(){var e=I(),t=s()(e,2),n=t[0],r=t[1],a=function(e){var t="/"+e.split("/")[1];return Math.max(hn.indexOf(t),0)}(n),o="web"===m.a.OS?{height:"calc(100% - 48px)"}:{flexGrow:1};return l.a.createElement(f.a,{store:Ke},l.a.createElement(d.a,{style:{top:0,left:0,height:"100%",width:"100%",display:"flex",flexDirection:"column"}},l.a.createElement(d.a,{style:o},0===a&&l.a.createElement(rn,null),1===a&&l.a.createElement(gn,null)),l.a.createElement(Ft,{active:a,setActive:function(e){return r(function(e){if(0===e){var t=Ge(Ke.getState());return"/board/"+t.tabs[t.tabOrder[0]].name.toLowerCase()}return hn[e]}(e))}})))};Object(c.a)((function(e){return l.a.createElement(En,{style:{top:0,left:0,height:"100%",width:"100%"}})}))}},[[257,1,2]]]);
//# sourceMappingURL=app.359a5b55.chunk.js.map