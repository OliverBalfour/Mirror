(this.webpackJsonpmirror=this.webpackJsonpmirror||[]).push([[0],{207:function(e,t,n){e.exports=n(374)},336:function(e,t){},373:function(e,t,n){},374:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Edit",(function(){return Ve})),n.d(a,"Indicator",(function(){return Ye}));var r={};n.r(r),n.d(r,"Edit",(function(){return at})),n.d(r,"Indicator",(function(){return rt}));var c={};n.r(c),n.d(c,"Edit",(function(){return ut})),n.d(c,"Indicator",(function(){return ft}));var o,l=n(0),i=n.n(l),u=n(16),d=n.n(u),s=n(10),m=n(13),f=n(170),b=n(18),p=n(17),g=n(186),E=n(408),h=n(409),v=n(410),O=null,y=function(){var e="yyyyMMdd-hhmmss",t=g.a(new Date,e);return null!==O&&O.substring(0,e.length)===t&&(O.length===e.length?t+="-1":t+="-"+(parseInt(O.substring(e.length+1,O.length))+1)),O=t,t},j=function(){var e,t=(new Date).getTime(),n=[y(),y()],a=Object(p.a)({tabs:(e={},Object(b.a)(e,n[0],{name:"Main",id:n[0],created:t,edited:t}),Object(b.a)(e,n[1],{name:"Secondary",id:n[1],created:t,edited:t}),e)},function(e,t){for(var n=e.reduce((function(e,t){return e+t}),0),a={},r=["Wash the dishes","Make cool app","Run out of ideas for sample tasks for the app you're making","Cook pizza for dinner","Finish your chemistry homework","Write a tutorial explaining how monads are isomorphic to burritos in the category of food","Forget to wrap a line at 300 characters","Learn Common Lisp","Do normal human things","Prove P=NP for N=1","Eat some chocolate","Stop eating so much chocolate","Write witty comment","\ud83d\ude42"],c=(new Date).getTime(),o=0;o<n;o++){var l=y();a[l]={id:l,type:0,content:r[Math.floor(Math.random()*r.length)],created:c,edited:c,moved:c}}for(var i={},u=0,d=0;u<e.length;u++){var s=Object.keys(a).slice(d,d+e[u]),m=y();i[m]={id:m,items:s,name:t[u],created:c,edited:c},d+=e[u]}return{cards:a,columns:i}}([9,2,6,5,4],["To Do","Doing","Done","Misc 1","Misc 2"])),r=Object.keys(a.columns);return a.tabs[n[0]].columns=[r[0],r[1],r[2]],a.tabs[n[1]].columns=[r[3],r[4]],a.tabOrder=n,a.cards.main={id:"main",content:"Welcome",type:1,description:"Welcome to your Zettelkasten! You can edit this and use `[[wikilink]]` syntax to link to other nodes.",created:t,edited:t},a},C=function(e,t,n){if(localStorage.version===e){var a=JSON.parse(localStorage.kanban);n(a),localStorage.kanban=JSON.stringify(a),localStorage.version=t}},w=function(e,t){return Object.keys(e).reduce((function(n,a){return n[a]=t(e[a]),n}),{})},x=function(e){var t=new Date(e),n=new Date,a=function(e){return 0===e.getHours()&&0===e.getMinutes()?null:0===e.getMinutes()?g.a(e,"haaa"):g.a(e,"h:mmaaa")}(t);return function(e){var t=E.a(e,n),a=h.a(e,n,{weekStartsOn:1}),r=v.a(e,n);if(0===t)return"Today";if(-1===t)return"Yesterday";if(1===t)return"Tomorrow";var c=g.a(e,"EEE");return 0===a&&t>=0?c:t>=-7&&t<0?"Last ".concat(c):t>0&&t<=7?"Next ".concat(c):t>7&&t<=14?"".concat(c," Week"):0===r?g.a(e,"MMM do"):g.a(e,"MMM do yyyy")}(t)+(a?" "+a:"")},k=function(){return window.location.hash.replace("#","")||"/"},D=function(){var e=l.useState(k()),t=Object(s.a)(e,2),n=t[0],a=t[1];return l.useEffect((function(){var e=function(){return a(k())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),[n,l.useCallback((function(e){return window.location.hash=e}),[]),l.useCallback((function(e){history.replaceState(void 0,void 0,"#"+e),a(e)}),[])]},T=function(e){if(!e)return"unknown";var t=e.content.split("\n")[0];return t.length>40?t.substring(0,37)+"...":t},S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.filter(Boolean);return a.length?0===a.length?a[0]:function(e){var t,n=Object(f.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"===typeof r?r(e):r&&(r.current=e)}}catch(c){n.e(c)}finally{n.f()}}:null},I=function(e){var t=e.shouldProtect,n=void 0===t||t;return l.useEffect((function(){return n&&(window.onbeforeunload=function(e){return"Are you sure you want to quit?"}),function(){return window.onbeforeunload=null}})),null},N=n(414),M=n(431),A=n(415),R=n(416),L=n(67),z=n.n(L),B=n(187),F=n(438),_=function(e){var t=e.map,n=e.children,a=l.useState(null),r=Object(s.a)(a,2),c=r[0],o=r[1],i=function(){return o(null)};return l.createElement(l.Fragment,null,l.createElement(B.a,{anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:i},Object.entries(t).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return l.createElement(F.a,{key:n,onClick:function(){i(),a()}},n)}))),l.cloneElement(n,{onClick:function(e){return o(e.currentTarget)}}))},W=function(e){var t=e.show,n=e.children;return l.createElement("div",{hidden:!t,style:{height:"calc(100% - 48px)"}},t&&n)},P=function(e){var t=e.tabs,n=e.render,a=e.children,r=e.index,c=e.setIndex,o=e.addTab,i=e.renameTab,u=e.deleteTab,d=e.moveTab,s=function(e,n){return n>=0&&n<t.length&&c(n)};return l.createElement("div",{style:{flex:1}},l.createElement(N.a,{position:"static",style:{backgroundColor:"white",zIndex:2,position:"relative"}},l.createElement(M.a,{value:r,onChange:s,indicatorColor:"primary",textColor:"primary"},t.map((function(e){return l.createElement(A.a,{label:e,key:e})})),l.createElement("div",{style:{flexGrow:1}}),l.createElement(_,{map:{"Add tab":function(){return o()},"Rename tab":function(){return i(r)},"Delete tab":function(){return u(r)},"Move tab left":function(){return d([r,r-1]),s(0,r-1)},"Move tab right":function(){return d([r,r+1]),s(0,r+1)}}},l.createElement(R.a,null,l.createElement(z.a,null))),a)),t.map((function(e,t){return l.createElement(W,{show:r===t,key:e},r===t&&n(t))})))},Z=n(417),H=n(376),J=(Object(Z.a)((function(e){return{button:{}}})),n(421)),K=n(178),G=n.n(K),U=n(179),V=n.n(U),Y=n(102),$=n.n(Y),X=n(104),q=n(436),Q=n(426),ee=n(422),te=n(427),ne=n(423),ae=n(435),re=n(440),ce=n(433),oe=n(428),le=n(19),ie=n(54),ue=n.n(ie),de=Object(le.b)("kanban/TRANSFER_CARD"),se=Object(le.b)("kanban/REORDER_CARD"),me=Object(le.b)("kanban/ADD_CARD"),fe=Object(le.b)("kanban/EDIT_CARD_CONTENT"),be=Object(le.b)("kanban/EDIT_CARD"),pe=Object(le.b)("kanban/DELETE_CARD"),ge=Object(le.b)("kanban/ADD_COLUMN"),Ee=Object(le.b)("kanban/DELETE_COLUMN"),he=Object(le.b)("kanban/RENAME_COLUMN"),ve=Object(le.b)("kanban/MOVE_COLUMN"),Oe=Object(le.b)("kanban/ARCHIVE_ALL_COLUMN"),ye=Object(le.b)("kanban/ADD_TAB"),je=Object(le.b)("kanban/DELETE_TAB"),Ce=Object(le.b)("kanban/RENAME_TAB"),we=Object(le.b)("kanban/MOVE_TAB"),xe=Object(le.b)("zettelkasten/ADD_ZETTEL"),ke=Object(le.b)("zettelkasten/EDIT_ZETTEL"),De=Object(le.b)("zettelkasten/DELETE_ZETTEL"),Te=Object(le.b)("zettelkasten/TOGGLE_STARRED"),Se=function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),-1!==n},Ie={getColumnsInTabs:function(e){return w(e.tabs,(function(t){return t.columns.map((function(t){return e.columns[t]})).map((function(t){return Object(p.a)(Object(p.a)({},t),{},{items:t.items.map((function(t){return e.cards[t]}))})}))}))},columns:function(e){return e.columns},tabs:function(e){return e.tabs},tabOrder:function(e){return e.tabOrder},cards:function(e){return e.cards},archivedCards:function(e){return Object.values(e.cards).filter((function(e){return-1!==Object.keys(e).indexOf("archived")}))},activeCards:function(e){return Object.values(e.cards).filter((function(e){return-1===Object.keys(e).indexOf("archived")}))},starredZettels:function(e){return e.starredZettels?e.starredZettels:[]},cardsByTab:function(e){return w(e.tabs,(function(t){return t.columns.flatMap((function(t){return e.columns[t].items}))}))}},Ne=function(){try{if(!localStorage.version)throw new Error;if(C("0.1.0","0.2.0",(function(e){var t=(new Date).getTime();return e.cards.main={id:"main",content:"Welcome",description:"Welcome to your Zettelkasten! You can edit this and use `[[wikilink]]` syntax to link to other nodes.",created:t,edited:t},e})),C("0.2.0","0.2.1",(function(e){var t=function(t){var n=Object.values(e.columns).filter((function(e){return-1!==e.items.indexOf(t)})).length;e.cards[t].type=n?0:1};for(var n in e.cards)t(n);return e.cards.main.type=1,e})),localStorage.hasOwnProperty("kanban"))return JSON.parse(localStorage.kanban)||j()}catch(e){}return j()}(),Me=Object(le.c)(Ne,(o={},Object(b.a)(o,de,(function(e,t){var n=t.payload,a=n.srcColID,r=n.dstColID,c=n.srcIndex,o=n.dstIndex,l=e.columns[a].items,i=e.columns[r].items,u=l.splice(c,1),d=Object(s.a)(u,1)[0],m=(new Date).getTime();e.cards[d].moved=m,e.columns[a].edited=m,e.columns[r].edited=m,i.splice(o,0,d)})),Object(b.a)(o,se,(function(e,t){var n=t.payload,a=n.colID,r=n.srcIndex,c=n.dstIndex,o=(new Date).getTime();e.columns[a].edited=o;var l=e.columns[a].items,i=l.splice(r,1),u=Object(s.a)(i,1)[0];e.cards[u].moved=o,l.splice(c,0,u),e.columns[a].items=l})),Object(b.a)(o,me,(function(e,t){var n=t.payload,a=n.content,r=n.colID,c=y(),o=(new Date).getTime();e.cards[c]={id:c,content:a,type:0,created:o,edited:o,moved:o},e.columns[r].items.unshift(c),e.columns[r].edited=o})),Object(b.a)(o,Ee,(function(e,t){var n=t.payload,a=Object.values(e.tabs).map((function(e){return-1!==e.columns.indexOf(t.payload)})).indexOf(!0);a>=0&&(e.tabs[e.tabOrder[a]].edited=(new Date).getTime()),e.columns[n].items.forEach((function(t){return delete e.cards[t]})),Object.values(e.tabs).forEach((function(e){return Se(e.columns,n)})),delete e.columns[n]})),Object(b.a)(o,he,(function(e,t){var n=t.payload,a=n.colID,r=n.name;e.columns[a].name=r,e.columns[a].edited=(new Date).getTime()})),Object(b.a)(o,fe,(function(e,t){var n=t.payload,a=n.cardID,r=n.content;e.cards[a].content=r,e.cards[a].edited=(new Date).getTime()})),Object(b.a)(o,pe,(function(e,t){Object.values(e.columns).forEach((function(e){Se(e.items,t.payload)&&(e.edited=(new Date).getTime())})),delete e.cards[t.payload]})),Object(b.a)(o,ge,(function(e,t){var n=t.payload,a=n.tabID,r=n.name,c=y(),o=(new Date).getTime();e.columns[c]={id:c,items:[],name:r,created:o,edited:o},e.tabs[a].columns.push(c),e.tabs[a].edited=o})),Object(b.a)(o,be,(function(e,t){var n=t.payload,a=n.card,r=n.colID,c=(new Date).getTime();e.cards[a.id]=t.payload.card,e.cards[a.id].edited=c;var o=Object.keys(e.columns).filter((function(t){return-1!==e.columns[t].items.indexOf(a.id)}))[0],l=r;o!==l&&(Se(e.columns[o].items,a.id),e.columns[l].items.unshift(a.id),e.columns[o].edited=e.columns[l].edited=c)})),Object(b.a)(o,je,(function(e,t){for(var n=t.payload,a=e.tabs[e.tabOrder[n]];a.columns.length;){var r=a.columns[0];e.columns[r].items.forEach((function(t){return delete e.cards[t]})),delete e.columns[r],a.columns.shift()}delete e.tabs[e.tabOrder[n]],e.tabOrder.splice(n,1)})),Object(b.a)(o,ye,(function(e,t){var n=y(),a=t.payload;e.tabs[n]={name:a,id:n,columns:[],created:(new Date).getTime()},e.tabOrder.push(n)})),Object(b.a)(o,Ce,(function(e,t){var n=t.payload,a=n.tabID,r=n.name;e.tabs[a].name=r,e.tabs[a].edited=(new Date).getTime()})),Object(b.a)(o,ve,(function(e,t){var n=Object(s.a)(t.payload,3),a=n[0],r=n[1],c=n[2],o=e.tabOrder[c],l=e.tabs[o].columns,i=l.splice(a,1),u=Object(s.a)(i,1)[0];l.splice(r,0,u),e.tabs[o].columns=l,e.tabs[o].edited=(new Date).getTime()})),Object(b.a)(o,we,(function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1];if(!(r<0||r>=e.tabs.length)){var c=e.tabOrder,o=c.splice(a,1),l=Object(s.a)(o,1)[0];c.splice(r,0,l),e.tabOrder=c}})),Object(b.a)(o,Oe,(function(e,t){var n=t.payload,a=(new Date).getTime();e.columns[n].items.forEach((function(n){var r=e.cards[n];r.moved=r.edited=r.archived=a,r.archivedFromColID=t.payload})),e.columns[n].items=[],e.columns[n].edited=a})),Object(b.a)(o,xe,(function(e,t){var n=t.payload.zettel,a=n.id||y(),r=(new Date).getTime();e.cards[a]=Object(p.a)({id:a,type:1,created:r,edited:r,moved:r},n)})),Object(b.a)(o,ke,(function(e,t){var n=t.payload.zettel,a=(new Date).getTime();-1!==Object.keys(e.cards).indexOf(n.id)&&(e.cards[n.id]=n,e.cards[n.id].edited=a)})),Object(b.a)(o,De,(function(e,t){delete e.cards[t.payload]})),Object(b.a)(o,Te,(function(e,t){e.starredZettels||(e.starredZettels=[]),-1===e.starredZettels.indexOf(t.payload)?e.starredZettels.push(t.payload):Se(e.starredZettels,t.payload)})),o)),Ae=ue()(Me,{limit:20}),Re=n(83),Le=Object(le.a)({reducer:Ae,middleware:function(e){return e().concat(Re.a)}});try{document.addEventListener("keyup",(function(e){-1===["input","textarea"].indexOf(document.activeElement.tagName.toLowerCase())&&(e.ctrlKey&&90===e.which&&!e.shiftKey?Le.dispatch(ie.ActionCreators.undo()):(e.ctrlKey&&e.shiftKey&&90===e.which||e.ctrlKey&&89===e.which)&&Le.dispatch(ie.ActionCreators.redo()))}))}catch(Qt){}var ze=Le,Be=function(e){return e.present},Fe={boards:w(Ie,(function(e){return function(t){return e(Be(t))}}))},_e=function(){return function(e){try{if(localStorage){var t=JSON.stringify(e);localStorage.setItem("kanban",t),localStorage.setItem("version","0.2.1")}}catch(Qt){}}(Be(Le.getState()))};Le.subscribe(_e),_e();var We=n(441),Pe=n(174),Ze=n.n(Pe),He=(n(297),function(e){var t=e.cards?function(e,t){for(var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#/notes/",r=/(\[\[[A-Za-z0-9_-]+\]\])/gm;null!==(n=r.exec(e));){n.index===r.lastIndex&&r.lastIndex++;var c=(e.substring(0,n.index).match(/`/gm)||[]).length%2===0;if(c){var o=n[1].substring(2,n[1].length-2),l=e.substring(0,n.index),i=T(t[o]),u=a+o,d=e.substring(n.index+n[1].length,e.length);e=l+"[".concat(i,"](").concat(u,")")+d}}return e}(e.source,e.cards):e.source;return l.createElement(Ze.a,{source:t,escapeHtml:!1})}),Je=n(420),Ke=n(130),Ge=n(175),Ue=function(e){var t=e.value,n=e.setValue,a=e.autoFocus,r=void 0!==a&&a,c=e.addNote,o=e.rowsMax,i=void 0===o?24:o,u=l.useRef(null),d=Object(m.d)(Fe.boards.cards);return l.useEffect((function(){var e=new Ge.TextareaEditor(u.current),t={context:function(e){return e.indexOf("[[")>=0},match:/\[\[([A-Za-z0-9_ -]+)$/,search:function(e,t,n){return t([].concat(Object(X.a)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=[],r=e.toLowerCase();for(var c in t)if(t[c].content.toLowerCase().includes(r)&&(a.push(c),a.length===n))return a;for(var o in t)if(t[o].description&&t[o].description.toLowerCase().includes(r)&&(a.push(o),a.length===n))return a;for(var l in t)if(l.toLowerCase().includes(r)&&(a.push(l),a.length===n))return a;return a}(e,d)),[0]))},cache:!0,template:function(e){return 0===e?c?"<em>Add note</em>":"":T(d[e])},replace:function(e){if(0===e&&c){var t=y();return setTimeout((function(){return c(t)}),0),"[[".concat(t,"]]")}return"[[".concat(e,"]]")}},n=new Ke.Textcomplete(e,[t],{dropdown:{rotate:!0,maxCount:10}});return function(){return n.destroy(),delete window.__addNote}}),[u.current]),l.createElement(ae.a,{margin:"dense",fullWidth:!0,variant:"outlined",autoFocus:r,multiline:!0,rows:6,rowsMax:i,value:t,onChange:function(e){return n(e.target.value)},inputProps:{ref:u}})},Ve=function(e){var t=e.card,n=e.setCard,a=l.useState(!1),r=Object(s.a)(a,2),c=r[0],o=r[1],i=Object(m.d)(Fe.boards.cards);return c||"string"===typeof t.description?c?l.createElement(l.Fragment,null,l.createElement(re.a,{className:"custom-label"},"Description"),l.createElement(Je.a,{onClickAway:function(){return o(!1)}},l.createElement("div",{style:{width:"100%",height:"100%"}},l.createElement(Ue,{value:t.description,setValue:function(e){return n(Object(p.a)(Object(p.a)({},t),{},{description:e.length?e:void 0}))},autoFocus:!0})))):l.createElement("div",{style:{marginTop:8}},l.createElement("div",{onClick:function(){return o(!0)}},l.createElement(re.a,{className:"custom-label"},"Description")),l.createElement(He,{source:t.description,cards:i})):l.createElement(gt,{onClick:function(){return o(!0)}},"Add description")},Ye=function(e){var t=e.card;if(t.description){var n=t.description.split("\n\n").join("\n").substring(0,500);return t.description.length,l.createElement(pt,{label:null,title:n,icon:l.createElement($.a,null)})}return null},$e=n(176),Xe=n.n($e),qe=n(21),Qe=n(430),et=n(185),tt=n(424),nt=n(443);nt.a.weekStart=1;var at=function(e){var t=e.card,n=e.setCard,a=function(e){return n(Object(p.a)(Object(p.a)({},t),{},{time:e}))};return t.time?l.createElement("div",{style:{marginTop:10}},l.createElement(re.a,{className:"custom-label"},"Date & time"),l.createElement(qe.a,{utils:et.a,locale:nt.a},l.createElement(Qe.a,{value:new Date(t.time),onChange:function(e){return a(e.getTime())},showTodayButton:!0,format:"MMMM do hh:mm aaa"})),l.createElement(H.a,{color:"primary",variant:"outlined",style:{float:"right",marginTop:12},onClick:function(){return a(null)}},"Reset date")):l.createElement(gt,{onClick:function(){return a(Object(tt.a)())}},"Add date & time")},rt=function(e){var t=e.card;return t.time?l.createElement(pt,{icon:l.createElement(Xe.a,null),label:x(t.time),title:Object(g.a)(new Date(t.time),"dd/MM/yyyy hh:mmaaa")}):null},ct=n(425),ot=n(434),lt=n(177),it=n.n(lt),ut=function(e){var t=e.card,n=e.setCard,a=function(e){return n(Object(p.a)(Object(p.a)({},t),{},{ebs:Object(p.a)(Object(p.a)({},t.ebs),e)}))},r=l.useState(t.ebs?st(t.ebs.estimate):""),c=Object(s.a)(r,2),o=c[0],i=c[1],u=l.useState(t.ebs?st(t.ebs.elapsed):""),d=Object(s.a)(u,2),f=d[0],b=d[1],g=Object(m.d)((function(e){return Object.values(Be(e).cards).filter((function(e){return e.hasOwnProperty("ebs")&&null!==e.ebs})).filter((function(e){return e.ebs.elapsed&&e.ebs.estimate})).map((function(e){return e.ebs}))})),E=function(e){i(e);var t=mt(e);"number"===typeof t&&a({estimate:t,computed:dt(t,g)})};if(!t.ebs)return l.createElement(gt,{onClick:function(){return E("1h")}},"Add time estimate");var h=function(e){return""!==e&&null!==e&&null===mt(e)};return l.createElement("div",{style:{marginTop:10}},l.createElement(re.a,{className:"custom-label"},"Time estimate"),l.createElement("div",{style:{width:"30%",float:"left",marginRight:16}},l.createElement(ae.a,{label:"Estimate (predicted ".concat(st(dt(mt(o)||0,g)),")"),margin:"dense",fullWidth:!0,value:o,error:h(o),helperText:h(o)?"Example format: 1h30m":null,onChange:function(e){return E(e.target.value)}})),l.createElement("div",{style:{width:"30%",float:"left",marginRight:16}},l.createElement(ae.a,{label:"Elapsed",margin:"dense",fullWidth:!0,value:f,error:h(f),helperText:h(f)?"Example format: 1h30m":null,onChange:function(e){return function(e){b(e);var t=mt(e);"number"===typeof t&&a({elapsed:t})}(e.target.value)}})),l.createElement("div",{style:{marginTop:12,float:"left"}},l.createElement(ct.a,{label:"Exact duration",control:l.createElement(ot.a,{color:"primary",checked:Boolean(t.ebs.exact),onChange:function(e){return a({exact:e.target.checked})}})})),l.createElement("div",{style:{flexGrow:1}}),l.createElement(H.a,{color:"primary",variant:"outlined",size:"medium",style:{float:"right",marginTop:12},onClick:function(){return i(""),b(""),n(Object(p.a)(Object(p.a)({},t),{},{ebs:null}))}},"Reset estimate"))},dt=function(e,t){if("number"!==typeof e)return e;var n=t.reduce((function(e,n){return e+n.elapsed/n.estimate/t.length}),0);n||(n=1),t.length<10&&(n=(n+1)/2);for(var a=e*n,r=0,c=[3600,900,300];r<c.length;r++){var o=c[r];if(e%o===0&&Math.abs(a-e)>o/2)return o*Math.round(a/o)}return 60*Math.round(a/60)},st=function(e){if("string"===typeof e)return e;var t=Math.floor(e/3600),n=Math.floor(e%3600/60);return 0===t&&0===n?"0":(t?t+"h":"")+(n?n+"m":"")},mt=function(e){if("0"===e)return 0;var t=/^(\d+h|\d*\.\d+h)?(\d+m|\d*\.\d+m)?$/m.exec(e);if(!t||3!==t.length||!t.slice(1).filter((function(e){return e})).length)return null;var n=function(e){return parseFloat(e.substring(0,e.length-1))};return 3600*n((t=t.slice(1))[0]||"00")+60*n(t[1]||"00")},ft=function(e){var t=e.card;if(t.ebs){var n=(t.ebs.elapsed?st(t.ebs.elapsed)+"/":"")+st(t.ebs.exact?t.ebs.estimate:t.ebs.computed),a=t.ebs.elapsed?"Elapsed: ".concat(st(t.ebs.elapsed)):"",r=t.ebs.exact?"Duration: ".concat(st(t.ebs.estimate),"\n").concat(a):"Estimate: ".concat(st(t.ebs.estimate),"\nComputed: ").concat(st(t.ebs.computed),"\n").concat(a),c=l.createElement(it.a,null);return l.createElement(pt,{label:n,title:r,icon:c})}return null},bt=Object(Z.a)({label:{padding:3},header:{marginBottom:6,marginTop:6}}),pt=function(e){var t=e.icon,n=e.label,a=e.title;return l.createElement(We.a,{size:"small",icon:t,label:n,title:a,classes:n&&n.length?null:{label:bt().label},style:{borderRadius:3,background:"white",marginRight:2},variant:"outlined"})},gt=function(e){return l.createElement("div",{className:bt().header},l.createElement(H.a,Object.assign({variant:"outlined",color:"primary",size:"small"},e)))},Et=function(e){var t=e.open,n=e.respond,a=e.title,r=e.subtitle,c=e.labels,o=void 0===c?["Cancel","OK"]:c;return l.createElement(q.a,{open:t,onClose:function(){return n(null)}},l.createElement(Q.a,null,a),l.createElement(ee.a,null,l.createElement(te.a,null,r)),l.createElement(ne.a,null,l.createElement(H.a,{onClick:function(){return n(!1)},color:"primary"},o[0]),l.createElement(H.a,{onClick:function(){return n(!0)},color:"primary",variant:"contained",autoFocus:!0},o[1])))},ht=function(e){var t=e.open,n=e.respond,a=e.title,r=e.subtitle,c=e.labels,o=void 0===c?["Cancel","OK"]:c,i=e.label,u=e.inputType,d=void 0===u?"text":u,m=e.placeholder,f=void 0===m?"":m,b=e.buttons,p=void 0===b?null:b,g=l.useState(f),E=Object(s.a)(g,2),h=E[0],v=E[1],O=function(e){n(e),v(f)};return l.createElement(q.a,{open:t,onClose:function(){return O(null)}},l.createElement(Q.a,null,a),l.createElement(ee.a,null,"string"===typeof r&&l.createElement(te.a,null,r),l.createElement(ae.a,{autoFocus:!0,margin:"dense",fullWidth:!0,label:i,type:d,value:h,onChange:function(e){return v(e.target.value)}})),l.createElement(ne.a,null,p,l.createElement(H.a,{onClick:function(){return O(!1)},color:"primary"},o[0]),l.createElement(H.a,{onClick:function(){return O(h)},color:"primary",variant:"contained"},o[1])))},vt=function(e){var t=e.respond,n=e.card,o=Object(m.c)(),i=Object(m.d)((function(e){return Object.values(Be(e).columns).filter((function(e){return-1!==e.items.indexOf(n.id)}))[0].id})),u=l.useState(i),d=Object(s.a)(u,2),f=d[0],b=d[1],g=l.useState(n),E=Object(s.a)(g,2),h=E[0],v=E[1],O=function(e){return v(Object(p.a)(Object(p.a)({},h),{},{content:e}))},y=Object(m.d)(Fe.boards.columns),j=Object(m.d)(Fe.boards.tabs),C=function(){return t(),O(n.content)};return l.createElement(q.a,{open:!0,onClose:function(){return C()},fullWidth:!0,maxWidth:"md",disableBackdropClick:JSON.stringify(h)!==JSON.stringify(n)},l.createElement(I,{shouldProtect:JSON.stringify(h)!==JSON.stringify(n)}),l.createElement(Q.a,null,"Edit card"),l.createElement(ee.a,null,l.createElement(re.a,{id:"kanban/card-column",className:"custom-label"},"Column"),l.createElement(ce.a,{labelId:"kanban/card-column",value:f,onChange:function(e){return b(e.target.value)}},Object.values(j).flatMap((function(e){return[l.createElement(oe.a,{key:e.id},e.name)].concat(Object(X.a)(e.columns.map((function(e){return l.createElement(F.a,{value:e,key:e},y[e].name)}))))}))),l.createElement(re.a,{id:"kanban/card-title",className:"custom-label"},"Title"),l.createElement(ae.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:h.content,onChange:function(e){return O(e.target.value)}}),l.createElement(a.Edit,{card:h,setCard:v}),l.createElement(r.Edit,{card:h,setCard:v}),l.createElement(c.Edit,{card:h,setCard:v})),l.createElement(ne.a,null,l.createElement(H.a,{onClick:function(){return o(be({card:h,colID:f})),o(pe(n.id)),C()}},"Delete"),l.createElement(H.a,{onClick:C,color:"primary"},"Cancel"),l.createElement(H.a,{onClick:function(){return o(be({card:h,colID:f})),C()},color:"primary",variant:"contained"},"OK")))},Ot=function(e){var t=e.open,n=e.respond;return l.createElement(q.a,{open:t,onClose:n,fullWidth:!0},l.createElement(Q.a,null,"About Mirror"),l.createElement(ee.a,null,l.createElement(te.a,null,"A free and open source personal task management and note taking app.",l.createElement("br",null),"Made by Oliver Balfour. \xa9 2020.",l.createElement("br",null),"App icon is ",l.createElement("a",{href:"https://thenounproject.com/term/mirror/340140/"},"Mirror"),"\xa0 by Lastspark from ",l.createElement("a",{href:"http://thenounproject.com/"},"The Noun Project"),".")),l.createElement(ne.a,null,l.createElement(H.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},yt=function(e){var t=e.active,n=e.setActive,a=i.a.useState(!1),r=Object(s.a)(a,2),c=r[0],o=r[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{color:"primary",style:{top:"auto",bottom:0}},i.a.createElement(J.a,{style:{minHeight:0}},i.a.createElement(R.a,{edge:"start",color:"inherit",onClick:function(){return console.log("open menu")}},i.a.createElement(G.a,null)),i.a.createElement(M.a,{value:t,onChange:function(e,t){return n(t)},TabIndicatorProps:{style:{backgroundColor:"white"}}},i.a.createElement(A.a,{label:i.a.createElement("div",null,i.a.createElement(V.a,{style:{verticalAlign:"middle"}})," Board")}),i.a.createElement(A.a,{label:i.a.createElement("div",null,i.a.createElement($.a,{style:{verticalAlign:"middle"}})," Notes")})),i.a.createElement("div",{style:{flexGrow:1}}),i.a.createElement(_,{map:{"Submit feedback":function(){return window.open("mailto:oliver.leo.balfour+mirrorsupport@googlemail.com","_blank")},About:function(){return o(!0)},"Clear saved state":function(){return"YES"===window.prompt("Delete all saved state? Pressing undo will fix this. Type YES to confirm","NO")&&localStorage.clear()},"Import state":function(){localStorage.kanban=window.prompt("Paste your exported state here. Press cancel (or the undo button after pressing OK) to revert. Refresh the page to confirm and reload state.")},"Export state":function(){return function(e,t,n){n||(n="application/octet-stream");var a=document.createElement("a"),r=new Blob([e],{type:n});a.href=window.URL.createObjectURL(r),a.download=t,a.click()}(localStorage.kanban,"mirror-backup.json","application/json")}}},i.a.createElement(R.a,{edge:"end",color:"inherit"},i.a.createElement(z.a,null))))),i.a.createElement(Ot,{open:c,respond:function(){return o(!1)}}))},jt=n(180),Ct=n.n(jt),wt=n(181),xt=n.n(wt),kt=function(){var e=Object(m.c)();return l.createElement(l.Fragment,null,l.createElement(R.a,{onClick:function(){return e(ie.ActionCreators.undo())}},l.createElement(Ct.a,null)),l.createElement(R.a,{onClick:function(){return e(ie.ActionCreators.redo())}},l.createElement(xt.a,null)))},Dt=n(429),Tt=n(84),St=n.n(Tt),It=n(103),Nt=n.n(It),Mt=n(61),At=Object(Z.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"row",flexWrap:"nowrap",padding:8,fontSize:"14px","& *":{flexShrink:0}},column:{background:"#DFEEEE",padding:8,paddingBottom:24,width:300,border:"1px solid #CCDCDC",borderRadius:5,margin:8,transition:"border 0.2s",height:"calc(100vh - 160px)",overflow:"hidden"},addColumnContainer:{width:340},addColumn:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px",background:"#DFEEEE",padding:8,paddingBottom:24,width:300,border:"1px solid #CCDCDC",borderRadius:5,margin:8},columnHeaderContainer:{padding:"8 0",display:"flex",justifyContent:"space-between"},columnHeaderText:{paddingLeft:8,paddingBottom:0,fontSize:"1.4em",fontWeight:500},columnHeaderRule:{overflow:"hidden",border:"none",color:"#CCDCDC",backgroundColor:"#CCDCDC",height:"1px",width:317,marginLeft:-9},card:{userSelect:"none",padding:"10px 13px",margin:"0 0 ".concat(8,"px 0"),background:"white",borderRadius:5,transition:"opacity 0.3s",overflow:"hidden","&:hover, &:focus":{boxShadow:"0 1px 3px rgba(100, 100, 100, 0.3)"},"&>p":{margin:0}},draggingCard:{opacity:.7,boxShadow:"0 1px 3px rgba(100, 100, 100, 0.3)"},columnContainer:{transition:"opacity 0.6s"},draggingColumn:{opacity:.7}}})),Rt=function(e){var t=e.tabInfo,n=t.index,a=t.tab,r=Object(m.c)(),c=At(),o=Object(m.d)(Fe.boards.tabOrder),i=Object(m.d)(Fe.boards.getColumnsInTabs)[o[n]],u=Object(m.d)(Fe.boards.tabs),d=Object(m.d)(Fe.boards.cards),f=u[o[n]].columns,b=l.useState(!1),p=Object(s.a)(b,2),g=p[0],E=p[1],h=D(),v=Object(s.a)(h,3),O=v[0],y=v[1],j=(v[2],"edit"===O.split("/")[4]?O.split("/")[3]:null),C=Object(m.d)(Fe.boards.cardsByTab),w=function(e){return y(e?"/boards/".concat(u[function(e){return Object.keys(C).filter((function(t){return-1!==C[t].indexOf(e)}))}(e)].name.toLowerCase(),"/").concat(e,"/edit"):"/boards/".concat(O.split("/")[2]))};return l.createElement("div",{style:{width:"100vw",overflowX:"auto",height:"100%"}},l.createElement(Mt.a,{onDragEnd:function(e){e.destination&&("card"===e.type?r(function(e){var t=Object(s.a)(e,4),n=t[0],a=t[1],r=t[2],c=t[3];return n===a?se({colID:n,srcIndex:r,dstIndex:c}):de({srcColID:n,dstColID:a,srcIndex:r,dstIndex:c})}([e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index])):"column"===e.type&&r(ve([e.source.index,e.destination.index,n])))}},l.createElement(Mt.c,{droppableId:"default",style:{flexGrow:1,height:"100%"},direction:"horizontal",type:"column"},(function(e,t){return l.createElement(l.Fragment,null,l.createElement("div",{className:c.root,ref:e.innerRef},f.map((function(e,t){return l.createElement(Lt,{col:i[t],styles:c,key:e,index:t,setEditingCard:w})})),l.createElement(_t,{styles:c,add:function(){return E(!0)},hide:t.isDraggingOver||t.draggingFromThisWith})),e.placeholder)}))),g&&l.createElement(ht,{open:!0,respond:function(e){return E(!1)||"string"===typeof e&&e.length&&r(ge({tabID:a.id,name:e}))},title:"Add column",label:"Name"}),j&&d.hasOwnProperty(j)&&l.createElement(vt,{respond:function(){return w(null)},card:d[j]}))},Lt=function(e){var t=e.styles,n=e.col,a=e.index,r=e.setEditingCard,c=n.id,o=n.items,i=(n.name,l.useState(!1)),u=Object(s.a)(i,2),d=u[0],f=u[1],b=l.useState(""),p=Object(s.a)(b,2),g=p[0],E=p[1],h=Object(m.c)(),v=function(){g.length&&h(me({content:g,colID:c})),E(""),f(!1)},O=function(){d?E(""):y.current.scrollTop=0,f(!d)},y=l.useRef(null),j=function(){console.log("pressed menu button")},C=l.createElement(Mt.c,{droppableId:c,style:{flexGrow:1,height:"100%"},type:"card",ignoreContainerClipping:!0},(function(e,n){return l.createElement(l.Fragment,null,l.createElement("div",{style:{width:300,overflowY:"auto",overflowX:"hidden",height:n.isDraggingOver?"calc(100% - 120px)":"calc(100% - 20px)",paddingBottom:n.isDraggingOver?100:0},ref:S(e.innerRef,y)},d&&l.createElement(zt,{value:g,setValue:E,add:v,cancel:function(){E(""),f(!1)}}),o.map((function(e,n){return e?l.createElement(Ft,{card:e,styles:t,index:n,key:e.id,setEditingCard:r}):null}))),e.placeholder)}));return l.createElement(Mt.b,{draggableId:c,index:a},(function(e,a){return l.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:t.columnContainer+(a.isDragging?" "+t.draggingColumn:""),style:e.draggableProps.style}),l.createElement("div",{className:t.column},l.createElement("div",e.dragHandleProps,l.createElement(Bt,{styles:t,col:n,add:O,menu:j})),C))}))},zt=function(e){var t=e.value,n=e.setValue,a=e.add,r=e.cancel;return l.createElement("div",null,l.createElement(ae.a,{label:"New Card",multiline:!0,autoFocus:!0,rowsMax:6,value:t,onChange:function(e){return n(e.target.value)},variant:"filled",style:{width:"100%"}}),l.createElement(Dt.a,{variant:"contained",size:"small",style:{marginBottom:8,boxShadow:"0px 4px 2px -2px rgba(0,0,0,0.15)",width:"100%"}},l.createElement(H.a,{style:{flexGrow:1},variant:"contained",onClick:a},"Done"),l.createElement(H.a,{onClick:r},l.createElement(Nt.a,{style:{color:"#555"}}))))},Bt=function(e){var t=e.styles,n=e.col,a=e.add,r=(e.menu,Object(m.c)()),c=l.useState(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],d=l.useState(!1),f=Object(s.a)(d,2),b=f[0],p=f[1];return l.createElement("div",null,l.createElement("div",{className:t.columnHeaderContainer},l.createElement("div",{className:t.columnHeaderText},n.name),l.createElement("div",null,l.createElement(R.a,{size:"small",onClick:function(){return a()}},l.createElement(St.a,null)),l.createElement(_,{map:{"Archive all":function(){return r(Oe(n.id))},Rename:function(){return p(!0)},Delete:function(){return u(!0)}}},l.createElement(R.a,{size:"small"},l.createElement(z.a,null))))),l.createElement("hr",{className:t.columnHeaderRule}),i&&l.createElement(Et,{open:!0,respond:function(e){return u(!1)||e&&r(Ee(n.id))},title:"Delete this column?",subtitle:"Don't worry, this action can be undone."}),b&&l.createElement(ht,{open:!0,respond:function(e){return p(!1)||"string"===typeof e&&e.length&&r(he({colID:n.id,name:e}))},title:'Rename column "'.concat(n.name,'"'),subtitle:"Don't worry, this action can be undone.",label:"Name",placeholder:n.name}))},Ft=function(e){var t=e.card,n=e.styles,o=e.index,i=e.setEditingCard,u=Object(m.d)(Fe.boards.cards);if(!t)return null;var d=t.id,s=t.content;return l.createElement(l.Fragment,null,l.createElement(Mt.b,{draggableId:d,index:o},(function(e,o){return l.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:n.card+(o.isDragging?" "+n.draggingCard:""),style:e.draggableProps.style,onClick:function(){return i(d)}}),l.createElement(He,{source:s,cards:u}),l.createElement(a.Indicator,{card:t}),l.createElement(r.Indicator,{card:t}),l.createElement(c.Indicator,{card:t}))})))},_t=function(e){var t=e.styles,n=e.add,a=e.hide;return l.createElement("div",{className:t.addColumnContainer,style:{marginLeft:a?334:0}},l.createElement("div",{className:t.addColumn},l.createElement(R.a,{onClick:n},l.createElement(St.a,null))))},Wt=function(){var e=Object(m.c)(),t=D(),n=Object(s.a)(t,2),a=n[0],r=n[1],c=Object(m.d)(Fe.boards.tabs),o=Object(m.d)(Fe.boards.tabOrder),i=o.map((function(e){return c[e].name.toLowerCase()===a.split("/")[2]})).indexOf(!0),u=function(e){return r("/boards/"+c[o[e]].name.toLowerCase())};i<0&&(i=0);var d=l.useState(!1),f=Object(s.a)(d,2),b=f[0],p=f[1],g=l.useState(!1),E=Object(s.a)(g,2),h=E[0],v=E[1],O=l.useState(!1),y=Object(s.a)(O,2),j=y[0],C=y[1];return l.createElement(l.Fragment,null,l.createElement(P,{tabs:o.map((function(e){return c[e].name})),render:function(e){return l.createElement(Rt,{tabInfo:{tab:c[o[e]],index:e}})},addTab:function(){return v(!0)},renameTab:function(){return C(!0)},deleteTab:function(){return Object.values(c).length>1?p(!0):alert("Cannot delete only tab")},moveTab:function(t){return e(we(t))},children:l.createElement(kt,null),index:i,setIndex:u}),b&&l.createElement(Et,{open:!0,respond:function(t){return p(!1)||t&&(e(je(i)),u(Math.max(0,i-1)))},title:"Delete this tab?",subtitle:"Don't worry, this action can be undone."}),h&&l.createElement(ht,{open:!0,respond:function(t){return v(!1)||"string"===typeof t&&t.length&&e(ye(t))},title:"Add tab",label:"Name"}),j&&l.createElement(ht,{open:!0,respond:function(t){return C(!1)||"string"===typeof t&&t.length&&e(Ce({tabID:o[i],name:t}))},title:"Rename tab ".concat(c[o[i]].name),label:"Name"}))},Pt=n(182),Zt=n.n(Pt),Ht=n(131),Jt=n.n(Ht),Kt=n(184),Gt=n.n(Kt),Ut=n(183),Vt=n.n(Ut),Yt=Object(Z.a)((function(e){return{container:{background:"#DFEEEE",position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",justifyContent:"center",alignItems:"flex-start",padding:10},zettel:{background:"white",borderRadius:5,width:650,margin:10,marginTop:70,boxShadow:"0 1px 3px rgba(100, 100, 100, 0.3)",padding:16,paddingTop:8,paddingBottom:12,"&>p":{marginTop:0},"&>p:last-child":{marginBottom:0}},zettelTitle:{marginBottom:8,marginTop:8,fontSize:24,fontWeight:600,textAlign:"center"},editingButtons:{float:"right"},buttons:{position:"absolute",top:15,left:0,right:0,display:"flex",justifyContent:"center"}}})),$t=function(){var e=D(),t=Object(s.a)(e,3),n=t[0],a=t[1],r=t[2],c=Object(m.c)(),o=Object(m.d)(Fe.boards.cards),i=Object(m.d)(Fe.boards.starredZettels),u=Yt(),d=n.split("/")[2]||"main",f=o[d],b=l.useState(Object(p.a)({},f)),g=Object(s.a)(b,2),E=g[0],h=g[1],v=function(e){return h(Object(p.a)(Object(p.a)({},E),e))};if("object"!==typeof f)return null;var O="edit"===n.split("/")[3],j=function(e){return r(e?"/notes/".concat(d,"/edit"):"/notes/".concat(d))},C=function(){return c(Te(d))};f.id!==E.id&&(c(ke({zettel:E})),h(Object(p.a)({},f)));var w=function(e){c(xe({zettel:{content:"New note",description:"...",id:e}})),a("/notes/".concat(e,"/edit"))};return l.createElement(l.Fragment,null,l.createElement(I,{shouldProtect:JSON.stringify(E)!==JSON.stringify(f)}),l.createElement("div",{className:u.container},O&&l.createElement("div",{className:u.zettel},l.createElement(ae.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:E.content||"",onChange:function(e){return v({content:e.target.value})}}),l.createElement(Ue,{value:E.description||"",setValue:function(e){return v({description:e})},addNote:function(e){c(ke({zettel:E})),w(e)},rowsMax:30}),l.createElement("div",{className:u.editingButtons},l.createElement(H.a,{onClick:function(){return j(!1),h(Object(p.a)({},f))},color:"primary"},"Cancel"),l.createElement(H.a,{onClick:function(){return c(ke({zettel:E})),j(!1)},color:"primary",variant:"contained"},"Save"))),l.createElement("div",{className:u.zettel+(O?" notes-editing":"")},l.createElement("div",{className:u.zettelTitle},(O?E.content:f.content)||""),l.createElement(He,{source:(O?E.description:f.description)||"",cards:o}))),l.createElement("div",{className:u.buttons,id:"zettel-buttons-container"},l.createElement(Dt.a,{variant:"contained",color:"primary"},!O&&l.createElement(H.a,{onClick:function(){return j(!0)},title:"Edit note"},l.createElement(Zt.a,null)),"main"!==f.id&&l.createElement(H.a,{onClick:function(){return c(pe(d)),r("/notes/main")},title:"Delete note"},l.createElement(Nt.a,null)),!O&&l.createElement(H.a,{onClick:function(){return w(y())},title:"Add note"},l.createElement(St.a,null)),l.createElement(H.a,{onClick:function(){return alert("TODO")},title:"Search notes"},l.createElement(Jt.a,null)),-1===i.indexOf(f.id)?l.createElement(H.a,{onClick:C,title:"Star this note"},l.createElement(Vt.a,null)):l.createElement(H.a,{onClick:C,title:"Unstar this note"},l.createElement(Gt.a,null)))))},Xt=["/boards","/notes"],qt=function(){var e=D(),t=Object(s.a)(e,2),n=t[0],a=t[1],r=function(e){var t="/"+e.split("/")[1];return Math.max(Xt.indexOf(t),0)}(n);return i.a.createElement(m.a,{store:ze},i.a.createElement("div",{style:{top:0,left:0,height:"100%",width:"100%",display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{height:"calc(100% - 48px)"}},0===r&&i.a.createElement(Wt,null),1===r&&i.a.createElement($t,null)),i.a.createElement(yt,{active:r,setActive:function(e){return a(function(e){if(0===e){var t=Be(ze.getState());return"/boards/"+t.tabs[t.tabOrder[0]].name.toLowerCase()}return Xt[e]}(e))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(373);d.a.render(i.a.createElement(qt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.c99240be.chunk.js.map