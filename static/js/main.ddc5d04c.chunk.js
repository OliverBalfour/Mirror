(this.webpackJsonpmirror=this.webpackJsonpmirror||[]).push([[0],{188:function(e,t,n){e.exports=n(222)},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Edit",(function(){return tn})),n.d(r,"Indicator",(function(){return nn}));var a={};n.r(a),n.d(a,"Edit",(function(){return bn})),n.d(a,"Indicator",(function(){return pn}));var c={};n.r(c),n.d(c,"Edit",(function(){return gn})),n.d(c,"Indicator",(function(){return En}));var i=n(0),o=n.n(i),u=n(17),l=n.n(u),s=n(12),d=n(13),f=n(21),m=n(40),b=n(18),p=n(9),h=n.n(p),v=n(14),g=n(22),O=n(42),y=n.n(O),E=n(23),j=n(8),w=n(153),k=n(25),x=n(26);function T(){return C.apply(this,arguments)}function C(){return(C=Object(v.a)(h.a.mark((function e(){var t,n,r,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],n=function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze();case 2:return t=e.sent,e.next=5,I(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,Object(x.c)();case 4:if(e.sent.length){e.next=14;break}if(!(r=N())){e.next=11;break}return e.next=10,I(r);case 10:return e.abrupt("return",r);case 11:return e.next=13,n();case 13:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.next=17,_(t);case 17:return e.abrupt("return",e.sent);case 20:return e.prev=20,e.t0=e.catch(14),console.error(e.t0),e.next=25,n();case 25:return e.abrupt("return",e.sent);case 26:case"end":return e.stop()}}),e,null,[[14,20]])})))).apply(this,arguments)}var S=function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,c,i,o,u,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:null,a=[],e.t0=k.a,e.next=5,Object(x.c)();case 5:e.t1=e.sent,c=(0,e.t0)(e.t1),e.prev=7,c.s();case 9:if((i=c.n()).done){e.next=18;break}if(o=i.value,(u=o.split("."))[1]!==n){e.next=16;break}if("continue"!==function(){var e=u[2];if(r&&-1===r.indexOf(e))return"continue";a.push(Object(x.b)(o).then((function(r){return t[n][e]=r})))}()){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t2=e.catch(7),c.e(e.t2);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.next=28,Promise.all(a);case 28:return e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,null,[[7,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}();function _(){return D.apply(this,arguments)}function D(){return(D=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c,i,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(o.length>0&&void 0!==o[0])||o[0],n={cards:{},columns:{},tabs:{}},r=Object(k.a)(_e),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=15;break}return c=a.value,e.next=9,Object(x.b)("mirror.".concat(c));case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:n[c]=e.t0;case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),r.e(e.t1);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return i=[S(n,"tabs"),S(n,"columns").then((function(){if(t)return S(n,"cards");var e=["main"];for(var r in n.columns)e.push.apply(e,Object(m.a)(n.columns[r].items));return S(n,"cards",e)}))],e.next=26,Promise.all(i);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})))).apply(this,arguments)}function N(){try{if(Object.prototype.hasOwnProperty.call(localStorage,"kanban")){var e=JSON.parse(localStorage.kanban);return delete localStorage.kanban,e}}catch(t){return console.error(t),null}}function I(e){return A.apply(this,arguments)}function A(){return(A=Object(v.a)(h.a.mark((function e(t){var n,r,a,c,i,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&!t.loading){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(x.b)("mirror.starredZettels");case 5:if(e.t0=e.sent,null!=e.t0){e.next=9;break}return e.next=9,Object(x.d)("mirror.starredZettels",[]);case 9:n=Object(k.a)(_e),e.prev=10,n.s();case 12:if((r=n.n()).done){e.next=19;break}if(a=r.value,!Object.prototype.hasOwnProperty.call(t,a)){e.next=17;break}return e.next=17,Object(x.d)("mirror.".concat(a),t[a]);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(10),n.e(e.t1);case 24:return e.prev=24,n.f(),e.finish(24);case 27:c=[],i=Object(k.a)(De);try{for(i.s();!(o=i.n()).done;)for(l in u=o.value,t[u])c.push(Object(x.d)("mirror.".concat(u,".").concat(l),t[u][l]))}catch(s){i.e(s)}finally{i.f()}return e.next=32,Promise.all(c);case 32:return e.abrupt("return",e.sent);case 35:e.prev=35,e.t2=e.catch(0),console.error(e.t2);case 38:case"end":return e.stop()}}),e,null,[[0,35],[10,21,24,27]])})))).apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return(L=Object(v.a)(h.a.mark((function e(t){var n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,e.prev=1,n){e.next=8;break}return e.next=5,Object(x.b)("mirror."+t);case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,Object(x.b)("mirror."+t+"."+n);case 10:return e.abrupt("return",e.sent);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function H(e){return M.apply(this,arguments)}function M(){return(M=Object(v.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(k.a)(t.set),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=17;break}c=a.value,e.t0=c.type,e.next="add"===e.t0||"edit"===e.t0?9:"delete"===e.t0?11:"param"===e.t0?13:15;break;case 9:return n.push(Object(x.d)("mirror.".concat(c.namespace,".").concat(c.object.id),c.object)),e.abrupt("break",15);case 11:return n.push(Object(x.a)("mirror.".concat(c.namespace,".").concat(c.id))),e.abrupt("break",15);case 13:return n.push(Object(x.d)("mirror.".concat(c.namespace),c.value)),e.abrupt("break",15);case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(2),r.e(e.t1);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=27,Promise.all(n);case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))).apply(this,arguments)}window.deleteAllState=Object(v.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,Object(x.c)();case 3:return e.t1=e.sent.map((function(e){return Object(x.a)(e)})),e.next=6,e.t0.all.call(e.t0,e.t1);case 6:for(t=e.sent,n=localStorage.length-1;n>=0;n--)(r=localStorage.key(n)).startsWith("__GITHUB")&&delete localStorage[r];return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))),window.__idb={get:x.b,set:x.d,keys:x.c,del:x.a},window.__idb.getAll=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,window.__idb.keys();case 3:return e.t1=e.sent.map(function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,window.__idb.get(t);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",e.t0.all.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),window.exportIDBState=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,window.__idb.getAll();case 3:e.sent.forEach((function(e){var n=Object(s.a)(e,2),r=n[0],a=n[1];return t[r]=a})),n=JSON.stringify(t),Object(j.j)(n,"mirror-backup.json","application/json");case 7:case"end":return e.stop()}}),e)}))),window.importIDBState=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.body.innerHTML="Choose a file to upload, or reload to cancel.&nbsp;<input type='file' id='fileinput'/>",(t=document.getElementById("fileinput")).addEventListener("change",Object(v.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).readAsText(t.files[0]),n.onloadend=Object(v.a)(h.a.mark((function e(){var t,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=JSON.parse(n.result),r=[],t)r.push(Object(x.d)(a,t[a]));return e.next=5,Promise.all(r);case 5:window.location.reload();case 6:case"end":return e.stop()}}),e)})));case 3:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));var B=null,z=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=2;break}return e.abrupt("return",B);case 2:return e.next=4,n.e(3).then(n.bind(null,308)).then((function(e){return new(0,e.Octokit)({auth:G.token})}));case 4:return e.abrupt("return",B=e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G={sha:{get latest(){return localStorage.__GITHUB_GIST_LATEST_SHA},set latest(e){localStorage.__GITHUB_GIST_LATEST_SHA=e},get current(){return localStorage.__GITHUB_GIST_CURRENT_SHA},set current(e){localStorage.__GITHUB_GIST_CURRENT_SHA=e}},get token(){return localStorage.__GITHUB_TOKEN},set token(e){localStorage.__GITHUB_TOKEN=e},get username(){return localStorage.__GITHUB_USERNAME},set username(e){localStorage.__GITHUB_USERNAME=e},get gist_id(){return localStorage.__GITHUB_GIST_ID},set gist_id(e){localStorage.__GITHUB_GIST_ID=e}};function P(){return Boolean(G.token)}function U(e){return F.apply(this,arguments)}function F(){return(F=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.set.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,z();case 4:return n=e.sent,r=function(e){return n.request("PATCH /gists/{gist_id}",{gist_id:G.gist_id,description:"Mirror synchronisation (https://oliverbalfour.github.io/Mirror/)",files:Z(e)})},e.next=8,r(t).catch(function(){var e=Object(v.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.error(n),e.next=3,Promise.all(t.set.map((function(e){return r({set:[e]})}))).catch(console.error);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.next=10,le().catch((function(e){console.error("Commit of changes failed. State may no longer be reflected by online sync target. Error: ".concat(e.toString()))}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){var t,n={},r=Object(k.a)(e.set);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=W(a);switch(a.type){case"delete":n[c]=null;break;case"add":case"edit":var i=K(a.object);n[c]={filename:c,content:i};break;case"param":n[c]={filename:c,content:JSON.stringify(a.value)}}}}catch(o){r.e(o)}finally{r.f()}return n}function W(e){return J(e.namespace,e.object?e.object.id:null)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"cards"===e?"".concat(t,".md"):t?"".concat(e,".").concat(t,".md"):"".concat(e,".md")}function V(e){var t=e.split(".");return 2===t.length?-1===_e.indexOf(t[0])?["cards",t[0]]:[t[0]]:[t[0],t[1]]}function K(e){var t=["description"],n=[];for(var r in e)if(-1===t.indexOf(r)){var a="time"===r?new Date(e[r]).getTime():JSON.stringify(e[r]);n.push("".concat(r,": ").concat(a))}var c="---\n".concat(n.join("\n"),"\n---\n");return e.description&&(c+=e.description),c}function $(e){var t={},n=e.split("---"),r=Object(s.a)(n,3),a=r[0],c=r[1],i=r[2];return c?(c.split("\n").filter((function(e){return e.trim().length})).forEach((function(e){var n=e.split(":"),r=Object(w.a)(n),a=r[0],c=r.slice(1).join(":");t[a]=JSON.parse(c.trimStart())})),i.trim().length&&(t.description=i.trim()),t):JSON.parse(a)}function q(){return(q=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return G.sha.latest=e.sent,e.next=5,te("__logged_in",!1);case 5:if(e.t0=e.sent.status,t=404!==e.t0,console.log("Logging in. Has "+(t?"":"not ")+"logged in before."),n={},!t){e.next=16;break}return e.next=12,Q();case 12:n=e.sent,console.log("Finished loading and caching remote state."),e.next=25;break;case 16:return e.next=18,re("__logged_in","true");case 18:return e.t1=ee,e.next=21,T();case 21:return e.t2=e.sent,e.next=24,(0,e.t1)(e.t2);case 24:console.log("Finished writing local state to remote.");case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("PUSH"===window.prompt('Force push to GitHub? This will reversibly OVERWRITE REMOTE STATE.Only use if corrupted. Enter "PUSH" to continue')){e.next=2;break}return e.abrupt("return");case 2:return e.t0=ee,e.next=5,T();case 5:return e.t1=e.sent,e.next=8,(0,e.t0)(e.t1);case 8:console.log("Finished force pushing local state to remote.");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(v.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("PULL"===window.prompt('Force pull from GitHub? This will IRREVERSIBLY OVERWRITE LOCAL STATE.Only use if corrupted. Enter "PULL" to continue')){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,de(null);case 4:return t=e.sent,e.next=7,pe(t);case 7:return n=e.sent,r=ve(n),e.next=11,I(r);case 11:G.sha.current=G.sha.latest=t[0],console.log("Reset local state to ".concat(G.sha.current.substring(0,10))),window.location.reload();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:if(G.sha.latest=e.sent,G.sha.latest!==G.sha.current){e.next=7;break}return console.log("No state updates required"),e.abrupt("return",{});case 7:return e.next=9,pe();case 9:return t=e.sent,n=ve(t),e.next=13,I(n);case 13:return console.log("Updated local state: ".concat((G.sha.current||"none").substring(0,10),"..").concat(G.sha.latest.substring(0,10))),G.sha.current=G.sha.latest,e.abrupt("return",n);case 18:e.prev=18,e.t0=e.catch(0),console.log("Error occurred while synchronising state. Check network connection. Error: ".concat(e.t0.toString()));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,c,i,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Ee,r=Object(k.a)(_e);try{for(r.s();!(a=r.n()).done;)c=a.value,n.param(c,t[c],null)}catch(s){r.e(s)}finally{r.f()}i=Object(k.a)(De);try{for(i.s();!(o=i.n()).done;)for(l in u=o.value,t[u])n.add(u,t[u][l])}catch(s){i.e(s)}finally{i.f()}U(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(v.a)(h.a.mark((function e(t){var n,r,a,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],r="https://gist.githubusercontent.com/"+"".concat(G.username,"/").concat(G.gist_id,"/raw/").concat(G.sha.latest,"/").concat(t),e.next=4,fetch(r);case 4:if(a=e.sent,!n){e.next=9;break}return e.abrupt("return",$(a.text()));case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(v.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===n.length&&(n="null"),r=Object(f.a)({},t,{filename:t,content:n}),e.next=4,z();case 4:return a=e.sent,e.next=7,a.request("PATCH /gists/{gist_id}",{gist_id:G.gist_id,files:r});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(v.a)(h.a.mark((function e(t){var n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,e.prev=1,e.next=4,te(J(t,n));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function oe(){return ue.apply(this,arguments)}function ue(){return(ue=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return t=e.sent,e.next=5,t.request("GET /gists/{gist_id}/commits",{gist_id:G.gist_id,per_page:1});case 5:return n=e.sent,e.abrupt("return",n.data[0].version);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return se.apply(this,arguments)}function se(){return(se=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:G.sha.current=G.sha.latest=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return fe.apply(this,arguments)}function fe(){return(fe=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c,i,o,u,l,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:G.sha.current,e.next=3,z();case 3:n=e.sent,r=[],a=1;case 6:if(!(a<100)){e.next=34;break}return e.next=9,n.request("GET /gists/{gist_id}/commits",{gist_id:G.gist_id,per_page:100,page:a});case 9:if(0!==(c=e.sent.data).length){e.next=12;break}return e.abrupt("break",34);case 12:i=Object(k.a)(c),e.prev=13,i.s();case 15:if((o=i.n()).done){e.next=23;break}if(u=o.value,l=u.version,t!==l){e.next=20;break}return e.abrupt("break",23);case 20:r.push(l);case 21:e.next=15;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),i.e(e.t0);case 28:return e.prev=28,i.f(),e.finish(28);case 31:a++,e.next=6;break;case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,null,[[13,25,28,31]])})))).apply(this,arguments)}function me(e){return be.apply(this,arguments)}function be(){return(be=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return n=e.sent,e.next=5,n.request("GET /gists/{gist_id}/{sha}",{gist_id:G.gist_id,sha:t});case 5:return r=e.sent,e.abrupt("return",r.data.files);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return he.apply(this,arguments)}function he(){return(he=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c,i,o,u,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:null){e.next=5;break}return e.next=4,de();case 4:t=e.sent;case 5:for(n={},r=[],a=0;a<t.length;a++)r.push(me(t[a]));return e.next=10,Promise.all(r);case 10:c=e.sent,i=t.length;case 12:if(!(i-- >0)){e.next=24;break}o=c[i],e.t0=h.a.keys(o);case 15:if((e.t1=e.t0()).done){e.next=22;break}if("__logged_in"!==(u=e.t1.value)){e.next=19;break}return e.abrupt("continue",15);case 19:n[u]=o[u].content,e.next=15;break;case 22:e.next=12;break;case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){var t={};for(var n in e){var r=void 0;try{r=$(e[n])}catch(l){continue}var a,c=V(n),i=t,o=Object(k.a)(c.slice(0,-1));try{for(o.s();!(a=o.n()).done;){var u=a.value;i[u]=i[u]||{},i=i[u]}}catch(s){o.e(s)}finally{o.f()}i[c[c.length-1]]=r}return t}function ge(){if(window.confirm("Are you sure you want to log out? All your state will be saved locally and on GitHub, but it will no longer synchronise.")){for(var e=localStorage.length-1;e>=0;e--){var t=localStorage.key(e);t.startsWith("__GITHUB")&&delete localStorage[t]}window.location.reload()}}var Oe=n(66),ye=n(69),Ee=function(){function e(){Object(Oe.a)(this,e),this.set=[],this.inv=[]}return Object(ye.a)(e,[{key:"add",value:function(e,t){return this.set.push({type:"add",namespace:e,object:t}),this.inv.push({type:"delete",namespace:e,id:t.id}),this}},{key:"edit",value:function(e,t,n){return this.set.push({type:"edit",namespace:e,object:t}),this.inv.push({type:"edit",namespace:e,object:n}),this}},{key:"delete",value:function(e,t,n){return this.set.push({type:"delete",namespace:e,id:t}),this.inv.push({type:"add",namespace:e,object:n}),this}},{key:"param",value:function(e,t,n){return this.set.push({type:"param",namespace:e,value:t}),this.inv.push({type:"param",namespace:e,value:n}),this}},{key:"concat",value:function(e){for(var t,n,r=e.inv.length-1;r>=0;r--)for(var a=this.set.length-1;a>=0;a--)Object(j.u)(e.inv[r],this.set[a])&&(e.inv.splice(r,1),e.set.splice(r,1),this.inv.splice(a,1),this.set.splice(a,1));(t=this.set).push.apply(t,Object(m.a)(e.set)),(n=this.inv).push.apply(n,Object(m.a)(e.inv));for(var c=[],i=this.set.length-1;i>=0;i--){var o=je(this.set[i]);-1!==c.indexOf(o)?this.set.splice(i,1):c.push(o)}return this}},{key:"concatSimple",value:function(e){var t,n;return(t=this.set).push.apply(t,Object(m.a)(e.set)),(n=this.inv).push.apply(n,Object(m.a)(e.inv)),this}},{key:"editAll",value:function(e,t,n){for(var r in t)this.edit(e,t[r],n[r]);return this}},{key:"editAllByID",value:function(e,t,n,r){var a,c=Object(k.a)(n);try{for(c.s();!(a=c.n()).done;){var i=a.value;this.edit(e,t[i],r[i])}}catch(o){c.e(o)}finally{c.f()}return this}},{key:"deleteAllByID",value:function(e,t,n){var r,a=Object(k.a)(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;this.delete(e,c,n[c])}}catch(i){a.e(i)}finally{a.f()}return this}},{key:"invert",value:function(){var t=new e;return t.set=this.inv,t.inv=this.set,t}}]),e}(),je=function(e){switch(e.type){case"add":case"edit":return e.object.id;case"delete":return e.id;case"param":return e.namespace}};Ee.prototype.commit=function(){Be(this),we.editSetHistory.past.push(this),we.editSetHistory.past.length>20&&we.editSetHistory.past.shift(),we.editSetHistory.future=[]};var we={editSetHistory:{past:[],future:[]},undo:{allowed:function(){return we.editSetHistory.past.length>0},commit:function(){var e=we.editSetHistory.past.pop();we.editSetHistory.future.unshift(e),we.editSetHistory.future.length>20&&we.editSetHistory.future.pop(),Be(e.invert())}},redo:{allowed:function(){return we.editSetHistory.future.length>0},commit:function(){var e=we.editSetHistory.future.shift();we.editSetHistory.past.push(e),we.editSetHistory.past.length>20&&we.editSetHistory.past.shift(),Be(e)}}},ke="cards",xe="columns",Te="tabs",Ce="tabOrder",Se="starredZettels",_e=["tabOrder","starredZettels"],De=["cards","columns","tabs"];function Ne(){return(Ne=Object(v.a)(h.a.mark((function e(){var t,n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(r.length>0&&void 0!==r[0])||r[0],e.next=3,T(t);case 3:if(n=e.sent,!P()){e.next=11;break}return e.t0=b.a,e.t1=Object(b.a)({},n),e.next=9,Q();case 9:e.t2=e.sent,n=(0,e.t0)(e.t1,e.t2);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(v.a)(h.a.mark((function e(t){var n,r,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,e.next=3,R(t,n);case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:return e.abrupt("return",ce(t,n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re,Le=new Ee,He=null,Me=[],Be=function(e){return new Promise((function(t,n){var r=[H(e)];P()?He?(Le.concat(e),Me.push(t)):(r.push(U(e)),He=setTimeout((function(){U(Le),He=null,Le=new Ee,Me.forEach((function(e){return e()})),Me=[]}),5e3),Promise.all(r).then(t)):Promise.all(r).then(t)}))},ze=function(){return fetch("./initial-state.json").then((function(e){return e.json()})).catch((function(e){return alert("Could not load initial state. Perhaps you forgot a trailing slash in the URL? Error: "+e)}))},Ge=Object(g.b)("mirror/SET_STATE"),Pe=Object(g.b)("mirror/OVERWRITE_STATE"),Ue=Object(g.b)("kanban/TRANSFER_CARD"),Fe=Object(g.b)("kanban/REORDER_CARD"),Ze=Object(g.b)("kanban/ADD_CARD"),We=Object(g.b)("kanban/EDIT_CARD_CONTENT"),Je=Object(g.b)("kanban/EDIT_CARD"),Ve=Object(g.b)("kanban/DELETE_CARD"),Ke=Object(g.b)("kanban/ADD_COLUMN"),$e=Object(g.b)("kanban/DELETE_COLUMN"),qe=Object(g.b)("kanban/RENAME_COLUMN"),Ye=Object(g.b)("kanban/MOVE_COLUMN"),Xe=Object(g.b)("kanban/ARCHIVE_ALL_COLUMN"),Qe=Object(g.b)("kanban/SORT_COLUMN_BY_CARD_TIME_ATTRIBUTE"),et=Object(g.b)("kanban/ADD_TAB"),tt=Object(g.b)("kanban/DELETE_TAB"),nt=Object(g.b)("kanban/RENAME_TAB"),rt=Object(g.b)("kanban/MOVE_TAB"),at=Object(g.b)("zettelkasten/ADD_ZETTEL"),ct=Object(g.b)("zettelkasten/EDIT_ZETTEL"),it=Object(g.b)("zettelkasten/DELETE_ZETTEL"),ot=Object(g.b)("zettelkasten/TOGGLE_STARRED"),ut=Object(g.c)("zettelkasten/LOAD_ZETTEL",function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie("cards",t);case 2:if(r=e.sent){e.next=7;break}return e.abrupt("return",n.rejectWithValue(t));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),lt={getColumnsInTabs:function(e){return Object(j.p)(e.tabs,(function(t){return t.columns.map((function(t){return e.columns[t]})).map((function(t){return Object(b.a)(Object(b.a)({},t),{},{items:t.items.map((function(t){return e.cards[t]}))})}))}))},columns:function(e){return e.columns},tabs:function(e){return e.tabs},tabOrder:function(e){return e.tabOrder},cards:function(e){return e.cards},archivedCards:function(e){return Object.values(e.cards).filter((function(e){return-1!==Object.keys(e).indexOf("archived")}))},activeCards:function(e){return Object.values(e.cards).filter((function(e){return-1===Object.keys(e).indexOf("archived")}))},starredZettels:function(e){return e.starredZettels?e.starredZettels:[]},cardsByTab:function(e){return Object(j.p)(e.tabs,(function(t){return t.columns.flatMap((function(t){return e.columns[t].items}))}))},loadingZettel:function(e){return e.loadingZettel}},st=function(e,t){if(!e.length)return window.snackbar("Tab name cannot be empty",{variant:"warning"}),!1;var n=Object.values(t.tabs).map((function(e){return e.name.toLowerCase()}));return-1===n.indexOf(e.toLowerCase())&&-1===n.map(j.k).indexOf(Object(j.k)(e))||(window.snackbar("Tab name already exists",{variant:"warning"}),!1)},dt=Object(j.g)({loading:!0},(Re={},Object(f.a)(Re,Ge,(function(e,t){return t.payload})),Object(f.a)(Re,Pe,(function(e,t){if("{}"===JSON.stringify(t.payload))return e;var n=Object(j.v)(e);return Object(j.h)(n,t.payload),n})),Object(f.a)(Re,O.ActionTypes.UNDO,(function(e,t){return we.undo.commit(),e})),Object(f.a)(Re,O.ActionTypes.REDO,(function(e,t){return we.redo.commit(),e})),Object(f.a)(Re,Ue,(function(e,t){var n=(new Date).getTime(),r=t.payload,a=r.srcColID,c=r.dstColID,i=r.srcIndex,o=r.dstIndex;if(a===c&&i===o)return e;var u=e.columns[a].items[i],l=Object(E.a)(e,(function(e){e.columns[a].items.splice(i,1),e.cards[u].moved=n,e.columns[a].edited=n,e.columns[c].edited=n,e.columns[c].items.splice(o,0,u)}));return(new Ee).edit(ke,l.cards[u],e.cards[u]).edit(xe,l.columns[a],e.columns[a]).edit(xe,l.columns[c],e.columns[c]).commit(),l})),Object(f.a)(Re,Fe,(function(e,t){var n=t.payload,r=n.colID,a=n.srcIndex,c=n.dstIndex;if(a===c)return e;var i=(new Date).getTime(),o=e.columns[r].items[a],u=Object(E.a)(e,(function(e){e.columns[r].edited=i,e.columns[r].items.splice(a,1),e.cards[o].moved=i,e.columns[r].items.splice(c,0,o)}));return(new Ee).edit(xe,u.columns[r],e.columns[r]).edit(ke,u.cards[o],e.cards[o]).commit(),u})),Object(f.a)(Re,Ze,(function(e,t){var n=t.payload,r=n.content,a=n.colID,c=Object(j.m)(),i=(new Date).getTime(),o={id:c,content:r,type:0,created:i,edited:i,moved:i},u=Object(E.a)(e,(function(e){e.cards[c]=o,e.columns[a].items.unshift(c),e.columns[a].edited=i}));return(new Ee).add(ke,o).edit(xe,u.columns[a],e.columns[a]).commit(),u})),Object(f.a)(Re,$e,(function(e,t){var n=t.payload,r=(new Date).getTime(),a=e.tabOrder.map((function(t){return-1!==e.tabs[t].columns.indexOf(n)})).indexOf(!0),c=Object(E.a)(e,(function(e){a>=0&&(e.tabs[e.tabOrder[a]].edited=r),e.columns[n].items.forEach((function(t){return delete e.cards[t]})),Object.values(e.tabs).forEach((function(e){return Object(j.i)(e.columns,n)})),delete e.columns[n]}));return(new Ee).editAll(Te,c.tabs,e.tabs).deleteAllByID(ke,e.columns[n].items,e.cards).commit(),c})),Object(f.a)(Re,qe,(function(e,t){var n=t.payload,r=n.colID,a=n.name;if(e.columns[r].name===a)return e;var c=Object(E.a)(e,(function(e){e.columns[r].name=a,e.columns[r].edited=(new Date).getTime()}));return(new Ee).edit(xe,c.columns[r],e.columns[r]).commit(),c})),Object(f.a)(Re,We,(function(e,t){var n=t.payload,r=n.cardID,a=n.content;if(e.cards[r].content===a)return e;var c=Object(E.a)(e,(function(e){e.cards[r].content=a,e.cards[r].edited=(new Date).getTime()}));return(new Ee).edit(ke,c.cards[r],e.cards[r]).commit(),c})),Object(f.a)(Re,Ve,(function(e,t){var n=t.payload,r=(new Date).getTime(),a=[],c=Object(E.a)(e,(function(e){Object.values(e.columns).forEach((function(e){Object(j.i)(e.items,n)&&(e.edited=r,a.push(e.id))})),delete e.cards[t.payload]}));return(new Ee).delete(ke,n,e.cards[n]).editAllByID(xe,c.columns,a,e.columns).commit(),c})),Object(f.a)(Re,Ke,(function(e,t){var n=t.payload,r=n.tabID,a=n.name,c=Object(j.m)(),i=(new Date).getTime(),o={id:c,items:[],name:a,created:i,edited:i},u=Object(E.a)(e,(function(e){e.columns[c]=o,e.tabs[r].columns.push(c),e.tabs[r].edited=i}));return(new Ee).add(xe,o).edit(Te,u.tabs[r],e.tabs[r]).commit(),u})),Object(f.a)(Re,Je,(function(e,t){var n=t.payload,r=n.card,a=n.colID;if(Object(j.u)(e.cards[r.id],r))return e;var c=(new Date).getTime(),i=Object.keys(e.columns).filter((function(t){return-1!==e.columns[t].items.indexOf(r.id)}))[0],o=Object(E.a)(e,(function(e){e.cards[r.id]=JSON.parse(JSON.stringify(t.payload.card)),e.cards[r.id].edited=c,i!==a&&(Object(j.i)(e.columns[i].items,r.id),e.columns[a].items.unshift(r.id),e.columns[i].edited=e.columns[a].edited=c)}));return(new Ee).edit(ke,o.cards[r.id],e.cards[r.id]).concatSimple(function(){var t=new Ee;return i!==a&&(t.edit(xe,o.columns[i],e.columns[i]),t.edit(xe,o.columns[a],e.columns[a])),t}()).commit(),o})),Object(f.a)(Re,tt,(function(e,t){var n=t.payload,r=[],a=e.tabOrder[n],c=Object(E.a)(e,(function(e){for(var t=e.tabs[a];t.columns.length;){var c=t.columns[0];r.push.apply(r,Object(m.a)(e.columns[c].items)),e.columns[c].items.forEach((function(t){return delete e.cards[t]})),delete e.columns[c],t.columns.shift()}delete e.tabs[t.id],e.tabOrder.splice(n,1)})),i=e.tabs[a];return(new Ee).deleteAllByID(ke,r,e.cards).deleteAllByID(xe,i.columns,e.columns).delete(Te,a,i).param(Ce,c.tabOrder,e.tabOrder).commit(),c})),Object(f.a)(Re,et,(function(e,t){var n=t.payload;if(!st(n,e))return e;var r=Object(j.m)(),a={name:n,id:r,columns:[],created:(new Date).getTime()},c=Object(E.a)(e,(function(e){e.tabs[r]=a,e.tabOrder.push(r)}));return(new Ee).add(Te,a).param(Ce,c.tabOrder,e.tabOrder).commit(),c})),Object(f.a)(Re,nt,(function(e,t){var n=t.payload,r=n.tabID,a=n.name;if(e.tabs[r].name===a)return e;if(!st(a,e))return e;var c=Object(E.a)(e,(function(e){e.tabs[r].name=a,e.tabs[r].edited=(new Date).getTime()}));return(new Ee).edit(Te,c.tabs[r],e.tabs[r]).commit(),c})),Object(f.a)(Re,Ye,(function(e,t){var n=Object(s.a)(t.payload,3),r=n[0],a=n[1],c=n[2];if(r===a)return e;var i=e.tabOrder[c],o=e.tabs[i].columns[r],u=Object(E.a)(e,(function(e){e.tabs[i].columns.splice(r,1),e.tabs[i].columns.splice(a,0,o),e.tabs[i].edited=(new Date).getTime()}));return(new Ee).edit(Te,u.tabs[i],e.tabs[i]).commit(),u})),Object(f.a)(Re,rt,(function(e,t){var n=Object(s.a)(t.payload,2),r=n[0],a=n[1];if(r===a)return e;var c=e.tabOrder[r];if(a<0||a>=e.tabs.length)return e;var i=Object(E.a)(e,(function(e){e.tabOrder.splice(r,1),e.tabOrder.splice(a,0,c)}));return(new Ee).param(Ce,i.tabOrder,e.tabOrder).commit(),i})),Object(f.a)(Re,Xe,(function(e,t){var n=t.payload;if(0===e.columns[n].items.length)return e;var r=(new Date).getTime(),a=Object(E.a)(e,(function(e){e.columns[n].items.forEach((function(t){var a=e.cards[t];a.moved=a.edited=a.archived=r,a.archivedFromColID=n})),e.columns[n].items=[],e.columns[n].edited=r}));return(new Ee).editAllByID(ke,a.cards,e.columns[n].items,e.cards).edit(xe,a.columns[n],e.columns[n]).commit(),a})),Object(f.a)(Re,at,(function(e,t){var n=t.payload.zettel,r=n.id||Object(j.m)(),a=(new Date).getTime(),c=Object(b.a)({id:r,type:1,created:a,edited:a,moved:a},n),i=Object(E.a)(e,(function(e){e.cards[r]=c}));return(new Ee).add(ke,c).commit(),i})),Object(f.a)(Re,ct,(function(e,t){var n=t.payload.zettel;if(Object(j.u)(e.cards[n.id],n))return e;var r=(new Date).getTime();if(-1===Object.keys(e.cards).indexOf(n.id))return e;var a=Object(E.a)(e,(function(e){e.cards[n.id]=n,e.cards[n.id].edited=r}));return(new Ee).edit(ke,n,e.cards[n.id]).commit(),a})),Object(f.a)(Re,it,(function(e,t){var n=t.payload,r=Object(E.a)(e,(function(e){Object(j.i)(e.starredZettels,t.payload),delete e.cards[n]}));return new Ee.param(Se,r.starredZettels,e.starredZettels).delete(ke,n,e.cards[n]).commit(),r})),Object(f.a)(Re,ot,(function(e,t){var n=t.payload,r=Object(E.a)(e,(function(e){e.starredZettels||(e.starredZettels=[]),-1===e.starredZettels.indexOf(n)?e.starredZettels.push(n):Object(j.i)(e.starredZettels,n)}));return(new Ee).param(Se,r.starredZettels,e.starredZettels).commit(),r})),Object(f.a)(Re,Qe,(function(e,t){var n=t.payload,r=Object(E.a)(e,(function(e){e.columns[n].items.sort((function(t,n){var r=new Date(e.cards[n].time||null).getTime(),a=new Date(e.cards[t].time||null).getTime();return 0===a&&0===r?0:0===a?1:0===r?-1:a-r}))}));return(new Ee).edit(xe,r.columns[n],e.columns[n]).commit(),r})),Object(f.a)(Re,ut.pending,(function(e,t){return Object(E.a)(e,(function(e){return e.loadingZettel=!0}))})),Object(f.a)(Re,ut.fulfilled,(function(e,t){return Object(E.a)(e,(function(e){e.cards[t.payload.id]=t.payload,delete e.loadingZettel}))})),Object(f.a)(Re,ut.rejected,(function(e,t){return Object(E.a)(e,(function(e){return e.loadingZettel=t.payload}))})),Re)),ft=[Ge.type,ut.pending.type,ut.fulfilled.type,ut.rejected.type],mt=y()(dt,{limit:20,neverSkipReducer:!0,filter:function(e,t,n){return-1===ft.indexOf(e.type)}}),bt=n(130),pt=n(267),ht=n(281),vt=n(268),gt=n(269),Ot=n(77),yt=n.n(Ot),Et=n(167),jt=n(288),wt=function(e){var t=e.map,n=e.children,r=i.useState(null),a=Object(s.a)(r,2),c=a[0],o=a[1],u=function(){return o(null)};return i.createElement(i.Fragment,null,i.createElement(Et.a,{anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:u},Object.entries(t).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return i.createElement(jt.a,{key:n,onClick:function(){u(),r()}},n)}))),i.cloneElement(n,{onClick:function(e){return o(e.currentTarget)}}))},kt=function(e){var t=e.tabs,n=e.render,r=e.index,a=e.setIndex,c=e.addTab,o=e.renameTab,u=e.deleteTab,l=e.moveTab,s=e.toggleAddColumn,d=function(e,n){return n>=0&&n<t.length&&a(n)},f=function(){return i.createElement("div",{style:{flexGrow:1}})};return i.createElement("div",{className:"tab-bar-root"},i.createElement(pt.a,{className:"tab-bar-header",position:"static",style:{backgroundColor:"white",zIndex:2,position:"relative"}},i.createElement(ht.a,{value:r,onChange:d,indicatorColor:"primary",textColor:"primary"},t.map((function(e){return i.createElement(vt.a,{label:e,key:e})})),i.createElement(f,null),i.createElement(wt,{map:{"Add tab":function(){return c()},"Rename tab":function(){return o(r)},"Delete tab":function(){return u(r)},"Move tab left":function(){l([r,r-1]),d(0,r-1)},"Move tab right":function(){l([r,r+1]),d(0,r+1)},"Toggle add column view":function(){return s()}}},i.createElement(gt.a,null,i.createElement(yt.a,null))))),t.map((function(e,t){return r===t&&i.createElement("div",{className:"tab-bar-content",key:t},n(t))})))},xt=n(270),Tt=n(157),Ct=n.n(Tt),St=n(109),_t=n.n(St),Dt=n(285),Nt=n(276),It=n(273),At=n(277),Rt=n(274),Lt=n(224),Ht=n(284),Mt=n(289),Bt=n(283),zt=n(278),Gt=n(88),Pt=Object(g.a)({reducer:function(e,t){return t.type!==O.ActionTypes.UNDO||we.undo.allowed()?t.type!==O.ActionTypes.REDO||we.redo.allowed()?-1!==ft.indexOf(t.type)?Object(b.a)(Object(b.a)({},e),{},{present:dt(e.present,t)}):mt(e,t):(window.snackbar("Cannot redo any further",{variant:"warning"}),e):(window.snackbar("Cannot undo any further",{variant:"warning"}),e)},middleware:[Gt.a]});(function(){return Ne.apply(this,arguments)})(!0).then((function(e){Pt.dispatch(Ge(e))}));try{document.addEventListener("keyup",(function(e){-1===["input","textarea"].indexOf(document.activeElement.tagName.toLowerCase())&&(e.ctrlKey&&90===e.which&&!e.shiftKey?Pt.dispatch(O.ActionCreators.undo()):(e.ctrlKey&&e.shiftKey&&90===e.which||e.ctrlKey&&89===e.which)&&Pt.dispatch(O.ActionCreators.redo()))}))}catch(fr){}var Ut=Pt,Ft=function(e){return e.present},Zt={boards:Object(j.p)(lt,(function(e){return function(t){return e(Ft(t))}}))},Wt=n(291),Jt=n(94),Vt=i.lazy((function(){return Promise.all([n.e(5),n.e(6)]).then(n.bind(null,307))})),Kt=function(e){var t=e.cards?Object(j.r)(e.source,e.cards):e.source;return-1===t.indexOf("$$")?i.createElement(Jt.a,Object.assign({},e,{source:t})):i.createElement(i.Suspense,{fallback:i.createElement("span",null,"Loading...")},i.createElement(Vt,Object.assign({},e,{source:t})))},$t=n(265),qt=n(47),Yt=n(128),Xt=n(154),Qt=i.forwardRef((function(e,t){var n=e.value,r=e.setValue,a=e.className,c=e.offset,o=void 0===c?5:c,u=Object(qt.a)(e,["value","setValue","className","offset"]),l=i.useRef(null),s=t,d=function(){var e=l.current,t=s.current;if(e&&t){window.swap=function(){e.style.display=window.swapped?"none":"block",t.style.display=window.swapped?"block":"none",window.swapped=!window.swapped},e.innerHTML=s.current.value+'<br style="line-height: 3px;">';var n;e.style.visibility="hidden",e.style.display="block",t.style.display="none",n=e.offsetHeight,e.style.visibility="visible",e.style.display="none",t.style.display="block",t.style.height=n+o+"px"}};return window.resize=d,i.useEffect(d,[n,s]),Object(j.x)(window,"resize",d),i.createElement(i.Fragment,null,i.createElement("div",{ref:l,className:"autoresize-div "+(a||""),style:{padding:2}}),i.createElement("textarea",Object.assign({},u,{onChange:function(e){return r(e.target.value)},value:n,className:"custom-textarea autoresize "+(a||""),ref:s})))})),en=function(e){var t=e.value,n=e.setValue,r=e.addNote,a=e.className,c=Object(qt.a)(e,["value","setValue","addNote","className"]),o=i.useRef(null),u=Object(d.d)(Zt.boards.cards);return i.useEffect((function(){var e=new Xt.TextareaEditor(o.current),t={context:function(e){return e.indexOf("[[")>=0},match:/\[\[([A-Za-z0-9_ -]+)$/,search:function(e,t){return t([].concat(Object(m.a)(Object(j.t)(e,u).slice(0,9)),[0]))},cache:!0,template:function(e){return 0===e?r?"<em>Add note</em>":"":Object(j.n)(u[e])},replace:function(e){if(0===e&&r){var t=Object(j.m)();return window.setTimeout((function(){return r(t)}),0),"[[".concat(t,"]]")}return"[[".concat(e,"]]")}},n={dropdown:{rotate:!0,maxCount:10}},a=new Yt.Textcomplete(e,[t],n);return function(){a.destroy(),delete window.__addNote}}),[]),i.createElement(Qt,Object.assign({},c,{ref:o,value:t,setValue:n,className:a}))},tn=function(e){var t=e.card,n=e.setCard,r=i.useState(!1),a=Object(s.a)(r,2),c=a[0],o=a[1],u=Object(d.d)(Zt.boards.cards);if(!c&&"string"!==typeof t.description)return i.createElement(wn,{onClick:function(){return o(!0)}},"Add description");var l=function(e){c?27===e.which&&(o(!1),e.stopPropagation()):document.activeElement===e.target&&-1!==[32,13].indexOf(e.which)&&setTimeout((function(){return o(!0)}),0)};return c?i.createElement(i.Fragment,null,i.createElement(Mt.a,{className:"custom-label"},"Description"),i.createElement($t.a,{onClickAway:function(){return o(!1)}},i.createElement("div",{onKeyDown:l},i.createElement(en,{value:t.description,setValue:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{description:e.length?e:void 0}))},className:"descriptionEditor",offset:20,autoFocus:!0})))):i.createElement("div",{style:{marginTop:8,overflow:"auto"}},i.createElement(Mt.a,{className:"custom-label",onClick:function(){return o(!0)}},"Description"),i.createElement(Kt,{source:t.description,cards:u,tabIndex:"0",onKeyDown:l,className:"markdown-selectable compact",onDoubleClick:function(){return o(!0)}}))},nn=function(e){var t=e.card;if(t.description){var n=Object(j.f)(t);return i.createElement(jn,{label:null,title:n,icon:i.createElement(_t.a,null)})}return null},rn=n(155),an=n.n(rn),cn=n(27),on=n(280),un=n(164),ln=n(275),sn=n(166),dn=n(293),fn=n(110),mn=n.n(fn);dn.a.weekStart=1;var bn=function(e){var t=e.card,n=e.setCard,r=function(e){return n(Object(b.a)(Object(b.a)({},t),{},{time:e}))};return t.time?i.createElement("div",{style:{marginTop:10}},i.createElement(Mt.a,{className:"custom-label"},"Date & time"),i.createElement(cn.a,{utils:un.a,locale:dn.a},i.createElement(on.a,{value:new Date(t.time),onChange:function(e){return r(e.getTime())},showTodayButton:!0,format:"MMMM do hh:mm aaa"})),i.createElement(gt.a,{size:"small",style:{marginLeft:10},onClick:function(){return r(null)}},i.createElement(mn.a,null))):i.createElement(wn,{onClick:function(){return r(Object(ln.a)().getTime())}},"Add date & time")},pn=function(e){var t=e.card;return t.time?i.createElement(jn,{icon:i.createElement(an.a,null),label:Object(j.s)(t.time),title:Object(sn.a)(new Date(t.time),"dd/MM/yyyy hh:mmaaa"),className:Object(j.w)(new Date(t.time).getTime())}):null},hn=n(156),vn=n.n(hn),gn=function(e){var t=e.card,n=e.setCard,r=i.useState(t.duration?On(t.duration):""),a=Object(s.a)(r,2),c=a[0],o=a[1],u=i.useRef(null),l=function(e){var r=yn(e);o(e),"number"===typeof r&&n(Object(b.a)(Object(b.a)({},t),{},{duration:r}))};if(!t.duration)return i.createElement(wn,{onClick:function(){l("1h"),setTimeout((function(){try{u.current.focus()}catch(fr){}}),0)}},"Add duration");var d=function(e){return""!==e&&null!==e&&null===yn(e)};return i.createElement("div",{style:{marginTop:10}},i.createElement(Mt.a,{className:"custom-label"},"Duration"),i.createElement(Ht.a,{style:{width:201,marginTop:4},ref:u,margin:"dense",fullWidth:!0,value:c,error:d(c),helperText:d(c)?"Invalid format. Examples: 2d 1h 30m, 5m":null,onChange:function(e){return l(e.target.value)}}),i.createElement(gt.a,{size:"small",style:{marginLeft:10},onClick:function(){return n(Object(b.a)(Object(b.a)({},t),{},{duration:null}))}},i.createElement(mn.a,null)))},On=function(e){if("string"===typeof e)return e;var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),r=Math.floor(e%3600/60);return 0===t&&0===n&&0===r?"0m":((t?t+"d ":"")+(n?n+"h ":"")+(r?r+"m":"")).trim()},yn=function(e){if("number"===typeof e)return e;var t=/^(\d+d|\d*\.\d+d)?\s*(\d+h|\d*\.\d+h)?\s*(\d+m|\d*\.\d+m)?$/m.exec(e);if(!t||4!==t.length||!t.slice(1).filter((function(e){return e})).length)return null;var n=function(e){return parseFloat(e.substring(0,e.length-1))};return 86400*n((t=t.slice(1))[0]||"0d")+3600*n(t[1]||"0h")+60*n(t[2]||"0m")},En=function(e){var t=e.card;if(t.duration){var n=On(t.duration),r="Duration: ".concat(n),a=i.createElement(vn.a,null);return i.createElement(jn,{label:n,title:r,icon:a})}return null},jn=function(e){var t=e.icon,n=e.label,r=e.title,a=e.className;return i.createElement(Wt.a,{size:"small",icon:t,label:n,title:r,classes:n&&n.length?null:{label:"attribute-label"},className:"attribute-indicator "+(a||""),variant:"outlined"})},wn=function(e){return i.createElement("div",{className:"attribute-header"},i.createElement(Lt.a,Object.assign({variant:"outlined",color:"primary",size:"small"},e)))},kn=function(e){return Object(j.x)(document,"keydown",(function(t){return t.ctrlKey&&13===t.which&&e()}))},xn=function(e){var t=e.open,n=e.respond,r=e.title,a=e.subtitle,c=e.labels,o=void 0===c?["Cancel","OK"]:c;return Object(j.y)("dialog"),kn((function(){return t&&n(!0)})),i.createElement(Dt.a,{open:t,onClose:function(){return n(null)}},i.createElement(Nt.a,null,r),i.createElement(It.a,null,i.createElement(At.a,null,a)),i.createElement(Rt.a,null,i.createElement(Lt.a,{onClick:function(){return n(!1)},color:"primary"},o[0]),i.createElement(Lt.a,{onClick:function(){return n(!0)},color:"primary",variant:"contained",autoFocus:!0},o[1])))},Tn=function(e){var t=e.open,n=e.respond,r=e.title,a=e.subtitle,c=e.labels,o=void 0===c?["Cancel","OK"]:c,u=e.label,l=e.inputType,d=void 0===l?"text":l,f=e.placeholder,m=void 0===f?"":f,b=e.buttons,p=void 0===b?null:b;Object(j.y)("dialog");var h=i.useState(m),v=Object(s.a)(h,2),g=v[0],O=v[1];return kn((function(){return t&&n(g)})),i.createElement(Dt.a,{open:t,onClose:function(){return n(null)}},i.createElement(Nt.a,null,r),i.createElement(It.a,null,"string"===typeof a&&i.createElement(At.a,null,a),i.createElement(Ht.a,{autoFocus:!0,margin:"dense",fullWidth:!0,label:u,type:d,value:g,onChange:function(e){return O(e.target.value)}})),i.createElement(Rt.a,null,p,i.createElement(Lt.a,{onClick:function(){return n(!1)},color:"primary"},o[0]),i.createElement(Lt.a,{onClick:function(){return n(g)},color:"primary",variant:"contained"},o[1])))},Cn=function(e){var t=e.respond,n=e.card;Object(j.y)("dialog");var o=Object(d.c)(),u=Object(d.d)((function(e){return Object.values(Ft(e).columns).filter((function(e){return-1!==e.items.indexOf(n.id)}))[0].id})),l=i.useState(u),f=Object(s.a)(l,2),p=f[0],h=f[1],v=i.useState(n),g=Object(s.a)(v,2),O=g[0],y=g[1],E=function(e){return y(Object(b.a)(Object(b.a)({},O),{},{content:e}))},w=Object(d.d)(Zt.boards.columns),k=Object(d.d)(Zt.boards.tabs),x=function(){t(),E(n.content)},T=function(){o(Je({card:O,colID:p})),x()};return kn(T),i.createElement(Dt.a,{open:!0,onClose:function(){return x()},fullWidth:!0,maxWidth:"md",disableBackdropClick:JSON.stringify(O)!==JSON.stringify(n)},i.createElement(j.d,{shouldProtect:JSON.stringify(O)!==JSON.stringify(n)}),i.createElement(Nt.a,null,"Edit card"),i.createElement(It.a,null,i.createElement(Mt.a,{id:"kanban/card-column",className:"custom-label"},"Column"),i.createElement(Bt.a,{labelId:"kanban/card-column",value:p,onChange:function(e){return h(e.target.value)}},Object.values(k).flatMap((function(e){return[i.createElement(zt.a,{key:e.id},e.name)].concat(Object(m.a)(e.columns.map((function(e){return i.createElement(jt.a,{value:e,key:e},w[e].name)}))))}))),i.createElement(Mt.a,{id:"kanban/card-title",className:"custom-label"},"Title"),i.createElement(Ht.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:6,value:O.content,onChange:function(e){return E(e.target.value)}}),i.createElement(r.Edit,{card:O,setCard:y}),i.createElement(a.Edit,{card:O,setCard:y}),i.createElement(c.Edit,{card:O,setCard:y})),i.createElement(Rt.a,{style:{flexDirection:"row-reverse"}},i.createElement(Lt.a,{onClick:T,color:"primary",variant:"contained"},"OK"),i.createElement("div",{style:{flexGrow:1}}),i.createElement(Lt.a,{onClick:x,color:"primary"},"Cancel"),i.createElement(Lt.a,{onClick:function(){o(Je({card:O,colID:p})),o(Ve(n.id)),x()}},"Delete")))},Sn=function(e){var t=e.open,n=e.respond;return Object(j.y)("dialog"),kn((function(){return t&&n()})),i.createElement(Dt.a,{open:t,onClose:n,fullWidth:!0},i.createElement(Nt.a,null,"About Mirror"),i.createElement(It.a,null,i.createElement(At.a,null,"A free and open source personal task management and note taking app.",i.createElement("br",null),"Made by Oliver Balfour. \xa9 2020-2021.",i.createElement("br",null),"App icon is ",i.createElement("a",{href:"https://thenounproject.com/term/mirror/340140/"},"Mirror"),"\xa0 by Lastspark from ",i.createElement("a",{href:"http://thenounproject.com/"},"The Noun Project"),".")),i.createElement(Rt.a,null,i.createElement(Lt.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},_n=function(e){var t=e.open,n=e.respond;Object(j.y)("dialog");var r=i.useState(""),a=Object(s.a)(r,2),c=a[0],o=a[1],u=i.useState(""),l=Object(s.a)(u,2),d=l[0],f=l[1],m=i.useState(""),b=Object(s.a)(m,2),p=b[0],h=b[1],v=function(){return n(c,d,p)};return kn((function(){return t&&v()})),i.createElement(Dt.a,{open:t,onClose:n,fullWidth:!0},i.createElement(Nt.a,null,"Log in via GitHub"),i.createElement(It.a,null,i.createElement(At.a,null,i.createElement(Jt.a,{source:'To log in via GitHub for synchronisation,\n            [create a new token](https://github.com/settings/tokens/new) with\n            the `gist` permission and save it somewhere safe. Then, go to\n            [gist.github.com](https://gist.github.com) and create a new Gist\n            with any title and add one file, `main.md`, with any contents.\n            Then click "Create secret gist" and copy the gist ID from the URL.\n            Enter your token, gist ID and username below.'})),i.createElement(Mt.a,{className:"custom-label"},"GitHub Username"),i.createElement(Ht.a,{margin:"dense",fullWidth:!0,value:p,onChange:function(e){return h(e.target.value)},autoComplete:"username"}),i.createElement(Mt.a,{className:"custom-label"},"Gist ID"),i.createElement(Ht.a,{margin:"dense",fullWidth:!0,value:d,onChange:function(e){return f(e.target.value)},autoComplete:"off"}),i.createElement(Mt.a,{className:"custom-label"},"GitHub access token"),i.createElement(Ht.a,{margin:"dense",autoFocus:!0,fullWidth:!0,value:c,onChange:function(e){return o(e.target.value)},type:"password",autoComplete:"current-password"})),i.createElement(Rt.a,null,i.createElement(Lt.a,{onClick:function(){return n(!1)},color:"primary"},"Cancel"),i.createElement(Lt.a,{onClick:function(){return v()},color:"primary",variant:"contained"},"Log in")))},Dn=function(e){var t=e.active,n=e.setActive,r=o.a.useState(!1),a=Object(s.a)(r,2),c=a[0],i=a[1],u=o.a.useState(!1),l=Object(s.a)(u,2),f=l[0],m=l[1],p=Object(d.c)(),h=Object(b.a)(Object(b.a)({"Submit feedback":function(){return window.open("mailto:".concat("leolalor1+mirrorsupport@googlemail.com"),"_blank")},About:function(){return i(!0)}},P()?{"Log out of GitHub":ge,"Force push to GitHub":Y,"Force pull from GitHub":X}:{"Log in via GitHub":function(){return m(!0)}}),{},{"Clear saved state":function(){return"YES"===window.prompt("Delete all saved state? Pressing undo will fix this. Type YES to confirm","NO")&&window.deleteAllState()},"Import state":function(){return window.importIDBState()},"Export state":function(){return window.exportIDBState()},"Toggle light/dark theme":function(){return"dark"===localStorage.theme?window.setTheme("light"):window.setTheme("dark")}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(pt.a,{color:"primary",className:"menubar"},o.a.createElement(xt.a,{style:{minHeight:0}},o.a.createElement(ht.a,{value:t,onChange:function(e,t){return n(t)},TabIndicatorProps:{style:{backgroundColor:"white"}}},o.a.createElement(vt.a,{label:o.a.createElement("div",null,o.a.createElement(Ct.a,{style:{verticalAlign:"middle"}})," Boards")}),o.a.createElement(vt.a,{label:o.a.createElement("div",null,o.a.createElement(_t.a,{style:{verticalAlign:"middle"}})," Notes")})),o.a.createElement("div",{style:{flexGrow:1}}),o.a.createElement(Ln,null),o.a.createElement(wt,{map:h},o.a.createElement(gt.a,{edge:"end",color:"inherit"},o.a.createElement(yt.a,null))))),c&&o.a.createElement(Sn,{open:!0,respond:function(){return i(!1)}}),f&&o.a.createElement(_n,{open:!0,respond:function(e,t,n){m(!1),!1!==e&&(G.token=e,G.gist_id=t,G.username=n,function(){return q.apply(this,arguments)}().then((function(e){return p(Pe(e))})))}}))},Nn=n(158),In=n.n(Nn),An=n(159),Rn=n.n(An),Ln=function(){var e=Object(d.c)();return i.createElement(i.Fragment,null,i.createElement(gt.a,{onClick:function(){return e(O.ActionCreators.undo())},color:"inherit",edge:"end"},i.createElement(In.a,null)),i.createElement(gt.a,{onClick:function(){return e(O.ActionCreators.redo())},color:"inherit",edge:"end"},i.createElement(Rn.a,null)))},Hn=function(e){return o.a.createElement("div",{className:"loading-screen-container"},o.a.createElement("span",{className:"loading-screen-contents"},"Loading..."))},Mn=n(64),Bn=n(279),zn=n(78),Gn=n.n(zn),Pn=n(111),Un=n.n(Pn),Fn=function(e){var t=e.col,n=e.add,r=Object(d.c)(),a=i.useState(!1),c=Object(s.a)(a,2),o=c[0],u=c[1],l=i.useState(!1),f=Object(s.a)(l,2),m=f[0],p=f[1],h=t.items.filter((function(e){return-1!==["string","number"].indexOf(typeof e.time)})).length>0;return i.createElement("div",null,i.createElement("div",{className:"columnHeaderContainer"},i.createElement("div",{className:"columnHeaderText"},t.name),i.createElement("div",null,i.createElement(gt.a,{size:"small",onClick:function(){return n()}},i.createElement(Gn.a,null)),i.createElement(wt,{map:Object(b.a)(Object(b.a)({"Archive all":function(){return r(Xe(t.id))}},h?{"Sort by due":function(){return r(Qe(t.id))}}:{}),{},{Rename:function(){return p(!0)},Delete:function(){return u(!0)}})},i.createElement(gt.a,{size:"small"},i.createElement(yt.a,null))))),i.createElement("hr",{className:"columnHeaderRule"}),o&&i.createElement(xn,{open:!0,respond:function(e){u(!1),e&&r($e(t.id))},title:"Delete this column?",subtitle:"Don't worry, this action can be undone."}),m&&i.createElement(Tn,{open:!0,respond:function(e){p(!1),"string"===typeof e&&e.length&&r(qe({colID:t.id,name:e}))},title:'Rename column "'.concat(t.name,'"'),subtitle:"Don't worry, this action can be undone.",label:"Name",placeholder:t.name}))},Zn=i.memo((function(e){var t=e.card,n=e.index,o=e.setEditingCard,u=Object(d.d)(Zt.boards.cards);if(!t)return null;var l=t.id,s=t.content;return i.createElement(i.Fragment,null,i.createElement(Mn.b,{draggableId:l,index:n},(function(e,n){return i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"card "+(n.isDragging?" draggingCard":""),style:e.draggableProps.style,onClick:function(){return o(l)}}),i.createElement(Kt,{source:s,cards:u,className:"compact"}),i.createElement(r.Indicator,{card:t}),i.createElement(a.Indicator,{card:t}),i.createElement(c.Indicator,{card:t}))})))})),Wn=i.memo((function(e){var t=e.col,n=e.index,r=e.setEditingCard,a=t.id,c=t.items,o=i.useState(!1),u=Object(s.a)(o,2),l=u[0],f=u[1],m=i.useState(""),b=Object(s.a)(m,2),p=b[0],h=b[1],v=Object(d.c)(),g=function(){p.length&&v(Ze({content:p,colID:a})),h(""),f(!1)},O=function(){l?h(""):y.current.scrollTop=0,f(!l)},y=i.useRef(null),E=i.createElement(Mn.c,{droppableId:a,className:"card-droppable",type:"card",ignoreContainerClipping:!0},(function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:"column-internals"+(t.isDraggingOver?" dragging-over":""),ref:Object(j.o)(e.innerRef,y)},l&&i.createElement(Jn,{value:p,setValue:h,add:g,cancel:function(){h(""),f(!1)}}),c.map((function(e,t){return e?i.createElement(Zn,{card:e,index:t,key:e.id,setEditingCard:r}):null}))),e.placeholder)}));return i.createElement(Mn.b,{draggableId:a,index:n},(function(e,n){return i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:"columnContainer"+(n.isDragging?" draggingColumn":""),style:e.draggableProps.style}),i.createElement("div",{className:"column"},i.createElement("div",e.dragHandleProps,i.createElement(Fn,{col:t,add:O})),i.createElement("div",{className:"column-internals-container"},E)))}))})),Jn=function(e){var t=e.value,n=e.setValue,r=e.add,a=e.cancel;return Object(j.x)(document,"keydown",(function(e){27===e.which?a():e.ctrlKey&&13===e.which&&!Object(j.l)("dialog")&&r()})),i.createElement($t.a,{onClickAway:function(){return!t.length&&a()}},i.createElement("div",{className:"new-card-sheet"},i.createElement(Ht.a,{label:"New card",multiline:!0,autoFocus:!0,rowsMax:6,value:t,onChange:function(e){return n(e.target.value)},variant:"filled",style:{width:"100%"}}),i.createElement(Bn.a,{variant:"contained",size:"small",className:"editingCardButtons"},i.createElement(Lt.a,{style:{flexGrow:1},variant:"contained",onClick:r},"Done"),i.createElement(Lt.a,{onClick:a},i.createElement(Un.a,{style:{color:"#555"}})))))},Vn=function(e){var t=e.add,n=e.hide;return i.createElement("div",{className:"addColumnContainer columnContainer "+(n?" hidden":"")},i.createElement("div",{className:"addColumn column"},i.createElement(gt.a,{onClick:t,variant:"outlined"},i.createElement(Gn.a,null))))},Kn=(n(219),function(e){var t=e.tabInfo,n=e.addColumn,r=t.index,a=t.tab,c=Object(d.c)(),o=Object(d.d)(Zt.boards.tabOrder),u=Object(d.d)(Zt.boards.getColumnsInTabs)[o[r]],l=Object(d.d)(Zt.boards.tabs),f=Object(d.d)(Zt.boards.cards),m=l[o[r]].columns,b=i.useState(!1),p=Object(s.a)(b,2),h=p[0],v=p[1],g=Object(j.z)(),O=Object(s.a)(g,2),y=O[0],E=O[1],w="edit"===y.split("/")[4]?y.split("/")[3]:null,k=Object(d.d)(Zt.boards.cardsByTab),x=function(e){return E(e?"/boards/".concat(Object(j.k)(l[function(e){return Object.keys(k).filter((function(t){return-1!==k[t].indexOf(e)}))}(e)].name),"/").concat(e,"/edit"):"/boards/".concat(y.split("/")[2]))};return i.createElement("div",{className:"boardview-root"},i.createElement(Mn.a,{onDragEnd:function(e){e.destination&&("card"===e.type?c(function(e){var t=Object(s.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return n===r?Fe({colID:n,srcIndex:a,dstIndex:c}):Ue({srcColID:n,dstColID:r,srcIndex:a,dstIndex:c})}([e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index])):"column"===e.type&&c(Ye([e.source.index,e.destination.index,r])))}},i.createElement(Mn.c,{droppableId:"default",className:"column-droppable",direction:"horizontal",type:"column"},(function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:"root",ref:e.innerRef},m.map((function(e,t){return i.createElement(Wn,{col:u[t],key:e,index:t,setEditingCard:x})})),(n||!m.length)&&i.createElement(Vn,{add:function(){return v(!0)},hide:t.isDraggingOver||t.draggingFromThisWith})),e.placeholder)}))),h&&i.createElement(Tn,{open:!0,respond:function(e){v(!1),"string"===typeof e&&e.length&&c(Ke({tabID:a.id,name:e}))},title:"Add column",label:"Name"}),w&&Object.prototype.hasOwnProperty.call(f,w)&&i.createElement(Cn,{respond:function(){return x(null)},card:f[w]}))}),$n=function(e){var t=e.active,n=Object(d.c)(),r=Object(j.z)(),a=Object(s.a)(r,2),c=a[0],o=a[1],u=Object(d.d)(Zt.boards.tabs),l=Object(d.d)(Zt.boards.tabOrder),f=l.map((function(e){return Object(j.k)(u[e].name)===c.split("/")[2]})).indexOf(!0),m=function(e){return o("/boards/"+Object(j.k)(u[l[e]].name))};Object(j.B)((function(){return t&&f>=0&&u[l[f]].name+" | Mirror"})),f>=0&&(window.__lastCurrentTab=f),f<0&&(f=window.__lastCurrentTab||0);var b=i.useState(!localStorage.noAddColumn),p=Object(s.a)(b,2),h=p[0],v=p[1],g=i.useState(!1),O=Object(s.a)(g,2),y=O[0],E=O[1],w=i.useState(!1),k=Object(s.a)(w,2),x=k[0],T=k[1],C=i.useState(!1),S=Object(s.a)(C,2),_=S[0],D=S[1],N=u[l[f]].name;return i.createElement(i.Fragment,null,i.createElement(kt,{tabs:l.map((function(e){return u[e].name})),render:function(e){return i.createElement(Kn,{key:e,tabInfo:{tab:u[l[e]],index:e},addColumn:h})},addTab:function(){return T(!0)},renameTab:function(){return D(!0)},deleteTab:function(){return Object.values(u).length>1?E(!0):alert("Cannot delete only tab")},moveTab:function(e){return n(rt(e))},index:f,setIndex:m,toggleAddColumn:function(){return e=!h,localStorage.noAddColumn=!e,void v(e);var e}}),y&&i.createElement(xn,{open:!0,respond:function(e){E(!1),e&&(n(tt(f)),m(Math.max(0,f-1)))},title:"Delete this tab?",subtitle:"Don't worry, this action can be undone."}),x&&i.createElement(Tn,{open:!0,respond:function(e){T(!1),"string"===typeof e&&e.length&&n(et(e))},title:"Add tab",label:"Name"}),_&&i.createElement(Tn,{open:!0,respond:function(e){D(!1),"string"===typeof e&&e.length&&n(nt({tabID:l[f],name:e})),o("/boards/"+Object(j.k)(e))},title:"Rename tab ".concat(N),label:"Name",placeholder:N}))},qn=n(160),Yn=n.n(qn),Xn=n(161),Qn=n.n(Xn),er=n(163),tr=n.n(er),nr=n(162),rr=n.n(nr),ar=(n(220),function(e){var t=e.active,n=Object(j.z)(),r=Object(s.a)(n,1)[0],a=Object(d.c)(),c=Object(d.d)(Zt.boards.cards),o=Object(d.d)(Zt.boards.loadingZettel),u=r.split("/")[2]||"main";return Object.prototype.hasOwnProperty.call(c,u)?!0===o?i.createElement(cr,null):o===u?i.createElement(ir,{id:u}):i.createElement(or,{active:t,dispatch:a,cards:c,currentCardID:u}):(a(ut(u)),i.createElement(cr,null))});function cr(){return i.createElement("span",null,"Loading Zettel...")}function ir(){return i.createElement("span",null,"Failed to load Zettel. Either synchronisation failed or it does not exist.")}function or(e){var t=e.active,n=e.dispatch,r=e.cards,a=e.currentCardID,c=Object(j.z)(),o=Object(s.a)(c,2),u=o[0],l=o[1],f="edit"===u.split("/")[3],m=Object(d.d)(Zt.boards.starredZettels),p=r[a],h=i.useState(Object(b.a)({},p)),v=Object(s.a)(h,2),g=v[0],O=v[1];Object(j.B)((function(){return t&&g.content+" | Mirror"}));var y=function(e){return O(Object(b.a)(Object(b.a)({},g),e))};if(Object(j.x)(document,"keydown",(function(e){f&&13===e.which&&e.ctrlKey&&k(g)})),"object"!==typeof p)return null;var E=function(e){return l(e?"/notes/".concat(a,"/edit"):"/notes/".concat(a))},w=function(){n(Ve(a)),l("/notes/main")},k=function(e){n(ct({zettel:e})),E(!1)},x=function(){return n(ot(a))};p.id!==g.id&&(n(ct({zettel:g})),O(Object(b.a)({},p)));var T=function(e){n(at({zettel:{content:"New note",description:"...",id:e}})),l("/notes/".concat(e,"/edit"))},C=function(){return i.createElement(Bn.a,{variant:"contained",color:"primary"},!f&&i.createElement(Lt.a,{onClick:function(){return E(!0)},title:"Edit note"},i.createElement(Yn.a,null)),!f&&i.createElement(Lt.a,{onClick:function(){return T(Object(j.m)())},title:"Add note"},i.createElement(Gn.a,null)),i.createElement(Lt.a,{onClick:function(){return alert("TODO")},title:"Search notes"},i.createElement(Qn.a,null)),-1===m.indexOf(p.id)?i.createElement(Lt.a,{onClick:x,title:"Star this note"},i.createElement(rr.a,null)):i.createElement(Lt.a,{onClick:x,title:"Unstar this note"},i.createElement(tr.a,null)),"main"!==p.id&&i.createElement(Lt.a,{onClick:w,title:"Delete note"},i.createElement(Un.a,null)))};return i.createElement(i.Fragment,null,i.createElement(j.d,{shouldProtect:JSON.stringify(g)!==JSON.stringify(p)}),i.createElement("div",{className:"zettelContainer"},i.createElement("div",{className:"zettelButtons",id:"zettel-buttons-container"},i.createElement(C,null)),i.createElement("div",{className:"zettelColumns"},f&&i.createElement("div",{className:"zettel"+(f?" editing-pane":"")},i.createElement(Ht.a,{margin:"dense",autoFocus:!0,fullWidth:!0,className:"zettelEditingTitle",multiline:!0,rowsMax:3,value:g.content||"",onChange:function(e){return y({content:e.target.value})}}),i.createElement("div",{className:"zettelEditingContent"},i.createElement(en,{value:g.description||"",setValue:function(e){return y({description:e})},addNote:function(e){n(ct({zettel:g})),T(e)},className:"zettelEditingInput"})),i.createElement("div",{className:"zettelEditingButtons"},i.createElement(Lt.a,{onClick:function(){return k(g)},color:"primary",variant:"contained"},"Save"),i.createElement(Lt.a,{onClick:function(){E(!1),O(Object(b.a)({},p))},color:"primary"},"Cancel"))),i.createElement("div",{className:"zettel"+(f?" currently-editing":"")},i.createElement("div",{className:"zettelTitle"},(f?g.content:p.content)||""),i.createElement(Kt,{source:(f?g.description:p.description)||"",cards:r})))))}var ur=["boards","notes"],lr=function(e){var t=e.active;e.setActive;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.b,{show:0===t,className:"app-section"},o.a.createElement($n,{active:0===t})),o.a.createElement(j.b,{show:1===t,className:"app-section"},o.a.createElement(ar,{active:1===t})))},sr=function(){var e=Object(d.c)();Object(j.A)((function(){P()&&Q().then((function(t){return e(Pe(t))}))}),15e3);var t=Object(j.z)(),n=Object(s.a)(t,2),r=n[0],a=n[1],c=o.a.useState([]),i=Object(s.a)(c,2),u=i[0],l=i[1],f=o.a.useState(!0),m=Object(s.a)(f,2),b=m[0],p=m[1],h=Object(bt.b)().enqueueSnackbar;window.snackbar=h;var v=Object(d.d)((function(e){return void 0===e.present||Ft(e).loading}));if(b&&!v&&(l(["/boards/","/notes/main"]),p(!1)),v)return o.a.createElement(Hn,null);var g=function(e,t,n){var r=u.slice(0);r[t]=e,l(r),n&&a(e)},O=function(e){return Math.max(ur.indexOf((n=0,(t=e).split("/").filter((function(e){return e.length}))[n<0?t.length+n:n])),0);var t,n}(r),y=function(e){e===O?g(["/boards/","/notes/main"][O],O,!0):(g(r,O),a(u[e]))};return o.a.createElement("div",{id:"jsx-root"},o.a.createElement(lr,{active:O,setActive:y}),o.a.createElement(Dn,{active:O,setActive:y}))},dr=function(){return o.a.createElement(j.e,{id:"theme-root"},"  ",o.a.createElement(d.a,{store:Ut},o.a.createElement(bt.a,{maxSnack:3,autoHideDuration:3e3,classes:{containerRoot:"snackbar-root"}},o.a.createElement(sr,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(221);l.a.render(o.a.createElement(dr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){"use strict";n.d(t,"n",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"r",(function(){return i})),n.d(t,"q",(function(){return u})),n.d(t,"k",(function(){return l})),n.d(t,"o",(function(){return E})),n.d(t,"z",(function(){return w})),n.d(t,"B",(function(){return x})),n.d(t,"A",(function(){return T})),n.d(t,"x",(function(){return C})),n.d(t,"l",(function(){return S})),n.d(t,"y",(function(){return _})),n.d(t,"d",(function(){return D})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return I})),n.d(t,"a",(function(){return A})),n.d(t,"e",(function(){return R})),n.d(t,"m",(function(){return G})),n.d(t,"s",(function(){return P})),n.d(t,"w",(function(){return U})),n.d(t,"p",(function(){return F})),n.d(t,"u",(function(){return Z})),n.d(t,"i",(function(){return W})),n.d(t,"v",(function(){return J})),n.d(t,"h",(function(){return K})),n.d(t,"j",(function(){return $})),n.d(t,"t",(function(){return q})),n.d(t,"g",(function(){return Y}));var r=n(25),a=function(e){if(!e)return"unknown";var t=e.content.split("\n")[0];return t.length>40?t.substring(0,37)+"...":t},c=function(e){if(!e)return"";var t=e?"string"===typeof e?e:e.description||e.content:"unknown";return t.split("\n\n").join("\n").substring(0,500)+(t.length>500?"...":"")},i=function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#/notes/",c=/(\[\[[A-Za-z0-9_-]+\]\])/gm;null!==(n=c.exec(e));){n.index===c.lastIndex&&c.lastIndex++;var i=(e.substring(0,n.index).match(/`/gm)||[]).length%2===0;if(i){var o=n[1].substring(2,n[1].length-2),u=e.substring(0,n.index),l=a(t[o]),s=r+o,d=e.substring(n.index+n[1].length,e.length);e=u+"[".concat(l,"](").concat(s,")")+d}}return e},o=function(e,t){return((e||"").match(t)||[]).length},u=function(e,t){if(-1===e.indexOf("$$"))return e;var n=/<p>\$\$([^\n]+)\$\$<\/p>/m,r=/\$\$([^\n]+)\$\$/m,a=function(e,n){return t.renderToString(e,{throwOnError:!1,displayMode:n})},c=function(e,t){for(var c=0,i=t?n:r,u=e.match(i),l=0;l<100&&c<e.length&&u;l++){o(e.substring(0,c+u.index),/<(code|pre)[^>]*>/g)===o(e.substring(0,c+u.index),/<\/(code|pre)>/g)&&(e=e.substring(0,u.index+c)+a(u[1],t)+e.substring(u.index+c+u[0].length,e.length)),c+=u.index+u[0].length,u=e.substring(c,e.length).match(i)}return e};return c(c(e,!0),!1)},l=function(e){return encodeURIComponent(e.toLowerCase().replace(/ /g,"-"))},s=n(66),d=n(69),f=n(118),m=n(119),b=n(47),p=n(12),h=n(0),v=n(149),g=n.n(v),O=n(165),y=n(259),E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.filter(Boolean);return a.length?0===a.length?a[0]:function(e){var t,n=Object(r.a)(a);try{for(n.s();!(t=n.n()).done;){var c=t.value;"function"===typeof c?c(e):c&&(c.current=e)}}catch(i){n.e(i)}finally{n.f()}}:null},j=function(){return window.location.hash.replace("#","")||"/"},w=function(){var e=h.useState(j()),t=Object(p.a)(e,2),n=t[0],r=t[1];h.useEffect((function(){var e=function(){return r(j())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]);var a=h.useCallback((function(e){return window.location.hash=e}),[]);return[n,a,a]},k=0,x=function(e){if("function"===typeof e){var t=e();t&&(document.title=t)}h.useEffect((function(){var t=document.title;return k++,"string"===typeof e&&(document.title=e),function(){return!k--&&(document.title=t)}}))},T=function(e,t){h.useEffect((function(){var n=setInterval(e,t);return function(){return clearInterval(n)}}),[e,t])},C=function(e,t,n){h.useEffect((function(){return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}}))},S=function(e){return window["__flag_"+e]},_=function(e){h.useEffect((function(){var t="__flag_"+e;return window[t]=!0,function(){return window[t]=!1}}))},D=function(e){var t=e.shouldProtect,n=void 0===t||t;return h.useEffect((function(){return n&&(window.onbeforeunload=function(e){return"Are you sure you want to quit?"}),function(){return window.onbeforeunload=null}})),null},N=function(e){var t=e.children,n=e.show,r=Object(b.a)(e,["children","show"]);return h.createElement("div",Object.assign({style:n?{}:{display:"none"}},r),t)},I=function(e){var t=e.source,n=e.purify,r=void 0===n||n,a=Object(b.a)(e,["source","purify"]);return h.createElement("span",Object.assign({dangerouslySetInnerHTML:{__html:r?g.a.sanitize(t,{ADD_ATTR:["target"]}):t}},a))},A=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1,error:null},e}return Object(d.a)(n,[{key:"render",value:function(){return this.state.hasError?this.props.fallback:this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(h.Component);var R=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={theme:localStorage.theme||"light"},r.themes={dark:Object(O.a)({palette:{type:"dark",primary:{main:"#90caf9"},secondary:{main:"#f48fb1"},error:{main:"#f44336"},warning:{main:"#ff9800"},info:{main:"#2196f3"},success:{main:"#4caf50"}}}),light:Object(O.a)({palette:{type:"light"}})},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.setTheme=function(t){return e.setState({theme:t},(function(){return localStorage.theme=t}))}}},{key:"render",value:function(){return document.documentElement.className="theme-"+this.state.theme,h.createElement(y.a,{theme:this.themes[this.state.theme]},this.props.children)}}]),n}(h.Component),L=n(166),H=n(260),M=n(261),B=n(262),z=null,G=function(){var e,t=(e=new Date,L.a(e,"yyyyMMdd-hhmmss")),n=t;return null!==z&&z.substring(0,t.length)===n&&(z.length===t.length?n+="-1":n+="-"+(parseInt(z.substring(t.length+1,z.length))+1)),z=n,n},P=function(e){var t=new Date(e),n=new Date,r=function(e){return 0===e.getHours()&&0===e.getMinutes()?null:0===e.getMinutes()?L.a(e,"haaa"):L.a(e,"h:mmaaa")}(t);return function(e){var t=H.a(e,n),r=M.a(e,n,{weekStartsOn:1}),a=B.a(e,n),c=n.getDay()-1;if(c<0&&(c+=7),0===t)return"Today";if(-1===t)return"Yesterday";if(1===t)return"Tomorrow";var i=L.a(e,"EEE");return 0===r&&t>=0||c>=5&&t>=0&&c+t-7<5?i:t>=-7&&t<0?"Last ".concat(i):t>0&&t<=7?"Next ".concat(i):t>7&&t<=14?"".concat(i," Week"):0===a?L.a(e,"EEE do MMM"):L.a(e,"EEE do MMM yyyy")}(t)+(r?" "+r:"")},U=function(e){var t=(e-(new Date).getTime())/1e3;return t<0?"urgency-overdue":t<7200?"urgency-two-hours":t<86400?"urgency-day":t<604800?"urgency-week":t<1209600?"urgency-fortnight":null},F=function(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=t(e[r]),n}),{})},Z=function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))},W=function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),-1!==n},J=function(e){var t=window.history.state;window.history.replaceState(e,window.title);var n=window.history.state;return window.history.replaceState(t,window.title),n},V=function(e){return e&&"object"===typeof e&&!Array.isArray(e)};function K(e,t){if(V(e)&&V(t))for(var n in t)V(t[n])&&V(e[n])?K(e[n],t[n]):e[n]=t[n];return e}var $=function(e,t,n){n||(n="application/octet-stream");var r=document.createElement("a"),a=new Blob([e],{type:n});r.href=window.URL.createObjectURL(a),r.download=t,r.click()},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object.keys(t);a||(c=c.filter((function(e){return!t[e].archived})));var i,o=[],u=e.toLowerCase(),l=Object(r.a)(c);try{for(l.s();!(i=l.n()).done;){var s=i.value;if(t[s].content.toLowerCase().includes(u)&&(o.push(s),o.length===n))return o}}catch(v){l.e(v)}finally{l.f()}var d,f=Object(r.a)(c);try{for(f.s();!(d=f.n()).done;){var m=d.value;if(t[m].description&&t[m].description.toLowerCase().includes(u)&&(o.push(m),o.length===n))return o}}catch(v){f.e(v)}finally{f.f()}var b,p=Object(r.a)(c);try{for(p.s();!(b=p.n()).done;){var h=b.value;if(h.toLowerCase().includes(u)&&(o.push(h),o.length===n))return o}}catch(v){p.e(v)}finally{p.f()}return o};function Y(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;if(Object.prototype.hasOwnProperty.call(t,r.type)){var a=t[r.type](n,r);return a||console.error("Invalid state produced by createReducer for ".concat(r.type,": ").concat(a)),a}}}},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(47),a=n(0),c=n(108),i=n.n(c),o=n(8),u=a.lazy((function(){return n.e(4).then(n.bind(null,226))})),l={link:function(e,t,n){var r=i.a.Renderer.prototype.link.call(this,e,t,n);return e.startsWith("http")?r.replace("<a","<a rel='noopener' target='_blank'"):r}};i.a.use({renderer:l});var s=function(e){var t=e.source,n=e.postprocess,c=void 0===n?function(e){return e}:n,l=Object(r.a)(e,["source","postprocess"]);try{var s=a.memo((function(){return a.createElement(o.c,Object.assign({source:c(i()(t,{gfm:!0}))},l,{className:"markdown "+(l.className?l.className:"")}))}));return null!==t.match(/```\w+/m)?a.createElement(o.a,{fallback:a.createElement(s,null)},a.createElement(a.Suspense,{fallback:a.createElement("span",null,"Loading...")},a.createElement(u,Object.assign({source:t,postprocess:c},l)))):a.createElement(s,null)}catch(d){return a.createElement("span",null,"Sorry, an error occurred.",a.createElement("br",null),"Try editing the note to ensure any LaTeX math equations and the Markdown syntax are valid.",a.createElement("br",null),"Error: ",d.toString())}}}},[[188,1,2]]]);
//# sourceMappingURL=main.ddc5d04c.chunk.js.map