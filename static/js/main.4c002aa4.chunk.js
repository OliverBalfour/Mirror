(this.webpackJsonpmirror=this.webpackJsonpmirror||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"l",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return b})),n.d(t,"q",(function(){return p})),n.d(t,"r",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return O})),n.d(t,"m",(function(){return D})),n.d(t,"f",(function(){return T})),n.d(t,"p",(function(){return I})),n.d(t,"n",(function(){return L})),n.d(t,"h",(function(){return A})),n.d(t,"j",(function(){return R})),n.d(t,"e",(function(){return z})),n.d(t,"o",(function(){return _}));var a=function(e){if(!e)return"unknown";var t=e.content.split("\n")[0];return t.length>40?t.substring(0,37)+"...":t},r=function(e){if(!e)return"";var t=e?"string"===typeof e?e:e.description||e.content:"unknown";return t.split("\n\n").join("\n").substring(0,500)+(t.length>500?"...":"")},o=function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#/notes/",o=/(\[\[[A-Za-z0-9_-]+\]\])/gm;null!==(n=o.exec(e));){n.index===o.lastIndex&&o.lastIndex++;var i=(e.substring(0,n.index).match(/`/gm)||[]).length%2===0;if(i){var c=n[1].substring(2,n[1].length-2),l=e.substring(0,n.index),u=a(t[c]),s=r+c,d=e.substring(n.index+n[1].length,e.length);e=l+"[".concat(u,"](").concat(s,")")+d}}return e},i=function(e,t){return((e||"").match(t)||[]).length},c=function(e,t){if(console.log(e),-1===e.indexOf("$$"))return e;var n=/<p>\$\$([^\n]+)\$\$<\/p>/m,a=/\$\$([^\n]+)\$\$/m,r=function(e,n){return t.renderToString(e,{throwOnError:!1,displayMode:n})},o=function(e,t){for(var o=0,c=t?n:a,l=e.match(c),u=0;u<100&&o<e.length&&l;u++){i(e.substring(0,o+l.index),/<(code|pre)[^>]*>/g)===i(e.substring(0,o+l.index),/<\/(code|pre)>/g)&&(e=e.substring(0,l.index+o)+r(l[1],t)+e.substring(l.index+o+l[0].length,e.length)),o+=l.index+l[0].length,l=e.substring(o,e.length).match(c)}return e};return o(o(e,!0),!1)},l=n(108),u=n(11),s=n(124),d=n(0),m=n(125),f=n.n(m),b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.filter(Boolean);return a.length?0===a.length?a[0]:function(e){var t,n=Object(s.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"===typeof r?r(e):r&&(r.current=e)}}catch(o){n.e(o)}finally{n.f()}}:null},h=function(){return window.location.hash.replace("#","")||"/"},p=function(){var e=d.useState(h()),t=Object(u.a)(e,2),n=t[0],a=t[1];d.useEffect((function(){var e=function(){return a(h())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]);var r=d.useCallback((function(e){return window.location.hash=e}),[]);return[n,r,r]},g=0,v=function(e){if("function"===typeof e){var t=e();t&&(document.title=t)}d.useEffect((function(){var t=document.title;return g++,"string"===typeof e&&(document.title=e),function(){return!g--&&(document.title=t)}}))},y=function(e){var t=e.shouldProtect,n=void 0===t||t;return d.useEffect((function(){return n&&(window.onbeforeunload=function(e){return"Are you sure you want to quit?"}),function(){return window.onbeforeunload=null}})),null},E=function(e){var t=e.children,n=e.show;return d.createElement("div",{style:n?{}:{display:"none"}},t)},O=function(e){var t=e.source,n=e.purify,a=void 0===n||n,r=Object(l.a)(e,["source","purify"]);return d.createElement("span",Object.assign({dangerouslySetInnerHTML:{__html:a?f.a.sanitize(t):t}},r))},w=n(141),j=n(229),k=n(230),C=n(231),x=null,T=function(){var e,t=(e=new Date,w.a(e,"yyyyMMdd-hhmmss")),n=t;return null!==x&&x.substring(0,t.length)===n&&(x.length===t.length?n+="-1":n+="-"+(parseInt(x.substring(t.length+1,x.length))+1)),x=n,n},D=function(e){var t=new Date(e),n=new Date,a=function(e){return 0===e.getHours()&&0===e.getMinutes()?null:0===e.getMinutes()?w.a(e,"haaa"):w.a(e,"h:mmaaa")}(t);return function(e){var t=j.a(e,n),a=k.a(e,n,{weekStartsOn:1}),r=C.a(e,n),o=n.getDay()-1;if(o<0&&(o+=7),0===t)return"Today";if(-1===t)return"Yesterday";if(1===t)return"Tomorrow";var i=w.a(e,"EEE");return 0===a&&t>=0||o>=5&&t>=0&&t<5?i:t>=-7&&t<0?"Last ".concat(i):t>0&&t<=7?"Next ".concat(i):t>7&&t<=14?"".concat(i," Week"):0===r?w.a(e,"EEE MMM do"):w.a(e,"EEE MMM do yyyy")}(t)+(a?" "+a:"")},I=function(e){var t=(e-(new Date).getTime())/1e3;return t<0?"urgency-overdue":t<7200?"urgency-two-hours":t<86400?"urgency-day":t<604800?"urgency-week":t<1209600?"urgency-fortnight":null},N=n(126),S=function(){return N},M=function(e,t,n){if(localStorage.version===e){var a=JSON.parse(localStorage.kanban);n(a),localStorage.kanban=JSON.stringify(a),localStorage.version=t}},A=function(){try{if(!localStorage.version)throw new Error;if(M("0.1.0","0.2.0",(function(e){var t=(new Date).getTime();return e.cards.main={id:"main",content:"Welcome",description:"Welcome to your Zettelkasten! You can edit this and use `[[wikilink]]` syntax to link to other nodes.",created:t,edited:t},e})),M("0.2.0","0.2.1",(function(e){var t=function(t){var n=Object.values(e.columns).filter((function(e){return-1!==e.items.indexOf(t)})).length;e.cards[t].type=n?0:1};for(var n in e.cards)t(n);return e.cards.main.type=1,e})),localStorage.hasOwnProperty("kanban"))return JSON.parse(localStorage.kanban)||S()}catch(e){}return S()},L=function(e){try{if(localStorage){var t=JSON.stringify(e);localStorage.setItem("kanban",t),localStorage.setItem("version","0.2.1")}}catch(n){}},R=function(e,t){return Object.keys(e).reduce((function(n,a){return n[a]=t(e[a]),n}),{})},z=function(e,t,n){n||(n="application/octet-stream");var a=document.createElement("a"),r=new Blob([e],{type:n});a.href=window.URL.createObjectURL(r),a.download=t,a.click()},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=[],r=e.toLowerCase();for(var o in t)if(t[o].content.toLowerCase().includes(r)&&(a.push(o),a.length===n))return a;for(var i in t)if(t[i].description&&t[i].description.toLowerCase().includes(r)&&(a.push(i),a.length===n))return a;for(var c in t)if(c.toLowerCase().includes(r)&&(a.push(c),a.length===n))return a;return a}},117:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n(118),o=n.n(r),i=n(10),c=a.lazy((function(){return n.e(3).then(n.bind(null,200))})),l=function(e){var t=e.source,n=e.postprocess,r=void 0===n?function(e){return e}:n;try{return-1!==t.indexOf("```")?a.createElement(a.Suspense,{fallback:a.createElement("span",null,"Loading...")},a.createElement(c,{source:t,postprocess:r})):a.createElement(i.b,{source:r(o()(t,{gfm:!0})),className:"markdown"})}catch(l){return a.createElement("span",null,"Sorry, an error occurred.",a.createElement("br",null),"Try editing the note to ensure any LaTeX math equations and the Markdown syntax are valid.",a.createElement("br",null),"Error: ",l)}}},126:function(e){e.exports=JSON.parse('{"tabs":{"20200921-112205":{"name":"Main","id":"20200921-112205","created":1600651325983,"edited":1600651325983,"columns":["20200921-112205-28","20200921-112205-29","20200921-112205-30"]},"20200921-112205-1":{"name":"Secondary","id":"20200921-112205-1","created":1600651325983,"edited":1600651325983,"columns":["20200921-112205-31","20200921-112205-32"]}},"cards":{"20200921-112205-2":{"id":"20200921-112205-2","type":0,"content":"Wash the dishes","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-3":{"id":"20200921-112205-3","type":0,"content":"\ud83d\ude42","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-5":{"id":"20200921-112205-5","type":0,"content":"Cook pizza for dinner","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-7":{"id":"20200921-112205-7","type":0,"content":"Run out of ideas for sample tasks for the app you\'re making","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-9":{"id":"20200921-112205-9","type":0,"content":"Forget to wrap a line at 300 characters","created":1600651325987,"edited":1600651325987,"moved":1602402483283},"20200921-112205-11":{"id":"20200921-112205-11","type":0,"content":"Finish your chemistry homework","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-14":{"id":"20200921-112205-14","type":0,"content":"Write witty comment\\n\\nhi","created":1600651325987,"edited":1602469534688,"moved":1602488299717},"20200921-112205-15":{"id":"20200921-112205-15","type":0,"content":"\ud83d\ude42","created":1600651325987,"edited":1600651325987,"moved":1602487525979},"20200921-112205-16":{"id":"20200921-112205-16","type":0,"content":"Do normal human things","created":1600651325987,"edited":1602488023349,"moved":1602488298587,"time":1602162000000},"20200921-112205-19":{"id":"20200921-112205-19","type":0,"content":"Cook pizza for dinner","created":1600651325987,"edited":1600651325987,"moved":1602402550715},"20200921-112205-20":{"id":"20200921-112205-20","type":0,"content":"\ud83d\ude42","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-21":{"id":"20200921-112205-21","type":0,"content":"Make cool app","created":1600651325987,"edited":1600651325987,"moved":1602402548552},"20200921-112205-22":{"id":"20200921-112205-22","type":0,"content":"Learn Common Lisp","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-23":{"id":"20200921-112205-23","type":0,"content":"Do normal human things","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-24":{"id":"20200921-112205-24","type":0,"content":"Prove P=NP for N=1","created":1600651325987,"edited":1602475291548,"moved":1602488302470,"time":"2020-10-11T13:00:00.000Z"},"20200921-112205-25":{"id":"20200921-112205-25","type":0,"content":"Learn Common Lisp","created":1600651325987,"edited":1602402535393,"moved":1600651325987},"20200921-112205-26":{"id":"20200921-112205-26","type":0,"content":"Finish your chemistry homework","created":1600651325987,"edited":1600651325987,"moved":1600651325987},"20200921-112205-27":{"id":"20200921-112205-27","type":0,"content":"Run out of ideas for sample tasks for the app you\'re making","created":1600651325987,"edited":1602402520656,"moved":1602402525176},"main":{"id":"main","content":"Welcome","type":1,"description":"Welcome to your Zettelkasten!\\n\\nZettelkasten is German for \'note box\'. It is a note-taking technique where you write short notes containing one idea, and then link them to connected ideas.\\n\\nFor a great discussion of why Zettelkasten is more powerful than linear (notebook) or hierarchical notetaking, see David Clear\'s introductory [article](https://writingcooperative.com/zettelkasten-how-one-german-scholar-was-so-freakishly-productive-997e4e0ca125) on the subject.\\n\\nThis is the \'homepage\' of your Zettelkasten, and you can edit this note or add other notes with the toolbar above.\\n\\nDocumentation\\n\\n* [[20200921-113652]]\\n* [[20200921-113337]]\\n* [[20200921-112831]]\\n* [[20200921-115100]]","created":1600651325983,"edited":1602489958189},"20200921-112831":{"id":"20200921-112831","type":1,"created":1600651711983,"edited":1602463920131,"moved":1600651711983,"content":"Linking to Other Notes","description":"To link to other notes, you can use wiki-link syntax. This is the ID of a note (up there in the URL) surrounded in double square brackets like this:\\n\\n`[[20200921-112831]]`\\n\\nTo help you out, when you start typing `[[a search term` some autocomplete options will pop up, searching the titles, descriptions and IDs of each note.\\n\\nIf you want to try it out, click the pencil icon to edit, and type `[[` and type \'zettelkasten\' and you should see the homepage note come up.\\n\\n\x3c!-- Type the `[[` without backticks, which tell Markdown to ignore the format --\x3e\\n\\nYou can still use markdown style links like `[link text](http://example.com)` to link to other websites."},"20200921-113337":{"id":"20200921-113337","type":1,"created":1600652017723,"edited":1602489978887,"moved":1600652017723,"content":"Formatting Notes","description":"All of your notes are written in [Github Flavoured Markdown](https://docs.github.com/en/github/writing-on-github/basic-writing-and-formatting-syntax).\\n\\nMarkdown is basically a simple extension to plain text that formats things like this:\\n\\n```\\n* this\\n* list\\n```\\n\\ninto this:\\n\\n* this\\n* list\\n\\namong many other functions.\\n\\nThere are several extensions to Markdown which you can use:\\n\\n* Wikilink syntax for linking between notes ([[20200921-112831]]).\\n* [[20201012-121348]] (LaTeX syntax)\\n* [[20201012-070239]]"},"20200921-113652":{"id":"20200921-113652","type":1,"created":1600652212048,"edited":1602465156298,"moved":1600652212048,"content":"Why Zettelkasten?","description":"* [[20200921-114704]]\\n* [[20200921-114801]]"},"20200921-114704":{"id":"20200921-114704","type":1,"created":1600652824930,"edited":1600652858305,"moved":1600652824930,"content":"Heterarchy over Hierarchy","description":"In a hierarchical note taking program like [Cherrytree](https://www.giuspen.com/cherrytree/), you have to impose a pre-planned hierarchy on your notes before writing them. Often times, the structure you plan tends to lead to some sections being a thousand words long while others are tiny. Restructuring your notes is difficult and tedious, and it\'s hard to judge when you need to do so.\\n\\nIn Zettelkasten, you can reorganise your notes frictionlessly by just changing a link or splitting one note into two. As each note is small to begin with, it\'s easy to see when to split them (principle of atomicity), and having more notes does not decrease ease of use."},"20200921-114801":{"id":"20200921-114801","type":1,"created":1600652881728,"edited":1600652906300,"moved":1600652881728,"content":"Emphasises Links Between Ideas","description":"When you write in a notebook, often ideas connect in complex ways which the medium of a notebook cannot easily express. For instance, you may have an idea on page 47 that builds on another on page 22. To benefit from this link you would need to reread your notebook to find it, and then write a page number as a reference, which is quite clunky.\\n\\nIn a hierarchical note taking program, often times ideas in different sections are linked, which is not easily accounted for.\\n\\nIn Zettelkasten, the structure naturally arises to suit your needs. You may find yourself writing notes that link to a number of other notes, as portals into a specific topic. You may find you need to link ideas in different domains as well, and this can be accomplished through the one inter-card linking mechanism."},"20200921-115100":{"id":"20200921-115100","type":1,"created":1600653060746,"edited":1602463940510,"moved":1600653060746,"content":"Ideas for Notes","description":"You can use notes to represent anything. Here is a list of uses I have found for them:\\n\\n* Crazy ideas. This forces you to fully form your idea and allows you to revisit it or link it to other ideas later.\\n* Overviews of concepts. Think Wikipedia articles, but far shorter and only describing what is relevant to your needs. If you use a notebook in classes, you can summarise them into notes here to grow your Zettelkasten.\\n* Hub notes. These are a common pattern for organising your notes by creating notes which link to a number of notes on a certain topic.\\n* Annotated bibliographical entries. Add a citation and some key points, and when you write a note elsewhere you can cite your bibliographical notes.\\n* Blog post ideas\\n* Networking. Never tried this though.\\n* Tutorials. If you always forget how to install X on Y, dump it here!\\n* Personal reflection\\n"},"20201011-064746":{"id":"20201011-064746","content":"Write a tutorial explaining how monads are isomorphic to burritos in the category of food","type":0,"created":1602402466366,"edited":1602402466366,"moved":1602402466366},"20201012-121348":{"id":"20201012-121348","type":1,"created":1602465228857,"edited":1602489956257,"moved":1602465228857,"content":"Math equations","description":"You can use LaTeX syntax for inline and block level equations. They must be delimited by `$$double dollar signs$$`.\\n\\nWhen they stand on their own line they are block level like below, otherwise they are inline ($$a = b$$).\\n\\n$$\\\\hat{x}=\\\\frac{1}{n}\\\\sum_{i=1}^n x_i$$\\n\\nThe math renderer is dynamically loaded when needed."},"20201012-070239":{"id":"20201012-070239","type":1,"created":1602489759425,"edited":1602490314912,"moved":1602489759425,"content":"Syntax highlighting","description":"Syntax highlighting is enabled for a subset of languages:\\n\\n* JavaScript (with JSX xor TypeScript)\\n\\n```jsx\\nconst c = (a, b) => <div className={b}>{a}</div>;\\nwhile (true)\\n    console.log(c(1,1));\\n```\\n\\n* Python\\n\\n```py\\ndef f(x):\\n  return x**2 - 2*x + 1\\ng = lambda x: (x-1)**2\\nassert(f(2) == g(2))\\n```\\n\\nThe exact list of languages currently supported via [Prism.js](https://prismjs.com/) is: markup (HTML/XML), CSS, JS, C, C++, Haskell, $$\\\\LaTeX$$, PureScript, Python, JSX, TypeScript.\\n\\nFeel free to request more languages via the [issue tracker](https://github.com/OliverBalfour/Mirror/issues) as it is trivial to add more."}},"columns":{"20200921-112205-28":{"id":"20200921-112205-28","items":["20201011-064746","20200921-112205-2","20200921-112205-3","20200921-112205-5","20200921-112205-27","20200921-112205-7"],"name":"To Do","created":1600651325987,"edited":1602402525176},"20200921-112205-29":{"id":"20200921-112205-29","items":["20200921-112205-25","20200921-112205-11"],"name":"Doing","created":1600651325987,"edited":1602402535393},"20200921-112205-30":{"id":"20200921-112205-30","items":["20200921-112205-16","20200921-112205-24","20200921-112205-9","20200921-112205-15","20200921-112205-14"],"name":"Done","created":1600651325987,"edited":1602488302470},"20200921-112205-31":{"id":"20200921-112205-31","items":["20200921-112205-20","20200921-112205-19","20200921-112205-22","20200921-112205-23"],"name":"Misc 1","created":1600651325987,"edited":1602402550715},"20200921-112205-32":{"id":"20200921-112205-32","items":["20200921-112205-26","20200921-112205-21"],"name":"Misc 2","created":1600651325987,"edited":1602402550715}},"tabOrder":["20200921-112205","20200921-112205-1"]}')},163:function(e,t,n){e.exports=n(196)},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Edit",(function(){return Se})),n.d(a,"Indicator",(function(){return Me}));var r={};n.r(r),n.d(r,"Edit",(function(){return We})),n.d(r,"Indicator",(function(){return Be}));var o={};n.r(o),n.d(o,"Edit",(function(){return Ue})),n.d(o,"Indicator",(function(){return Ve}));var i,c=n(0),l=n.n(c),u=n(17),s=n.n(u),d=n(11),m=n(12),f=n(10),b=n(235),h=n(252),p=n(236),g=n(237),v=n(62),y=n.n(v),E=n(142),O=n(259),w=function(e){var t=e.map,n=e.children,a=c.useState(null),r=Object(d.a)(a,2),o=r[0],i=r[1],l=function(){return i(null)};return c.createElement(c.Fragment,null,c.createElement(E.a,{anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l},Object.entries(t).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return c.createElement(O.a,{key:n,onClick:function(){l(),a()}},n)}))),c.cloneElement(n,{onClick:function(e){return i(e.currentTarget)}}))},j=function(e){var t=e.show,n=e.children;return c.createElement("div",{hidden:!t,style:{height:"calc(100% - 48px)"}},t&&n)},k=function(e){var t=e.tabs,n=e.render,a=e.index,r=e.setIndex,o=e.addTab,i=e.renameTab,l=e.deleteTab,u=e.moveTab,s=function(e,n){return n>=0&&n<t.length&&r(n)},d=function(){return c.createElement("div",{style:{flexGrow:1}})};return c.createElement("div",{style:{flex:1}},c.createElement(b.a,{position:"static",style:{backgroundColor:"white",zIndex:2,position:"relative"}},c.createElement(h.a,{value:a,onChange:s,indicatorColor:"primary",textColor:"primary"},t.map((function(e){return c.createElement(p.a,{label:e,key:e})})),c.createElement(d,null),c.createElement(w,{map:{"Add tab":function(){return o()},"Rename tab":function(){return i(a)},"Delete tab":function(){return l(a)},"Move tab left":function(){u([a,a-1]),s(0,a-1)},"Move tab right":function(){u([a,a+1]),s(0,a+1)}}},c.createElement(g.a,null,c.createElement(y.a,null))))),t.map((function(e,t){return c.createElement(j,{show:a===t,key:e},a===t&&n(t))})))},C=n(241),x=n(133),T=n.n(x),D=n(92),I=n.n(D),N=n(94),S=n(18),M=n(257),A=n(246),L=n(242),R=n(247),z=n(243),_=n(198),F=n(256),$=n(261),P=n(254),W=n(248),B=n(20),Z=n(19),J=n(51),H=n.n(J),q=Object(Z.b)("kanban/TRANSFER_CARD"),U=Object(Z.b)("kanban/REORDER_CARD"),Y=Object(Z.b)("kanban/ADD_CARD"),K=Object(Z.b)("kanban/EDIT_CARD_CONTENT"),G=Object(Z.b)("kanban/EDIT_CARD"),V=Object(Z.b)("kanban/DELETE_CARD"),X=Object(Z.b)("kanban/ADD_COLUMN"),Q=Object(Z.b)("kanban/DELETE_COLUMN"),ee=Object(Z.b)("kanban/RENAME_COLUMN"),te=Object(Z.b)("kanban/MOVE_COLUMN"),ne=Object(Z.b)("kanban/ARCHIVE_ALL_COLUMN"),ae=Object(Z.b)("kanban/SORT_COLUMN_BY_CARD_TIME_ATTRIBUTE"),re=Object(Z.b)("kanban/ADD_TAB"),oe=Object(Z.b)("kanban/DELETE_TAB"),ie=Object(Z.b)("kanban/RENAME_TAB"),ce=Object(Z.b)("kanban/MOVE_TAB"),le=Object(Z.b)("zettelkasten/ADD_ZETTEL"),ue=Object(Z.b)("zettelkasten/EDIT_ZETTEL"),se=Object(Z.b)("zettelkasten/DELETE_ZETTEL"),de=Object(Z.b)("zettelkasten/TOGGLE_STARRED"),me=function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),-1!==n},fe={getColumnsInTabs:function(e){return Object(f.j)(e.tabs,(function(t){return t.columns.map((function(t){return e.columns[t]})).map((function(t){return Object(S.a)(Object(S.a)({},t),{},{items:t.items.map((function(t){return e.cards[t]}))})}))}))},columns:function(e){return e.columns},tabs:function(e){return e.tabs},tabOrder:function(e){return e.tabOrder},cards:function(e){return e.cards},archivedCards:function(e){return Object.values(e.cards).filter((function(e){return-1!==Object.keys(e).indexOf("archived")}))},activeCards:function(e){return Object.values(e.cards).filter((function(e){return-1===Object.keys(e).indexOf("archived")}))},starredZettels:function(e){return e.starredZettels?e.starredZettels:[]},cardsByTab:function(e){return Object(f.j)(e.tabs,(function(t){return t.columns.flatMap((function(t){return e.columns[t].items}))}))}},be=Object(f.h)(),he=Object(Z.c)(be,(i={},Object(B.a)(i,q,(function(e,t){var n=t.payload,a=n.srcColID,r=n.dstColID,o=n.srcIndex,i=n.dstIndex,c=e.columns[a].items,l=e.columns[r].items,u=c.splice(o,1),s=Object(d.a)(u,1)[0],m=(new Date).getTime();e.cards[s].moved=m,e.columns[a].edited=m,e.columns[r].edited=m,l.splice(i,0,s)})),Object(B.a)(i,U,(function(e,t){var n=t.payload,a=n.colID,r=n.srcIndex,o=n.dstIndex,i=(new Date).getTime();e.columns[a].edited=i;var c=e.columns[a].items,l=c.splice(r,1),u=Object(d.a)(l,1)[0];e.cards[u].moved=i,c.splice(o,0,u),e.columns[a].items=c})),Object(B.a)(i,Y,(function(e,t){var n=t.payload,a=n.content,r=n.colID,o=Object(f.f)(),i=(new Date).getTime();e.cards[o]={id:o,content:a,type:0,created:i,edited:i,moved:i},e.columns[r].items.unshift(o),e.columns[r].edited=i})),Object(B.a)(i,Q,(function(e,t){var n=t.payload,a=Object.values(e.tabs).map((function(e){return-1!==e.columns.indexOf(t.payload)})).indexOf(!0);a>=0&&(e.tabs[e.tabOrder[a]].edited=(new Date).getTime()),e.columns[n].items.forEach((function(t){return delete e.cards[t]})),Object.values(e.tabs).forEach((function(e){return me(e.columns,n)})),delete e.columns[n]})),Object(B.a)(i,ee,(function(e,t){var n=t.payload,a=n.colID,r=n.name;e.columns[a].name=r,e.columns[a].edited=(new Date).getTime()})),Object(B.a)(i,K,(function(e,t){var n=t.payload,a=n.cardID,r=n.content;e.cards[a].content=r,e.cards[a].edited=(new Date).getTime()})),Object(B.a)(i,V,(function(e,t){Object.values(e.columns).forEach((function(e){me(e.items,t.payload)&&(e.edited=(new Date).getTime())})),delete e.cards[t.payload]})),Object(B.a)(i,X,(function(e,t){var n=t.payload,a=n.tabID,r=n.name,o=Object(f.f)(),i=(new Date).getTime();e.columns[o]={id:o,items:[],name:r,created:i,edited:i},e.tabs[a].columns.push(o),e.tabs[a].edited=i})),Object(B.a)(i,G,(function(e,t){var n=t.payload,a=n.card,r=n.colID,o=(new Date).getTime();e.cards[a.id]=t.payload.card,e.cards[a.id].edited=o;var i=Object.keys(e.columns).filter((function(t){return-1!==e.columns[t].items.indexOf(a.id)}))[0],c=r;i!==c&&(me(e.columns[i].items,a.id),e.columns[c].items.unshift(a.id),e.columns[i].edited=e.columns[c].edited=o)})),Object(B.a)(i,oe,(function(e,t){for(var n=t.payload,a=e.tabs[e.tabOrder[n]];a.columns.length;){var r=a.columns[0];e.columns[r].items.forEach((function(t){return delete e.cards[t]})),delete e.columns[r],a.columns.shift()}delete e.tabs[e.tabOrder[n]],e.tabOrder.splice(n,1)})),Object(B.a)(i,re,(function(e,t){var n=Object(f.f)(),a=t.payload;e.tabs[n]={name:a,id:n,columns:[],created:(new Date).getTime()},e.tabOrder.push(n)})),Object(B.a)(i,ie,(function(e,t){var n=t.payload,a=n.tabID,r=n.name;e.tabs[a].name=r,e.tabs[a].edited=(new Date).getTime()})),Object(B.a)(i,te,(function(e,t){var n=Object(d.a)(t.payload,3),a=n[0],r=n[1],o=n[2],i=e.tabOrder[o],c=e.tabs[i].columns,l=c.splice(a,1),u=Object(d.a)(l,1)[0];c.splice(r,0,u),e.tabs[i].columns=c,e.tabs[i].edited=(new Date).getTime()})),Object(B.a)(i,ce,(function(e,t){var n=Object(d.a)(t.payload,2),a=n[0],r=n[1];if(!(r<0||r>=e.tabs.length)){var o=e.tabOrder,i=o.splice(a,1),c=Object(d.a)(i,1)[0];o.splice(r,0,c),e.tabOrder=o}})),Object(B.a)(i,ne,(function(e,t){var n=t.payload,a=(new Date).getTime();e.columns[n].items.forEach((function(n){var r=e.cards[n];r.moved=r.edited=r.archived=a,r.archivedFromColID=t.payload})),e.columns[n].items=[],e.columns[n].edited=a})),Object(B.a)(i,le,(function(e,t){var n=t.payload.zettel,a=n.id||Object(f.f)(),r=(new Date).getTime();e.cards[a]=Object(S.a)({id:a,type:1,created:r,edited:r,moved:r},n)})),Object(B.a)(i,ue,(function(e,t){var n=t.payload.zettel,a=(new Date).getTime();-1!==Object.keys(e.cards).indexOf(n.id)&&(e.cards[n.id]=n,e.cards[n.id].edited=a)})),Object(B.a)(i,se,(function(e,t){delete e.cards[t.payload]})),Object(B.a)(i,de,(function(e,t){e.starredZettels||(e.starredZettels=[]),-1===e.starredZettels.indexOf(t.payload)?e.starredZettels.push(t.payload):me(e.starredZettels,t.payload)})),Object(B.a)(i,ae,(function(e,t){e.columns[t.payload].items.sort((function(t,n){var a=new Date(e.cards[n].time||null).getTime(),r=new Date(e.cards[t].time||null).getTime();return 0===r&&0===a?0:0===r?1:0===a?-1:r-a}))})),i)),pe=H()(he,{limit:20}),ge=n(78),ve=Object(Z.a)({reducer:pe,middleware:function(e){return e().concat(ge.a)}});try{document.addEventListener("keyup",(function(e){-1===["input","textarea"].indexOf(document.activeElement.tagName.toLowerCase())&&(e.ctrlKey&&90===e.which&&!e.shiftKey?ve.dispatch(J.ActionCreators.undo()):(e.ctrlKey&&e.shiftKey&&90===e.which||e.ctrlKey&&89===e.which)&&ve.dispatch(J.ActionCreators.redo()))}))}catch(Lt){}var ye=ve,Ee=function(e){return e.present},Oe={boards:Object(f.j)(fe,(function(e){return function(t){return e(Ee(t))}}))},we=function(){return Object(f.n)(Ee(ve.getState()))};ve.subscribe(we),we();var je=n(262),ke=n(117),Ce=c.lazy((function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,269))})),xe=function(e){var t=e.cards?Object(f.l)(e.source,e.cards):e.source;return-1===t.indexOf("$$")?c.createElement(ke.a,{source:t}):c.createElement(c.Suspense,{fallback:c.createElement("span",null,"Loading...")},c.createElement(Ce,{source:t}))},Te=n(240),De=n(106),Ie=n(130),Ne=function(e){var t=e.value,n=e.setValue,a=e.autoFocus,r=void 0!==a&&a,o=e.addNote,i=e.rows,l=e.rowsMax,u=c.useRef(null),s=Object(m.d)(Oe.boards.cards);return c.useEffect((function(){var e=new Ie.TextareaEditor(u.current),t={context:function(e){return e.indexOf("[[")>=0},match:/\[\[([A-Za-z0-9_ -]+)$/,search:function(e,t){return t([].concat(Object(N.a)(Object(f.o)(e,s)),[0]))},cache:!0,template:function(e){return 0===e?o?"<em>Add note</em>":"":Object(f.g)(s[e])},replace:function(e){if(0===e&&o){var t=Object(f.f)();return window.setTimeout((function(){return o(t)}),0),"[[".concat(t,"]]")}return"[[".concat(e,"]]")}},n=new De.Textcomplete(e,[t],{dropdown:{rotate:!0,maxCount:10}});return function(){n.destroy(),delete window.__addNote}}),[]),c.createElement(F.a,{margin:"dense",fullWidth:!0,variant:"outlined",autoFocus:r,multiline:!0,rows:i,rowsMax:l,value:t,onChange:function(e){return n(e.target.value)},inputProps:{ref:u}})},Se=function(e){var t=e.card,n=e.setCard,a=c.useState(!1),r=Object(d.a)(a,2),o=r[0],i=r[1],l=Object(m.d)(Oe.boards.cards);return o||"string"===typeof t.description?o?c.createElement(c.Fragment,null,c.createElement($.a,{className:"custom-label"},"Description"),c.createElement(Te.a,{onClickAway:function(){return i(!1)}},c.createElement("div",{style:{width:"100%",height:"100%"}},c.createElement(Ne,{value:t.description,setValue:function(e){return n(Object(S.a)(Object(S.a)({},t),{},{description:e.length?e:void 0}))},autoFocus:!0,rows:6,rowsMax:24})))):c.createElement("div",{style:{marginTop:8}},c.createElement("div",{onClick:function(){return i(!0)}},c.createElement($.a,{className:"custom-label"},"Description")),c.createElement(xe,{source:t.description,cards:l})):c.createElement(Qe,{onClick:function(){return i(!0)}},"Add description")},Me=function(e){var t=e.card;if(t.description){var n=Object(f.d)(t);return c.createElement(Xe,{label:null,title:n,icon:c.createElement(I.a,null)})}return null},Ae=n(131),Le=n.n(Ae),Re=n(22),ze=n(250),_e=n(140),Fe=n(244),$e=n(141),Pe=n(264);Pe.a.weekStart=1;var We=function(e){var t=e.card,n=e.setCard,a=function(e){return n(Object(S.a)(Object(S.a)({},t),{},{time:e}))};return t.time?c.createElement("div",{style:{marginTop:10}},c.createElement($.a,{className:"custom-label"},"Date & time"),c.createElement(Re.a,{utils:_e.a,locale:Pe.a},c.createElement(ze.a,{value:new Date(t.time),onChange:function(e){return a(e.getTime())},showTodayButton:!0,format:"MMMM do hh:mm aaa"})),c.createElement(_.a,{color:"primary",variant:"outlined",style:{float:"right",marginTop:12},onClick:function(){return a(null)}},"Reset date")):c.createElement(Qe,{onClick:function(){return a(Object(Fe.a)().getTime())}},"Add date & time")},Be=function(e){var t=e.card;return t.time?c.createElement(Xe,{icon:c.createElement(Le.a,null),label:Object(f.m)(t.time),title:Object($e.a)(new Date(t.time),"dd/MM/yyyy hh:mmaaa"),className:Object(f.p)(new Date(t.time).getTime())}):null},Ze=n(245),Je=n(255),He=n(132),qe=n.n(He),Ue=function(e){var t=e.card,n=e.setCard,a=function(e){return n(Object(S.a)(Object(S.a)({},t),{},{ebs:Object(S.a)(Object(S.a)({},t.ebs),e)}))},r=c.useState(t.ebs?Ke(t.ebs.estimate):""),o=Object(d.a)(r,2),i=o[0],l=o[1],u=c.useState(t.ebs?Ke(t.ebs.elapsed):""),s=Object(d.a)(u,2),f=s[0],b=s[1],h=Object(m.d)((function(e){return Object.values(Ee(e).cards).filter((function(e){return Object.prototype.hasOwnProperty.call(e,"ebs")&&null!==e.ebs})).filter((function(e){return e.ebs.elapsed&&e.ebs.estimate})).map((function(e){return e.ebs}))})),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(e);var n=Ge(e),r=null!==t?{exact:t}:{};"number"===typeof n&&a(Object(S.a)({estimate:n,computed:Ye(n,h)},r))};if(!t.ebs)return c.createElement(Qe,{onClick:function(){return p("1h",!0)}},"Add time estimate");var g=function(e){return""!==e&&null!==e&&null===Ge(e)};return c.createElement("div",{style:{marginTop:10}},c.createElement($.a,{className:"custom-label"},"Time estimate"),c.createElement("div",{style:{width:"30%",float:"left",marginRight:16}},c.createElement(F.a,{label:"Estimate (predicted ".concat(Ke(Ye(Ge(i)||0,h)),")"),autoFocus:!0,margin:"dense",fullWidth:!0,value:i,error:g(i),helperText:g(i)?"Example format: 1h30m":null,onChange:function(e){return p(e.target.value)}})),c.createElement("div",{style:{width:"30%",float:"left",marginRight:16}},c.createElement(F.a,{label:"Elapsed",margin:"dense",fullWidth:!0,value:f,error:g(f),helperText:g(f)?"Example format: 1h30m":null,onChange:function(e){return function(e){b(e);var t=Ge(e);"number"===typeof t&&a({elapsed:t})}(e.target.value)}})),c.createElement("div",{style:{marginTop:12,float:"left"}},c.createElement(Ze.a,{label:"Exact duration",control:c.createElement(Je.a,{color:"primary",checked:Boolean(t.ebs.exact),onChange:function(e){return a({exact:e.target.checked})}})})),c.createElement("div",{style:{flexGrow:1}}),c.createElement(_.a,{color:"primary",variant:"outlined",size:"medium",style:{float:"right",marginTop:12},onClick:function(){l(""),b(""),n(Object(S.a)(Object(S.a)({},t),{},{ebs:null}))}},"Reset estimate"))},Ye=function(e,t){if("number"!==typeof e)return e;var n=t.reduce((function(e,n){return e+n.elapsed/n.estimate/t.length}),0);n||(n=1),t.length<10&&(n=(n+1)/2);for(var a=e*n,r=0,o=[3600,900,300];r<o.length;r++){var i=o[r];if(e%i===0&&Math.abs(a-e)>i/2)return i*Math.round(a/i)}return 60*Math.round(a/60)},Ke=function(e){if("string"===typeof e)return e;var t=Math.floor(e/3600),n=Math.floor(e%3600/60);return 0===t&&0===n?"0":(t?t+"h":"")+(n?n+"m":"")},Ge=function(e){if("0"===e)return 0;var t=/^(\d+h|\d*\.\d+h)?(\d+m|\d*\.\d+m)?$/m.exec(e);if(!t||3!==t.length||!t.slice(1).filter((function(e){return e})).length)return null;var n=function(e){return parseFloat(e.substring(0,e.length-1))};return 3600*n((t=t.slice(1))[0]||"00")+60*n(t[1]||"00")},Ve=function(e){var t=e.card;if(t.ebs){var n=(t.ebs.elapsed?Ke(t.ebs.elapsed)+"/":"")+Ke(t.ebs.exact?t.ebs.estimate:t.ebs.computed),a=t.ebs.elapsed?"Elapsed: ".concat(Ke(t.ebs.elapsed)):"",r=t.ebs.exact?"Duration: ".concat(Ke(t.ebs.estimate),"\n").concat(a):"Estimate: ".concat(Ke(t.ebs.estimate),"\nComputed: ").concat(Ke(t.ebs.computed),"\n").concat(a),o=c.createElement(qe.a,null);return c.createElement(Xe,{label:n,title:r,icon:o})}return null},Xe=function(e){var t=e.icon,n=e.label,a=e.title,r=e.className;return c.createElement(je.a,{size:"small",icon:t,label:n,title:a,classes:n&&n.length?null:{label:"attribute-label"},className:"attribute-indicator "+(r||""),variant:"outlined"})},Qe=function(e){return c.createElement("div",{className:"attribute-header"},c.createElement(_.a,Object.assign({variant:"outlined",color:"primary",size:"small"},e)))},et=function(e){var t=e.open,n=e.respond,a=e.title,r=e.subtitle,o=e.labels,i=void 0===o?["Cancel","OK"]:o;return c.createElement(M.a,{open:t,onClose:function(){return n(null)}},c.createElement(A.a,null,a),c.createElement(L.a,null,c.createElement(R.a,null,r)),c.createElement(z.a,null,c.createElement(_.a,{onClick:function(){return n(!1)},color:"primary"},i[0]),c.createElement(_.a,{onClick:function(){return n(!0)},color:"primary",variant:"contained",autoFocus:!0},i[1])))},tt=function(e){var t=e.open,n=e.respond,a=e.title,r=e.subtitle,o=e.labels,i=void 0===o?["Cancel","OK"]:o,l=e.label,u=e.inputType,s=void 0===u?"text":u,m=e.placeholder,f=void 0===m?"":m,b=e.buttons,h=void 0===b?null:b,p=c.useState(f),g=Object(d.a)(p,2),v=g[0],y=g[1],E=function(e){n(e),y(f)};return c.createElement(M.a,{open:t,onClose:function(){return E(null)}},c.createElement(A.a,null,a),c.createElement(L.a,null,"string"===typeof r&&c.createElement(R.a,null,r),c.createElement(F.a,{autoFocus:!0,margin:"dense",fullWidth:!0,label:l,type:s,value:v,onChange:function(e){return y(e.target.value)}})),c.createElement(z.a,null,h,c.createElement(_.a,{onClick:function(){return E(!1)},color:"primary"},i[0]),c.createElement(_.a,{onClick:function(){return E(v)},color:"primary",variant:"contained"},i[1])))},nt=function(e){var t=e.respond,n=e.card,i=Object(m.c)(),l=Object(m.d)((function(e){return Object.values(Ee(e).columns).filter((function(e){return-1!==e.items.indexOf(n.id)}))[0].id})),u=c.useState(l),s=Object(d.a)(u,2),b=s[0],h=s[1],p=c.useState(n),g=Object(d.a)(p,2),v=g[0],y=g[1],E=function(e){return y(Object(S.a)(Object(S.a)({},v),{},{content:e}))},w=Object(m.d)(Oe.boards.columns),j=Object(m.d)(Oe.boards.tabs),k=function(){t(),E(n.content)};return c.createElement(M.a,{open:!0,onClose:function(){return k()},fullWidth:!0,maxWidth:"md",disableBackdropClick:JSON.stringify(v)!==JSON.stringify(n)},c.createElement(f.c,{shouldProtect:JSON.stringify(v)!==JSON.stringify(n)}),c.createElement(A.a,null,"Edit card"),c.createElement(L.a,null,c.createElement($.a,{id:"kanban/card-column",className:"custom-label"},"Column"),c.createElement(P.a,{labelId:"kanban/card-column",value:b,onChange:function(e){return h(e.target.value)}},Object.values(j).flatMap((function(e){return[c.createElement(W.a,{key:e.id},e.name)].concat(Object(N.a)(e.columns.map((function(e){return c.createElement(O.a,{value:e,key:e},w[e].name)}))))}))),c.createElement($.a,{id:"kanban/card-title",className:"custom-label"},"Title"),c.createElement(F.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:v.content,onChange:function(e){return E(e.target.value)}}),c.createElement(a.Edit,{card:v,setCard:y}),c.createElement(r.Edit,{card:v,setCard:y}),c.createElement(o.Edit,{card:v,setCard:y})),c.createElement(z.a,null,c.createElement(_.a,{onClick:function(){i(G({card:v,colID:b})),i(V(n.id)),k()}},"Delete"),c.createElement(_.a,{onClick:k,color:"primary"},"Cancel"),c.createElement(_.a,{onClick:function(){i(G({card:v,colID:b})),k()},color:"primary",variant:"contained"},"OK")))},at=function(e){var t=e.open,n=e.respond;return c.createElement(M.a,{open:t,onClose:n,fullWidth:!0},c.createElement(A.a,null,"About Mirror"),c.createElement(L.a,null,c.createElement(R.a,null,"A free and open source personal task management and note taking app.",c.createElement("br",null),"Made by Oliver Balfour. \xa9 2020.",c.createElement("br",null),"App icon is ",c.createElement("a",{href:"https://thenounproject.com/term/mirror/340140/"},"Mirror"),"\xa0 by Lastspark from ",c.createElement("a",{href:"http://thenounproject.com/"},"The Noun Project"),".")),c.createElement(z.a,null,c.createElement(_.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},rt=function(e){var t=e.active,n=e.setActive,a=l.a.useState(!1),r=Object(d.a)(a,2),o=r[0],i=r[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{color:"primary",style:{top:"auto",bottom:0}},l.a.createElement(C.a,{style:{minHeight:0}},l.a.createElement(h.a,{value:t,onChange:function(e,t){return n(t)},TabIndicatorProps:{style:{backgroundColor:"white"}}},l.a.createElement(p.a,{label:l.a.createElement("div",null,l.a.createElement(T.a,{style:{verticalAlign:"middle"}})," Boards")}),l.a.createElement(p.a,{label:l.a.createElement("div",null,l.a.createElement(I.a,{style:{verticalAlign:"middle"}})," Notes")})),l.a.createElement("div",{style:{flexGrow:1}}),l.a.createElement(ut,null),l.a.createElement(w,{map:{"Submit feedback":function(){return window.open("mailto:oliver.leo.balfour+mirrorsupport@googlemail.com","_blank")},About:function(){return i(!0)},"Clear saved state":function(){return"YES"===window.prompt("Delete all saved state? Pressing undo will fix this. Type YES to confirm","NO")&&localStorage.clear()},"Import state":function(){localStorage.kanban=window.prompt("Paste your exported state here. Press cancel (or the undo button after pressing OK) to revert. Refresh the page to confirm and reload state.")},"Export state":function(){return Object(f.e)(localStorage.kanban,"mirror-backup.json","application/json")}}},l.a.createElement(g.a,{edge:"end",color:"inherit"},l.a.createElement(y.a,null))))),l.a.createElement(at,{open:o,respond:function(){return i(!1)}}))},ot=n(134),it=n.n(ot),ct=n(135),lt=n.n(ct),ut=function(){var e=Object(m.c)();return c.createElement(c.Fragment,null,c.createElement(g.a,{onClick:function(){return e(J.ActionCreators.undo())},color:"inherit",edge:"end"},c.createElement(it.a,null)),c.createElement(g.a,{onClick:function(){return e(J.ActionCreators.redo())},color:"inherit",edge:"end"},c.createElement(lt.a,null)))},st=n(52),dt=n(249),mt=n(63),ft=n.n(mt),bt=n(93),ht=n.n(bt),pt=function(e){var t=e.col,n=e.add,a=(e.menu,Object(m.c)()),r=c.useState(!1),o=Object(d.a)(r,2),i=o[0],l=o[1],u=c.useState(!1),s=Object(d.a)(u,2),f=s[0],b=s[1],h=t.items.filter((function(e){return-1!==["string","number"].indexOf(typeof e.time)})).length>0;return c.createElement("div",null,c.createElement("div",{className:"columnHeaderContainer"},c.createElement("div",{className:"columnHeaderText"},t.name),c.createElement("div",null,c.createElement(g.a,{size:"small",onClick:function(){return n()}},c.createElement(ft.a,null)),c.createElement(w,{map:Object(S.a)(Object(S.a)({"Archive all":function(){return a(ne(t.id))}},h?{"Sort by due":function(){return a(ae(t.id))}}:{}),{},{Rename:function(){return b(!0)},Delete:function(){return l(!0)}})},c.createElement(g.a,{size:"small"},c.createElement(y.a,null))))),c.createElement("hr",{className:"columnHeaderRule"}),i&&c.createElement(et,{open:!0,respond:function(e){l(!1),e&&a(Q(t.id))},title:"Delete this column?",subtitle:"Don't worry, this action can be undone."}),f&&c.createElement(tt,{open:!0,respond:function(e){b(!1),"string"===typeof e&&e.length&&a(ee({colID:t.id,name:e}))},title:'Rename column "'.concat(t.name,'"'),subtitle:"Don't worry, this action can be undone.",label:"Name",placeholder:t.name}))},gt=c.memo((function(e){var t=e.card,n=e.index,i=e.setEditingCard,l=Object(m.d)(Oe.boards.cards);if(!t)return null;var u=t.id,s=t.content;return c.createElement(c.Fragment,null,c.createElement(st.b,{draggableId:u,index:n},(function(e,n){return c.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"card "+(n.isDragging?" draggingCard":""),style:e.draggableProps.style,onClick:function(){return i(u)}}),c.createElement(xe,{source:s,cards:l}),c.createElement(a.Indicator,{card:t}),c.createElement(r.Indicator,{card:t}),c.createElement(o.Indicator,{card:t}))})))})),vt=c.memo((function(e){var t=e.col,n=e.index,a=e.setEditingCard,r=t.id,o=t.items,i=c.useState(!1),l=Object(d.a)(i,2),u=l[0],s=l[1],b=c.useState(""),h=Object(d.a)(b,2),p=h[0],g=h[1],v=Object(m.c)(),y=function(){p.length&&v(Y({content:p,colID:r})),g(""),s(!1)},E=function(){u?g(""):O.current.scrollTop=0,s(!u)},O=c.useRef(null),w=function(){console.log("pressed menu button")},j=c.createElement(st.c,{droppableId:r,className:"card-droppable",type:"card",ignoreContainerClipping:!0},(function(e,t){return c.createElement(c.Fragment,null,c.createElement("div",{className:"column-internals"+(t.isDraggingOver?" dragging-over":""),ref:Object(f.i)(e.innerRef,O)},u&&c.createElement(yt,{value:p,setValue:g,add:y,cancel:function(){g(""),s(!1)}}),o.map((function(e,t){return e?c.createElement(gt,{card:e,index:t,key:e.id,setEditingCard:a}):null}))),e.placeholder)}));return c.createElement(st.b,{draggableId:r,index:n},(function(e,n){return c.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:"columnContainer"+(n.isDragging?" draggingColumn":""),style:e.draggableProps.style}),c.createElement("div",{className:"column"},c.createElement("div",e.dragHandleProps,c.createElement(pt,{col:t,add:E,menu:w})),j))}))})),yt=function(e){var t=e.value,n=e.setValue,a=e.add,r=e.cancel;return c.useEffect((function(){var e=function(e){return 27===e.which&&r()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),c.createElement("div",null,c.createElement(F.a,{label:"New Card",multiline:!0,autoFocus:!0,rowsMax:6,value:t,onChange:function(e){return n(e.target.value)},variant:"filled",style:{width:"100%"}}),c.createElement(dt.a,{variant:"contained",size:"small",className:"editingCardButtons"},c.createElement(_.a,{style:{flexGrow:1},variant:"contained",onClick:a},"Done"),c.createElement(_.a,{onClick:r},c.createElement(ht.a,{style:{color:"#555"}}))))},Et=function(e){var t=e.add,n=e.hide;return c.createElement("div",{className:"addColumnContainer"+(n?" hidden":"")},c.createElement("div",{className:"addColumn"},c.createElement(g.a,{onClick:t},c.createElement(ft.a,null))))},Ot=(n(193),function(e){var t=e.tabInfo,n=t.index,a=t.tab,r=Object(m.c)(),o=Object(m.d)(Oe.boards.tabOrder),i=Object(m.d)(Oe.boards.getColumnsInTabs)[o[n]],l=Object(m.d)(Oe.boards.tabs),u=Object(m.d)(Oe.boards.cards),s=l[o[n]].columns,b=c.useState(!1),h=Object(d.a)(b,2),p=h[0],g=h[1],v=Object(f.q)(),y=Object(d.a)(v,2),E=y[0],O=y[1],w="edit"===E.split("/")[4]?E.split("/")[3]:null,j=Object(m.d)(Oe.boards.cardsByTab),k=function(e){return O(e?"/boards/".concat(l[function(e){return Object.keys(j).filter((function(t){return-1!==j[t].indexOf(e)}))}(e)].name.toLowerCase(),"/").concat(e,"/edit"):"/boards/".concat(E.split("/")[2]))};return c.createElement("div",{className:"boardview-root"},c.createElement(st.a,{onDragEnd:function(e){e.destination&&("card"===e.type?r(function(e){var t=Object(d.a)(e,4),n=t[0],a=t[1],r=t[2],o=t[3];return n===a?U({colID:n,srcIndex:r,dstIndex:o}):q({srcColID:n,dstColID:a,srcIndex:r,dstIndex:o})}([e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index])):"column"===e.type&&r(te([e.source.index,e.destination.index,n])))}},c.createElement(st.c,{droppableId:"default",className:"column-droppable",direction:"horizontal",type:"column"},(function(e,t){return c.createElement(c.Fragment,null,c.createElement("div",{className:"root",ref:e.innerRef},s.map((function(e,t){return c.createElement(vt,{col:i[t],key:e,index:t,setEditingCard:k})})),c.createElement(Et,{add:function(){return g(!0)},hide:t.isDraggingOver||t.draggingFromThisWith})),e.placeholder)}))),p&&c.createElement(tt,{open:!0,respond:function(e){g(!1),"string"===typeof e&&e.length&&r(X({tabID:a.id,name:e}))},title:"Add column",label:"Name"}),w&&u.hasOwnProperty(w)&&c.createElement(nt,{respond:function(){return k(null)},card:u[w]}))}),wt=function(e){var t=e.active,n=Object(m.c)(),a=Object(f.q)(),r=Object(d.a)(a,2),o=r[0],i=r[1],l=Object(m.d)(Oe.boards.tabs),u=Object(m.d)(Oe.boards.tabOrder),s=u.map((function(e){return l[e].name.toLowerCase()===o.split("/")[2]})).indexOf(!0),b=function(e){return i("/boards/"+l[u[e]].name.toLowerCase())};Object(f.r)((function(){return t&&s>=0&&l[u[s]].name+" | Mirror"})),s<0&&(s=0);var h=c.useState(!1),p=Object(d.a)(h,2),g=p[0],v=p[1],y=c.useState(!1),E=Object(d.a)(y,2),O=E[0],w=E[1],j=c.useState(!1),C=Object(d.a)(j,2),x=C[0],T=C[1];return c.createElement(c.Fragment,null,c.createElement(k,{tabs:u.map((function(e){return l[e].name})),render:function(e){return c.createElement(Ot,{tabInfo:{tab:l[u[e]],index:e}})},addTab:function(){return w(!0)},renameTab:function(){return T(!0)},deleteTab:function(){return Object.values(l).length>1?v(!0):alert("Cannot delete only tab")},moveTab:function(e){return n(ce(e))},index:s,setIndex:b}),g&&c.createElement(et,{open:!0,respond:function(e){v(!1),e&&(n(oe(s)),b(Math.max(0,s-1)))},title:"Delete this tab?",subtitle:"Don't worry, this action can be undone."}),O&&c.createElement(tt,{open:!0,respond:function(e){w(!1),"string"===typeof e&&e.length&&n(re(e))},title:"Add tab",label:"Name"}),x&&c.createElement(tt,{open:!0,respond:function(e){T(!1),"string"===typeof e&&e.length&&n(ie({tabID:u[s],name:e}))},title:"Rename tab ".concat(l[u[s]].name),label:"Name"}))},jt=n(136),kt=n.n(jt),Ct=n(137),xt=n.n(Ct),Tt=n(139),Dt=n.n(Tt),It=n(138),Nt=n.n(It),St=(n(194),function(e){var t=e.active,n=Object(f.q)(),a=Object(d.a)(n,3),r=a[0],o=a[1],i=a[2],l=Object(m.c)(),u=Object(m.d)(Oe.boards.cards),s=Object(m.d)(Oe.boards.starredZettels),b=r.split("/")[2]||"main",h=u[b],p=c.useState(Object(S.a)({},h)),g=Object(d.a)(p,2),v=g[0],y=g[1];Object(f.r)((function(){return t&&v.content+" | Mirror"}));var E=function(e){return y(Object(S.a)(Object(S.a)({},v),e))};if("object"!==typeof h)return null;var O="edit"===r.split("/")[3],w=function(e){return i(e?"/notes/".concat(b,"/edit"):"/notes/".concat(b))},j=function(){return l(de(b))};h.id!==v.id&&(l(ue({zettel:v})),y(Object(S.a)({},h)));var k=function(e){l(le({zettel:{content:"New note",description:"...",id:e}})),o("/notes/".concat(e,"/edit"))};return c.createElement(c.Fragment,null,c.createElement(f.c,{shouldProtect:JSON.stringify(v)!==JSON.stringify(h)}),c.createElement("div",{className:"zettelContainer"},O&&c.createElement("div",{className:"zettel"},c.createElement(F.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:v.content||"",onChange:function(e){return E({content:e.target.value})}}),c.createElement(Ne,{value:v.description||"",setValue:function(e){return E({description:e})},addNote:function(e){l(ue({zettel:v})),k(e)}}),c.createElement("div",{className:"zettelEditingButtons"},c.createElement(_.a,{onClick:function(){w(!1),y(Object(S.a)({},h))},color:"primary"},"Cancel"),c.createElement(_.a,{onClick:function(){return l(ue({zettel:v})),void w(!1)},color:"primary",variant:"contained"},"Save"))),c.createElement("div",{className:"zettel"+(O?" notes-editing":"")},c.createElement("div",{className:"zettelTitle"},(O?v.content:h.content)||""),c.createElement(xe,{source:(O?v.description:h.description)||"",cards:u}))),c.createElement("div",{className:"zettelButtons",id:"zettel-buttons-container"},c.createElement(dt.a,{variant:"contained",color:"primary"},!O&&c.createElement(_.a,{onClick:function(){return w(!0)},title:"Edit note"},c.createElement(kt.a,null)),"main"!==h.id&&c.createElement(_.a,{onClick:function(){l(V(b)),i("/notes/main")},title:"Delete note"},c.createElement(ht.a,null)),!O&&c.createElement(_.a,{onClick:function(){return k(Object(f.f)())},title:"Add note"},c.createElement(ft.a,null)),c.createElement(_.a,{onClick:function(){return alert("TODO")},title:"Search notes"},c.createElement(xt.a,null)),-1===s.indexOf(h.id)?c.createElement(_.a,{onClick:j,title:"Star this note"},c.createElement(Nt.a,null)):c.createElement(_.a,{onClick:j,title:"Unstar this note"},c.createElement(Dt.a,null)))))}),Mt=["boards","notes"],At=function(){var e=Object(f.q)(),t=Object(d.a)(e,2),n=t[0],a=t[1],r=l.a.useState(function(){var e=["/boards/","/notes/main"],t=Ee(ye.getState());return e[0]+=t.tabs[t.tabOrder[0]].name.toLowerCase(),e}()),o=Object(d.a)(r,2),i=o[0],c=o[1],u=function(e,t,n){var r=i.slice(0);r[t]=e,c(r),n&&a(e)},s=function(e){return Math.max(Mt.indexOf((n=0,(t=e).split("/").filter((function(e){return e.length}))[n<0?t.length+n:n])),0);var t,n}(n);return l.a.createElement(m.a,{store:ye},l.a.createElement("div",{id:"jsx-root"},l.a.createElement("div",{style:{height:"calc(100% - 48px)"}},l.a.createElement(f.a,{show:0===s},l.a.createElement(wt,{active:0===s})),l.a.createElement(f.a,{show:1===s},l.a.createElement(St,{active:1===s}))),l.a.createElement(rt,{active:s,setActive:function(e){e===s?u("/"+Mt[s],s,!0):(u(n,s),a(i[e]))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(195);s.a.render(l.a.createElement(At,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[163,1,2]]]);
//# sourceMappingURL=main.4c002aa4.chunk.js.map