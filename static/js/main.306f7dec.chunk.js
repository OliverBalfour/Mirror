(this.webpackJsonpmirror=this.webpackJsonpmirror||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"m",(function(){return c})),n.d(t,"l",(function(){return o})),n.d(t,"j",(function(){return b})),n.d(t,"s",(function(){return h})),n.d(t,"u",(function(){return g})),n.d(t,"t",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return j})),n.d(t,"n",(function(){return S})),n.d(t,"h",(function(){return _})),n.d(t,"r",(function(){return D})),n.d(t,"k",(function(){return I})),n.d(t,"p",(function(){return N})),n.d(t,"g",(function(){return A})),n.d(t,"q",(function(){return M})),n.d(t,"f",(function(){return L})),n.d(t,"o",(function(){return R})),n.d(t,"e",(function(){return B}));var r=function(e){if(!e)return"unknown";var t=e.content.split("\n")[0];return t.length>40?t.substring(0,37)+"...":t},a=function(e){if(!e)return"";var t=e?"string"===typeof e?e:e.description||e.content:"unknown";return t.split("\n\n").join("\n").substring(0,500)+(t.length>500?"...":"")},c=function(e,t){for(var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#/notes/",c=/(\[\[[A-Za-z0-9_-]+\]\])/gm;null!==(n=c.exec(e));){n.index===c.lastIndex&&c.lastIndex++;var i=(e.substring(0,n.index).match(/`/gm)||[]).length%2===0;if(i){var o=n[1].substring(2,n[1].length-2),u=e.substring(0,n.index),l=r(t[o]),s=a+o,d=e.substring(n.index+n[1].length,e.length);e=u+"[".concat(l,"](").concat(s,")")+d}}return e},i=function(e,t){return((e||"").match(t)||[]).length},o=function(e,t){if(-1===e.indexOf("$$"))return e;var n=/<p>\$\$([^\n]+)\$\$<\/p>/m,r=/\$\$([^\n]+)\$\$/m,a=function(e,n){return t.renderToString(e,{throwOnError:!1,displayMode:n})},c=function(e,t){for(var c=0,o=t?n:r,u=e.match(o),l=0;l<100&&c<e.length&&u;l++){i(e.substring(0,c+u.index),/<(code|pre)[^>]*>/g)===i(e.substring(0,c+u.index),/<\/(code|pre)>/g)&&(e=e.substring(0,u.index+c)+a(u[1],t)+e.substring(u.index+c+u[0].length,e.length)),c+=u.index+u[0].length,u=e.substring(c,e.length).match(o)}return e};return c(c(e,!0),!1)},u=n(80),l=n(12),s=n(29),d=n(0),m=n(132),f=n.n(m),b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length?0===r.length?r[0]:function(e){var t,n=Object(s.a)(r);try{for(n.s();!(t=n.n()).done;){var a=t.value;"function"===typeof a?a(e):a&&(a.current=e)}}catch(c){n.e(c)}finally{n.f()}}:null},p=function(){return window.location.hash.replace("#","")||"/"},h=function(){var e=d.useState(p()),t=Object(l.a)(e,2),n=t[0],r=t[1];d.useEffect((function(){var e=function(){return r(p())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]);var a=d.useCallback((function(e){return window.location.hash=e}),[]);return[n,a,a]},v=0,g=function(e){if("function"===typeof e){var t=e();t&&(document.title=t)}d.useEffect((function(){var t=document.title;return v++,"string"===typeof e&&(document.title=e),function(){return!v--&&(document.title=t)}}))},O=function(e,t){d.useEffect((function(){var n=setInterval(e,t);return function(){return clearInterval(n)}}),[e,t])},E=function(e){var t=e.shouldProtect,n=void 0===t||t;return d.useEffect((function(){return n&&(window.onbeforeunload=function(e){return"Are you sure you want to quit?"}),function(){return window.onbeforeunload=null}})),null},y=function(e){var t=e.children,n=e.show;return d.createElement("div",{style:n?{}:{display:"none"}},t)},j=function(e){var t=e.source,n=e.purify,r=void 0===n||n,a=Object(u.a)(e,["source","purify"]);return d.createElement("span",Object.assign({dangerouslySetInnerHTML:{__html:r?f.a.sanitize(t):t}},a))},w=n(148),x=n(238),k=n(239),C=n(240),T=null,_=function(){var e,t=(e=new Date,w.a(e,"yyyyMMdd-hhmmss")),n=t;return null!==T&&T.substring(0,t.length)===n&&(T.length===t.length?n+="-1":n+="-"+(parseInt(T.substring(t.length+1,T.length))+1)),T=n,n},S=function(e){var t=new Date(e),n=new Date,r=function(e){return 0===e.getHours()&&0===e.getMinutes()?null:0===e.getMinutes()?w.a(e,"haaa"):w.a(e,"h:mmaaa")}(t);return function(e){var t=x.a(e,n),r=k.a(e,n,{weekStartsOn:1}),a=C.a(e,n),c=n.getDay()-1;if(c<0&&(c+=7),0===t)return"Today";if(-1===t)return"Yesterday";if(1===t)return"Tomorrow";var i=w.a(e,"EEE");return 0===r&&t>=0||c>=5&&t>=0&&t<5?i:t>=-7&&t<0?"Last ".concat(i):t>0&&t<=7?"Next ".concat(i):t>7&&t<=14?"".concat(i," Week"):0===a?w.a(e,"EEE do MMM"):w.a(e,"EEE do MMM yyyy")}(t)+(r?" "+r:"")},D=function(e){var t=(e-(new Date).getTime())/1e3;return t<0?"urgency-overdue":t<7200?"urgency-two-hours":t<86400?"urgency-day":t<604800?"urgency-week":t<1209600?"urgency-fortnight":null},I=function(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=t(e[r]),n}),{})},N=function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))},A=function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),-1!==n},M=function(e){var t=window.history.state;window.history.replaceState(e,window.title);var n=window.history.state;return window.history.replaceState(t,window.title),n},H=function(e){return e&&"object"===typeof e&&!Array.isArray(e)};function L(e,t){if(H(e)&&H(t))for(var n in t)H(t[n])&&H(e[n])?L(e[n],t[n]):e[n]=t[n];return e}var R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=[],a=e.toLowerCase();for(var c in t)if(t[c].content.toLowerCase().includes(a)&&(r.push(c),r.length===n))return r;for(var i in t)if(t[i].description&&t[i].description.toLowerCase().includes(a)&&(r.push(i),r.length===n))return r;for(var o in t)if(o.toLowerCase().includes(a)&&(r.push(o),r.length===n))return r;return r};function B(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;if(Object.prototype.hasOwnProperty.call(t,r.type)){var a=t[r.type](n,r);return a||console.error("Invalid state produced by createReducer for ".concat(r.type,": ").concat(a)),a}}}},170:function(e,t,n){e.exports=n(204)},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Edit",(function(){return Jt})),n.d(r,"Indicator",(function(){return $t}));var a={};n.r(a),n.d(a,"Edit",(function(){return an})),n.d(a,"Indicator",(function(){return cn}));var c={};n.r(c),n.d(c,"Edit",(function(){return ln})),n.d(c,"Indicator",(function(){return mn}));var i=n(0),o=n.n(i),u=n(21),l=n.n(u),s=n(12),d=n(13),m=n(19),f=n(36),b=n(15),p=n(8),h=n.n(p),v=n(17),g=n(22),O=n(39),E=n.n(O),y=n(23),j=n(11),w=n(133),x=n(29),k=n(26);function C(){return T.apply(this,arguments)}function T(){return(T=Object(v.a)(h.a.mark((function e(){var t,n,r,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],n=function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me();case 2:return t=e.sent,e.next=5,N(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,Object(k.c)();case 4:if(e.sent.length){e.next=14;break}if(!(r=I())){e.next=11;break}return e.next=10,N(r);case 10:return e.abrupt("return",r);case 11:return e.next=13,n();case 13:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.next=17,S(t);case 17:return e.abrupt("return",e.sent);case 20:return e.prev=20,e.t0=e.catch(14),console.error(e.t0),e.next=25,n();case 25:return e.abrupt("return",e.sent);case 26:case"end":return e.stop()}}),e,null,[[14,20]])})))).apply(this,arguments)}var _=function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,c,i,o,u,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:null,a=[],e.t0=x.a,e.next=5,Object(k.c)();case 5:e.t1=e.sent,c=(0,e.t0)(e.t1),e.prev=7,c.s();case 9:if((i=c.n()).done){e.next=18;break}if(o=i.value,(u=o.split("."))[1]!==n){e.next=16;break}if("continue"!==function(){var e=u[2];if(r&&-1===r.indexOf(e))return"continue";a.push(Object(k.b)(o).then((function(r){return t[n][e]=r})))}()){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t2=e.catch(7),c.e(e.t2);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.next=28,Promise.all(a);case 28:return e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,null,[[7,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}();function S(){return D.apply(this,arguments)}function D(){return(D=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c,i,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(o.length>0&&void 0!==o[0])||o[0],n={cards:{},columns:{},tabs:{}},r=Object(x.a)(xe),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=15;break}return c=a.value,e.next=9,Object(k.b)("mirror.".concat(c));case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:n[c]=e.t0;case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),r.e(e.t1);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return i=[_(n,"tabs"),_(n,"columns").then((function(){if(t)return _(n,"cards");var e=["main"];for(var r in n.columns)e.push.apply(e,Object(f.a)(n.columns[r].items));return _(n,"cards",e)}))],e.next=26,Promise.all(i);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})))).apply(this,arguments)}function I(){try{if(Object.prototype.hasOwnProperty.call(localStorage,"kanban")){var e=JSON.parse(localStorage.kanban);return delete localStorage.kanban,e}}catch(t){return console.error(t),null}}function N(e){return A.apply(this,arguments)}function A(){return(A=Object(v.a)(h.a.mark((function e(t){var n,r,a,c,i,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&!t.loading){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(k.d)("mirror.starredZettels",[]);case 5:n=Object(x.a)(xe),e.prev=6,n.s();case 8:if((r=n.n()).done){e.next=14;break}return a=r.value,e.next=12,Object(k.d)("mirror.".concat(a),t[a]);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:c=[],i=Object(x.a)(ke);try{for(i.s();!(o=i.n()).done;)for(l in u=o.value,t[u])c.push(Object(k.d)("mirror.".concat(u,".").concat(l),t[u][l]))}catch(s){i.e(s)}finally{i.f()}return e.next=27,Promise.all(c);case 27:return e.abrupt("return",e.sent);case 30:e.prev=30,e.t1=e.catch(0),console.error(e.t1);case 33:case"end":return e.stop()}}),e,null,[[0,30],[6,16,19,22]])})))).apply(this,arguments)}function M(e){return H.apply(this,arguments)}function H(){return(H=Object(v.a)(h.a.mark((function e(t){var n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,e.prev=1,n){e.next=8;break}return e.next=5,Object(k.b)("mirror."+t);case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,Object(k.b)("mirror."+t+"."+n);case 10:return e.abrupt("return",e.sent);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function L(e){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(x.a)(t.set),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=17;break}c=a.value,e.t0=c.type,e.next="add"===e.t0||"edit"===e.t0?9:"delete"===e.t0?11:"param"===e.t0?13:15;break;case 9:return n.push(Object(k.d)("mirror.".concat(c.namespace,".").concat(c.object.id),c.object)),e.abrupt("break",15);case 11:return n.push(Object(k.a)("mirror.".concat(c.namespace,".").concat(c.id))),e.abrupt("break",15);case 13:return n.push(Object(k.d)("mirror.".concat(c.namespace),c.value)),e.abrupt("break",15);case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(2),r.e(e.t1);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=27,Promise.all(n);case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))).apply(this,arguments)}window.deleteAllState=Object(v.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,Object(k.c)();case 3:return e.t1=e.sent.map((function(e){return Object(k.a)(e)})),e.next=6,e.t0.all.call(e.t0,e.t1);case 6:for(t=e.sent,n=localStorage.length-1;n>=0;n--)(r=localStorage.key(n)).startsWith("__GITHUB")&&delete localStorage[r];return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))),window.__idb={get:k.b,set:k.d,keys:k.c,del:k.a},window.__idb.getAll=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,window.__idb.keys();case 3:return e.t1=e.sent.map(function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,window.__idb.get(t);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",e.t0.all.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));var B=null,G=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=2;break}return e.abrupt("return",B);case 2:return e.next=4,n.e(3).then(n.bind(null,286)).then((function(e){return new(0,e.Octokit)({auth:Z.token})}));case 4:return e.abrupt("return",B=e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z={sha:{get latest(){return localStorage.__GITHUB_GIST_LATEST_SHA},set latest(e){localStorage.__GITHUB_GIST_LATEST_SHA=e},get current(){return localStorage.__GITHUB_GIST_CURRENT_SHA},set current(e){localStorage.__GITHUB_GIST_CURRENT_SHA=e}},get token(){return localStorage.__GITHUB_TOKEN},set token(e){localStorage.__GITHUB_TOKEN=e},get username(){return localStorage.__GITHUB_USERNAME},set username(e){localStorage.__GITHUB_USERNAME=e},get gist_id(){return localStorage.__GITHUB_GIST_ID},set gist_id(e){localStorage.__GITHUB_GIST_ID=e}};function P(){return Boolean(Z.token)}function z(e){return U.apply(this,arguments)}function U(){return(U=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.set.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,G();case 4:return n=e.sent,r=function(e){return n.request("PATCH /gists/{gist_id}",{gist_id:Z.gist_id,description:"Mirror synchronisation (https://oliverbalfour.github.io/Mirror/)",files:F(e)})},e.next=8,r(t).catch(function(){var e=Object(v.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.error(n),e.next=3,Promise.all(t.set.map((function(e){return r({set:[e]})}))).catch(console.error);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.next=10,ue();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t,n={},r=Object(x.a)(e.set);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=W(a);switch(a.type){case"delete":n[c]=null;break;case"add":case"edit":var i=K(a.object);n[c]={filename:c,content:i};break;case"param":n[c]={filename:c,content:JSON.stringify(a.value)}}}}catch(o){r.e(o)}finally{r.f()}return n}function W(e){return J(e.namespace,e.object?e.object.id:null)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"cards"===e?"".concat(t,".md"):t?"".concat(e,".").concat(t,".md"):"".concat(e,".md")}function $(e){var t=e.split(".");return 2===t.length?-1===xe.indexOf(t[0])?["cards",t[0]]:[t[0]]:[t[0],t[1]]}function K(e){var t=["description"],n=[];for(var r in e)if(-1===t.indexOf(r)){var a="time"===r?new Date(e[r]).getTime():JSON.stringify(e[r]);n.push("".concat(r,": ").concat(a))}var c="---\n".concat(n.join("\n"),"\n---\n");return e.description&&(c+=e.description),c}function q(e){var t={},n=e.split("---"),r=Object(s.a)(n,3),a=r[0],c=r[1],i=r[2];return c?(c.split("\n").filter((function(e){return e.trim().length})).forEach((function(e){var n=e.split(":"),r=Object(w.a)(n),a=r[0],c=r.slice(1).join(":");t[a]=JSON.parse(c.trimStart())})),i.trim().length&&(t.description=i.trim()),t):JSON.parse(a)}function V(){return(V=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:return Z.sha.latest=e.sent,e.next=5,ee("__logged_in",!1);case 5:if(e.t0=e.sent.status,t=404!==e.t0,console.log("Logging in. Has "+(t?"":"not ")+"logged in before."),n={},!t){e.next=16;break}return e.next=12,X();case 12:n=e.sent,console.log("Finished loading and caching remote state."),e.next=25;break;case 16:return e.next=18,ne("__logged_in","true");case 18:return e.t1=Q,e.next=21,C();case 21:return e.t2=e.sent,e.next=24,(0,e.t1)(e.t2);case 24:console.log("Finished writing local state to remote.");case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,C();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:console.log("Finished force pushing local state to remote.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:if(Z.sha.latest=e.sent,Z.sha.latest!==Z.sha.current){e.next=6;break}return console.log("No state updates required"),e.abrupt("return",{});case 6:return e.next=8,be();case 8:return t=e.sent,n=he(t),e.next=12,N(n);case 12:return console.log("Updated local state: ".concat((Z.sha.current||"none").substring(0,10),"..").concat(Z.sha.latest.substring(0,10))),Z.sha.current=Z.sha.latest,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,c,i,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Ee,r=Object(x.a)(xe);try{for(r.s();!(a=r.n()).done;)c=a.value,n.param(c,t[c],null)}catch(s){r.e(s)}finally{r.f()}i=Object(x.a)(ke);try{for(i.s();!(o=i.n()).done;)for(l in u=o.value,t[u])n.add(u,t[u][l])}catch(s){i.e(s)}finally{i.f()}z(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(v.a)(h.a.mark((function e(t){var n,r,a,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],r="https://gist.githubusercontent.com/"+"".concat(Z.username,"/").concat(Z.gist_id,"/raw/").concat(Z.sha.latest,"/").concat(t),e.next=4,fetch(r);case 4:if(a=e.sent,!n){e.next=9;break}return e.abrupt("return",q(a.text()));case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(v.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.a)({},t,{filename:t,content:n}),e.next=3,G();case 3:return a=e.sent,e.next=6,a.request("PATCH /gists/{gist_id}",{gist_id:Z.gist_id,files:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(v.a)(h.a.mark((function e(t){var n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,e.prev=1,e.next=4,ee(J(t,n));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ie(){return oe.apply(this,arguments)}function oe(){return(oe=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return t=e.sent,e.next=5,t.request("GET /gists/{gist_id}/commits",{gist_id:Z.gist_id,per_page:1});case 5:return n=e.sent,e.abrupt("return",n.data[0].version);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:Z.sha.current=Z.sha.latest=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return de.apply(this,arguments)}function de(){return(de=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c,i,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,n=Z.sha.current,r=[],a=1;case 6:if(!(a<100)){e.next=34;break}return e.next=9,t.request("GET /gists/{gist_id}/commits",{gist_id:Z.gist_id,per_page:100,page:a});case 9:if(0!==(c=e.sent.data).length){e.next=12;break}return e.abrupt("break",34);case 12:i=Object(x.a)(c),e.prev=13,i.s();case 15:if((o=i.n()).done){e.next=23;break}if(u=o.value,l=u.version,n!==l){e.next=20;break}return e.abrupt("break",23);case 20:r.push(l);case 21:e.next=15;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),i.e(e.t0);case 28:return e.prev=28,i.f(),e.finish(28);case 31:a++,e.next=6;break;case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,null,[[13,25,28,31]])})))).apply(this,arguments)}function me(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return n=e.sent,e.next=5,n.request("GET /gists/{gist_id}/{sha}",{gist_id:Z.gist_id,sha:t});case 5:return r=e.sent,e.abrupt("return",r.data.files);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return pe.apply(this,arguments)}function pe(){return(pe=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:t=e.sent,n={},r=t.length;case 5:if(!(r-- >0)){e.next=19;break}return e.next=8,me(t[r]);case 8:a=e.sent,e.t0=h.a.keys(a);case 10:if((e.t1=e.t0()).done){e.next=17;break}if("__logged_in"!==(c=e.t1.value)){e.next=14;break}return e.abrupt("continue",10);case 14:n[c]=a[c].content,e.next=10;break;case 17:e.next=5;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(we,n.split(".")[0])){var r=void 0;try{r=q(e[n])}catch(l){console.error(l);continue}var a,c=$(n),i=t,o=Object(x.a)(c.slice(0,-1));try{for(o.s();!(a=o.n()).done;){var u=a.value;i[u]=i[u]||{},i=i[u]}}catch(s){o.e(s)}finally{o.f()}i[c[c.length-1]]=r}return t}function ve(){if(window.confirm("Are you sure you want to log out? All your state will be saved locally and on GitHub, but it will no longer synchronise.")){for(var e=localStorage.length-1;e>=0;e--){var t=localStorage.key(e);t.startsWith("__GITHUB")&&delete localStorage[t]}window.location.reload()}}var ge=n(85),Oe=n(88),Ee=function(){function e(){Object(ge.a)(this,e),this.set=[],this.inv=[]}return Object(Oe.a)(e,[{key:"add",value:function(e,t){return this.set.push({type:"add",namespace:e,object:t}),this.inv.push({type:"delete",namespace:e,id:t.id}),this}},{key:"edit",value:function(e,t,n){return this.set.push({type:"edit",namespace:e,object:t}),this.inv.push({type:"edit",namespace:e,object:n}),this}},{key:"delete",value:function(e,t,n){return this.set.push({type:"delete",namespace:e,id:t}),this.inv.push({type:"add",namespace:e,object:n}),this}},{key:"param",value:function(e,t,n){return this.set.push({type:"param",namespace:e,value:t}),this.inv.push({type:"param",namespace:e,value:n}),this}},{key:"concat",value:function(e){for(var t,n,r=e.inv.length-1;r>=0;r--)for(var a=this.set.length-1;a>=0;a--)Object(j.p)(e.inv[r],this.set[a])&&(e.inv.splice(r,1),e.set.splice(r,1),this.inv.splice(a,1),this.set.splice(a,1));(t=this.set).push.apply(t,Object(f.a)(e.set)),(n=this.inv).push.apply(n,Object(f.a)(e.inv));for(var c=[],i=this.set.length-1;i>=0;i--){var o=ye(this.set[i]);-1!==c.indexOf(o)?this.set.splice(i,1):c.push(o)}return this}},{key:"concatSimple",value:function(e){var t,n;return(t=this.set).push.apply(t,Object(f.a)(e.set)),(n=this.inv).push.apply(n,Object(f.a)(e.inv)),this}},{key:"editAll",value:function(e,t,n){for(var r in t)this.edit(e,t[r],n[r]);return this}},{key:"editAllByID",value:function(e,t,n,r){var a,c=Object(x.a)(n);try{for(c.s();!(a=c.n()).done;){var i=a.value;this.edit(e,t[i],r[i])}}catch(o){c.e(o)}finally{c.f()}return this}},{key:"deleteAllByID",value:function(e,t,n){var r,a=Object(x.a)(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;this.delete(e,c,n[c])}}catch(i){a.e(i)}finally{a.f()}return this}},{key:"invert",value:function(){var t=new e;return t.set=this.inv,t.inv=this.set,t}}]),e}(),ye=function(e){switch(e.type){case"add":case"edit":return e.object.id;case"delete":return e.id;case"param":return e.namespace}};Ee.prototype.commit=function(){Ae(this),je.editSetHistory.past.push(this),je.editSetHistory.past.length>20&&je.editSetHistory.past.shift(),je.editSetHistory.future=[]};var je={editSetHistory:{past:[],future:[]},undo:{allowed:function(){return je.editSetHistory.past.length>0},commit:function(){var e=je.editSetHistory.past.pop();je.editSetHistory.future.unshift(e),je.editSetHistory.future.length>20&&je.editSetHistory.future.pop(),Ae(e.invert())}},redo:{allowed:function(){return je.editSetHistory.future.length>0},commit:function(){var e=je.editSetHistory.future.shift();je.editSetHistory.past.push(e),je.editSetHistory.past.length>20&&je.editSetHistory.past.shift(),Ae(e)}}},we={cards:"cards",columns:"columns",tabs:"tabs",tabOrder:"tabOrder",starredZettels:"starredZettels"},xe=["tabOrder","starredZettels"],ke=["cards","columns","tabs"];function Ce(){return(Ce=Object(v.a)(h.a.mark((function e(){var t,n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(r.length>0&&void 0!==r[0])||r[0],e.next=3,C(t);case 3:if(n=e.sent,!P()){e.next=11;break}return e.t0=b.a,e.t1=Object(b.a)({},n),e.next=9,X();case 9:e.t2=e.sent,n=(0,e.t0)(e.t1,e.t2);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(v.a)(h.a.mark((function e(t){var n,r,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,e.next=3,M(t,n);case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:return e.abrupt("return",ae(t,n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se,De=new Ee,Ie=null,Ne=[],Ae=function(e){return new Promise((function(t,n){var r=[L(e)];P()?Ie?(De.concat(e),Ne.push(t)):(r.push(z(e)),Ie=setTimeout((function(){z(De),Ie=null,De=new Ee,Ne.forEach((function(e){return e()})),Ne=[]}),5e3),Promise.all(r).then(t)):Promise.all(r).then(t)}))},Me=function(){return fetch("./initial-state.json").then((function(e){return e.json()})).catch((function(e){return alert("Could not load initial state. Perhaps you forgot a trailing slash in the URL? Error: "+e)}))},He=Object(g.b)("mirror/SET_STATE"),Le=Object(g.b)("mirror/OVERWRITE_STATE"),Re=Object(g.b)("kanban/TRANSFER_CARD"),Be=Object(g.b)("kanban/REORDER_CARD"),Ge=Object(g.b)("kanban/ADD_CARD"),Ze=Object(g.b)("kanban/EDIT_CARD_CONTENT"),Pe=Object(g.b)("kanban/EDIT_CARD"),ze=Object(g.b)("kanban/DELETE_CARD"),Ue=Object(g.b)("kanban/ADD_COLUMN"),Fe=Object(g.b)("kanban/DELETE_COLUMN"),We=Object(g.b)("kanban/RENAME_COLUMN"),Je=Object(g.b)("kanban/MOVE_COLUMN"),$e=Object(g.b)("kanban/ARCHIVE_ALL_COLUMN"),Ke=Object(g.b)("kanban/SORT_COLUMN_BY_CARD_TIME_ATTRIBUTE"),qe=Object(g.b)("kanban/ADD_TAB"),Ve=Object(g.b)("kanban/DELETE_TAB"),Ye=Object(g.b)("kanban/RENAME_TAB"),Xe=Object(g.b)("kanban/MOVE_TAB"),Qe=Object(g.b)("zettelkasten/ADD_ZETTEL"),et=Object(g.b)("zettelkasten/EDIT_ZETTEL"),tt=Object(g.b)("zettelkasten/DELETE_ZETTEL"),nt=Object(g.b)("zettelkasten/TOGGLE_STARRED"),rt=Object(g.c)("zettelkasten/LOAD_ZETTEL",function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te("cards",t);case 2:if(r=e.sent){e.next=7;break}return e.abrupt("return",n.rejectWithValue(t));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),at={getColumnsInTabs:function(e){return Object(j.k)(e.tabs,(function(t){return t.columns.map((function(t){return e.columns[t]})).map((function(t){return Object(b.a)(Object(b.a)({},t),{},{items:t.items.map((function(t){return e.cards[t]}))})}))}))},columns:function(e){return e.columns},tabs:function(e){return e.tabs},tabOrder:function(e){return e.tabOrder},cards:function(e){return e.cards},archivedCards:function(e){return Object.values(e.cards).filter((function(e){return-1!==Object.keys(e).indexOf("archived")}))},activeCards:function(e){return Object.values(e.cards).filter((function(e){return-1===Object.keys(e).indexOf("archived")}))},starredZettels:function(e){return e.starredZettels?e.starredZettels:[]},cardsByTab:function(e){return Object(j.k)(e.tabs,(function(t){return t.columns.flatMap((function(t){return e.columns[t].items}))}))},loadingZettel:function(e){return e.loadingZettel}},ct=Object(j.e)({loading:!0},(Se={},Object(m.a)(Se,He,(function(e,t){return t.payload})),Object(m.a)(Se,Le,(function(e,t){if("{}"===JSON.stringify(t.payload))return e;var n=Object(j.q)(e);return Object(j.f)(n,t.payload),n})),Object(m.a)(Se,O.ActionTypes.UNDO,(function(e,t){return je.undo.commit(),e})),Object(m.a)(Se,O.ActionTypes.REDO,(function(e,t){return je.redo.commit(),e})),Object(m.a)(Se,Re,(function(e,t){var n=(new Date).getTime(),r=t.payload,a=r.srcColID,c=r.dstColID,i=r.srcIndex,o=r.dstIndex;if(a===c&&i===o)return e;var u=e.columns[a].items[i],l=Object(y.a)(e,(function(e){e.columns[a].items.splice(i,1),e.cards[u].moved=n,e.columns[a].edited=n,e.columns[c].edited=n,e.columns[c].items.splice(o,0,u)}));return(new Ee).edit(we.cards,l.cards[u],e.cards[u]).edit(we.columns,l.columns[a],e.columns[a]).edit(we.columns,l.columns[c],e.columns[c]).commit(),l})),Object(m.a)(Se,Be,(function(e,t){var n=t.payload,r=n.colID,a=n.srcIndex,c=n.dstIndex;if(a===c)return e;var i=(new Date).getTime(),o=e.columns[r].items[a],u=Object(y.a)(e,(function(e){e.columns[r].edited=i,e.columns[r].items.splice(a,1),e.cards[o].moved=i,e.columns[r].items.splice(c,0,o)}));return(new Ee).edit(we.columns,u.columns[r],e.columns[r]).edit(we.cards,u.cards[o],e.cards[o]).commit(),u})),Object(m.a)(Se,Ge,(function(e,t){var n=t.payload,r=n.content,a=n.colID,c=Object(j.h)(),i=(new Date).getTime(),o={id:c,content:r,type:0,created:i,edited:i,moved:i},u=Object(y.a)(e,(function(e){e.cards[c]=o,e.columns[a].items.unshift(c),e.columns[a].edited=i}));return(new Ee).add(we.cards,o).edit(we.columns,u.columns[a],e.columns[a]).commit(),u})),Object(m.a)(Se,Fe,(function(e,t){var n=t.payload,r=(new Date).getTime(),a=Object.values(e.tabs).map((function(e){return-1!==e.columns.indexOf(t.payload)})).indexOf(!0),c=Object(y.a)(e,(function(e){a>=0&&(e.tabs[e.tabOrder[a]].edited=r),e.columns[n].items.forEach((function(t){return delete e.cards[t]})),Object.values(e.tabs).forEach((function(e){return Object(j.g)(e.columns,n)})),delete e.columns[n]}));return(new Ee).editAll(we.tabs,c.tabs,e.tabs).deleteAllByID(we.cards,e.columns[n].items,e.cards).commit(),c})),Object(m.a)(Se,We,(function(e,t){var n=t.payload,r=n.colID,a=n.name;if(e.columns[r].name===a)return e;var c=Object(y.a)(e,(function(e){e.columns[r].name=a,e.columns[r].edited=(new Date).getTime()}));return(new Ee).edit(we.columns,c.columns[r],e.columns[r]).commit(),c})),Object(m.a)(Se,Ze,(function(e,t){var n=t.payload,r=n.cardID,a=n.content;if(e.cards[r].content===a)return e;var c=Object(y.a)(e,(function(e){e.cards[r].content=a,e.cards[r].edited=(new Date).getTime()}));return(new Ee).edit(we.cards,c.cards[r],e.cards[r]).commit(),c})),Object(m.a)(Se,ze,(function(e,t){var n=t.payload,r=(new Date).getTime(),a=[],c=Object(y.a)(e,(function(e){Object.values(e.columns).forEach((function(e){Object(j.g)(e.items,n)&&(e.edited=r,a.push(e.id))})),delete e.cards[t.payload]}));return(new Ee).delete(we.cards,n,e.cards[n]).editAllByID(we.columns,c.columns,a,e.columns).commit(),c})),Object(m.a)(Se,Ue,(function(e,t){var n=t.payload,r=n.tabID,a=n.name,c=Object(j.h)(),i=(new Date).getTime(),o={id:c,items:[],name:a,created:i,edited:i},u=Object(y.a)(e,(function(e){e.columns[c]=o,e.tabs[r].columns.push(c),e.tabs[r].edited=i}));return(new Ee).add(we.columns,o).edit(we.tabs,u.tabs[r],e.tabs[r]).commit(),u})),Object(m.a)(Se,Pe,(function(e,t){var n=t.payload,r=n.card,a=n.colID;if(Object(j.p)(e.cards[r.id],r))return e;var c=(new Date).getTime(),i=Object.keys(e.columns).filter((function(t){return-1!==e.columns[t].items.indexOf(r.id)}))[0],o=Object(y.a)(e,(function(e){e.cards[r.id]=JSON.parse(JSON.stringify(t.payload.card)),e.cards[r.id].edited=c,i!==a&&(Object(j.g)(e.columns[i].items,r.id),e.columns[a].items.unshift(r.id),e.columns[i].edited=e.columns[a].edited=c)}));return(new Ee).edit(we.cards,o.cards[r.id],e.cards[r.id]).concatSimple(function(){var t=new Ee;return i!==a&&(t.edit(we.columns,o.columns[i],e.columns[i]),t.edit(we.columns,o.columns[a],e.columns[a])),t}()).commit(),o})),Object(m.a)(Se,Ve,(function(e,t){var n=t.payload,r=[],a=e.tabs[e.tabOrder[n]],c=Object(y.a)(e,(function(e){for(;a.columns.length;){var t=a.columns[0];r.push.apply(r,Object(f.a)(e.columns[t].items)),e.columns[t].items.forEach((function(t){return delete e.cards[t]})),delete e.columns[t],a.columns.shift()}delete e.tabs[a.id],e.tabOrder.splice(n,1)}));return(new Ee).deleteAllByID(we.cards,r,e.cards).deleteAllByID(we.columns,a.columns,e.columns).delete(we.tabs,a.id,a).param(we.tabOrder,c.tabOrder,e.tabOrder).commit(),c})),Object(m.a)(Se,qe,(function(e,t){var n=Object(j.h)(),r={name:t.payload,id:n,columns:[],created:(new Date).getTime()},a=Object(y.a)(e,(function(e){e.tabs[n]=r,e.tabOrder.push(n)}));return(new Ee).add(we.tabs,r).param(we.tabOrder,a.tabOrder,e.tabOrder).commit(),a})),Object(m.a)(Se,Ye,(function(e,t){var n=t.payload,r=n.tabID,a=n.name;if(e.tabs[r].namd===a)return e;var c=Object(y.a)(e,(function(e){e.tabs[r].name=a,e.tabs[r].edited=(new Date).getTime()}));return(new Ee).edit(we.tabs,c.tabs[r],e.tabs[r]).commit(),c})),Object(m.a)(Se,Je,(function(e,t){var n=Object(s.a)(t.payload,3),r=n[0],a=n[1],c=n[2];if(r===a)return e;var i=e.tabOrder[c],o=e.tabs[i].columns[r],u=Object(y.a)(e,(function(e){e.tabs[i].columns.splice(r,1),e.tabs[i].columns.splice(a,0,o),e.tabs[i].edited=(new Date).getTime()}));return(new Ee).edit(we.tabs,u.tabs[i],e.tabs[i]).commit(),u})),Object(m.a)(Se,Xe,(function(e,t){var n=Object(s.a)(t.payload,2),r=n[0],a=n[1];if(r===a)return e;var c=e.tabOrder[r];if(a<0||a>=e.tabs.length)return e;var i=Object(y.a)(e,(function(e){e.tabOrder.splice(r,1),e.tabOrder.splice(a,0,c)}));return(new Ee).param(we.tabOrder,i.tabOrder,e.tabOrder).commit(),i})),Object(m.a)(Se,$e,(function(e,t){var n=t.payload;if(0===e.columns[n].items.length)return e;var r=(new Date).getTime(),a=Object(y.a)(e,(function(e){e.columns[n].items.forEach((function(t){var a=e.cards[t];a.moved=a.edited=a.archived=r,a.archivedFromColID=n})),e.columns[n].items=[],e.columns[n].edited=r}));return(new Ee).editAllByID(we.cards,a.cards,e.columns[n].items,e.cards).edit(we.columns,a.columns[n],e.columns[n]).commit(),a})),Object(m.a)(Se,Qe,(function(e,t){var n=t.payload.zettel,r=n.id||Object(j.h)(),a=(new Date).getTime(),c=Object(b.a)({id:r,type:1,created:a,edited:a,moved:a},n),i=Object(y.a)(e,(function(e){e.cards[i]=c}));return(new Ee).add(we.cards,c).commit(),i})),Object(m.a)(Se,et,(function(e,t){var n=t.payload.zettel;if(Object(j.p)(e.cards[n.id],n))return e;var r=(new Date).getTime();if(-1===Object.keys(e.cards).indexOf(n.id))return e;var a=Object(y.a)(e,(function(e){e.cards[n.id]=n,e.cards[n.id].edited=r}));return(new Ee).edit(we.cards,n,e.cards[n.id]).commit(),a})),Object(m.a)(Se,tt,(function(e,t){var n=t.payload,r=Object(y.a)(e,(function(e){Object(j.g)(e.starredZettels,t.payload),delete e.cards[n]}));return new Ee.param(we.starredZettels,r.starredZettels,e.starredZettels).delete(we.cards,n,e.cards[n]).commit(),r})),Object(m.a)(Se,nt,(function(e,t){var n=t.payload,r=Object(y.a)(e,(function(e){e.starredZettels||(e.starredZettels=[]),-1===e.starredZettels.indexOf(n)?e.starredZettels.push(n):Object(j.g)(e.starredZettels,n)}));return(new Ee).param(we.starredZettels,r.starredZettels,e.starredZettels).commit(),r})),Object(m.a)(Se,Ke,(function(e,t){var n=t.payload,r=Object(y.a)(e,(function(e){e.columns[n].items.sort((function(t,n){var r=new Date(e.cards[n].time||null).getTime(),a=new Date(e.cards[t].time||null).getTime();return 0===a&&0===r?0:0===a?1:0===r?-1:a-r}))}));return(new Ee).edit(we.columns,r.columns[n],e.columns[n]).commit(),r})),Object(m.a)(Se,rt.pending,(function(e,t){return Object(y.a)(e,(function(e){return e.loadingZettel=!0}))})),Object(m.a)(Se,rt.fulfilled,(function(e,t){return Object(y.a)(e,(function(e){e.cards[t.payload.id]=t.payload,delete e.loadingZettel}))})),Object(m.a)(Se,rt.rejected,(function(e,t){return Object(y.a)(e,(function(e){return e.loadingZettel=t.payload}))})),Se)),it=[He.type,rt.pending.type,rt.fulfilled.type,rt.rejected.type],ot=E()(ct,{limit:20,neverSkipReducer:!0,filter:function(e,t,n){return-1===it.indexOf(e.type)}}),ut=n(244),lt=n(260),st=n(245),dt=n(246),mt=n(68),ft=n.n(mt),bt=n(149),pt=n(266),ht=function(e){var t=e.map,n=e.children,r=i.useState(null),a=Object(s.a)(r,2),c=a[0],o=a[1],u=function(){return o(null)};return i.createElement(i.Fragment,null,i.createElement(bt.a,{anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:u},Object.entries(t).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return i.createElement(pt.a,{key:n,onClick:function(){u(),r()}},n)}))),i.cloneElement(n,{onClick:function(e){return o(e.currentTarget)}}))},vt=function(e){var t=e.show,n=e.children;return i.createElement("div",{hidden:!t,style:{height:"calc(100% - 48px)"}},t&&n)},gt=function(e){var t=e.tabs,n=e.render,r=e.index,a=e.setIndex,c=e.addTab,o=e.renameTab,u=e.deleteTab,l=e.moveTab,s=function(e,n){return n>=0&&n<t.length&&a(n)},d=function(){return i.createElement("div",{style:{flexGrow:1}})};return i.createElement("div",{style:{flex:1}},i.createElement(ut.a,{position:"static",style:{backgroundColor:"white",zIndex:2,position:"relative"}},i.createElement(lt.a,{value:r,onChange:s,indicatorColor:"primary",textColor:"primary"},t.map((function(e){return i.createElement(st.a,{label:e,key:e})})),i.createElement(d,null),i.createElement(ht,{map:{"Add tab":function(){return c()},"Rename tab":function(){return o(r)},"Delete tab":function(){return u(r)},"Move tab left":function(){l([r,r-1]),s(0,r-1)},"Move tab right":function(){l([r,r+1]),s(0,r+1)}}},i.createElement(dt.a,null,i.createElement(ft.a,null))))),t.map((function(e,t){return i.createElement(vt,{show:r===t,key:e},r===t&&n(t))})))},Ot=n(250),Et=n(140),yt=n.n(Et),jt=n(102),wt=n.n(jt),xt=n(264),kt=n(254),Ct=n(251),Tt=n(255),_t=n(252),St=n(206),Dt=n(263),It=n(268),Nt=n(261),At=n(256),Mt=Object(g.a)({reducer:function(e,t){return(t.type!==O.ActionTypes.UNDO||je.undo.allowed())&&(t.type!==O.ActionTypes.REDO||je.redo.allowed())?-1!==it.indexOf(t.type)?Object(b.a)(Object(b.a)({},e),{},{present:ct(e.present,t)}):ot(e,t):e}});(function(){return Ce.apply(this,arguments)})(!1).then((function(e){Mt.dispatch(He(e))}));try{document.addEventListener("keyup",(function(e){-1===["input","textarea"].indexOf(document.activeElement.tagName.toLowerCase())&&(e.ctrlKey&&90===e.which&&!e.shiftKey?Mt.dispatch(O.ActionCreators.undo()):(e.ctrlKey&&e.shiftKey&&90===e.which||e.ctrlKey&&89===e.which)&&Mt.dispatch(O.ActionCreators.redo()))}))}catch(nr){}var Ht=Mt,Lt=function(e){return e.present},Rt={boards:Object(j.k)(at,(function(e){return function(t){return e(Lt(t))}}))},Bt=n(269),Gt=n(89),Zt=i.lazy((function(){return Promise.all([n.e(5),n.e(6)]).then(n.bind(null,285))})),Pt=function(e){var t=e.cards?Object(j.m)(e.source,e.cards):e.source;return-1===t.indexOf("$$")?i.createElement(Gt.a,Object.assign({},e,{source:t})):i.createElement(i.Suspense,{fallback:i.createElement("span",null,"Loading...")},i.createElement(Zt,Object.assign({},e,{source:t})))},zt=n(249),Ut=n(117),Ft=n(137),Wt=function(e){var t=e.value,n=e.setValue,r=e.autoFocus,a=void 0!==r&&r,c=e.addNote,o=e.rows,u=e.rowsMax,l=i.useRef(null),s=Object(d.d)(Rt.boards.cards);return i.useEffect((function(){var e=new Ft.TextareaEditor(l.current),t={context:function(e){return e.indexOf("[[")>=0},match:/\[\[([A-Za-z0-9_ -]+)$/,search:function(e,t){return t([].concat(Object(f.a)(Object(j.o)(e,s)),[0]))},cache:!0,template:function(e){return 0===e?c?"<em>Add note</em>":"":Object(j.i)(s[e])},replace:function(e){if(0===e&&c){var t=Object(j.h)();return window.setTimeout((function(){return c(t)}),0),"[[".concat(t,"]]")}return"[[".concat(e,"]]")}},n=new Ut.Textcomplete(e,[t],{dropdown:{rotate:!0,maxCount:10}});return function(){n.destroy(),delete window.__addNote}}),[]),i.createElement(Dt.a,{margin:"dense",fullWidth:!0,variant:"outlined",autoFocus:a,multiline:!0,rows:o,rowsMax:u,value:t,onChange:function(e){return n(e.target.value)},inputProps:{ref:l}})},Jt=function(e){var t=e.card,n=e.setCard,r=i.useState(!1),a=Object(s.a)(r,2),c=a[0],o=a[1],u=Object(d.d)(Rt.boards.cards);if(!c&&"string"!==typeof t.description)return i.createElement(bn,{onClick:function(){return o(!0)}},"Add description");var l=function(e){c?27===e.which&&(o(!1),e.stopPropagation()):document.activeElement===e.target&&-1!==[32,13].indexOf(e.which)&&setTimeout((function(){return o(!0)}),0)};return c?i.createElement(i.Fragment,null,i.createElement(It.a,{className:"custom-label"},"Description"),i.createElement(zt.a,{onClickAway:function(){return o(!1)}},i.createElement("div",{style:{width:"100%",height:"100%"},onKeyDown:l},i.createElement(Wt,{value:t.description,setValue:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{description:e.length?e:void 0}))},autoFocus:!0,rows:6,rowsMax:24})))):i.createElement("div",{style:{marginTop:8,overflow:"auto"}},i.createElement(It.a,{className:"custom-label",onClick:function(){return o(!0)}},"Description"),i.createElement(Pt,{source:t.description,cards:u,tabIndex:"0",onKeyDown:l,className:"markdown-selectable markdown",onDoubleClick:function(){return o(!0)}}))},$t=function(e){var t=e.card;if(t.description){var n=Object(j.d)(t);return i.createElement(fn,{label:null,title:n,icon:i.createElement(wt.a,null)})}return null},Kt=n(138),qt=n.n(Kt),Vt=n(25),Yt=n(258),Xt=n(147),Qt=n(253),en=n(148),tn=n(271),nn=n(103),rn=n.n(nn);tn.a.weekStart=1;var an=function(e){var t=e.card,n=e.setCard,r=function(e){return n(Object(b.a)(Object(b.a)({},t),{},{time:e}))};return t.time?i.createElement("div",{style:{marginTop:10}},i.createElement(It.a,{className:"custom-label"},"Date & time"),i.createElement(Vt.a,{utils:Xt.a,locale:tn.a},i.createElement(Yt.a,{value:new Date(t.time),onChange:function(e){return r(e.getTime())},showTodayButton:!0,format:"MMMM do hh:mm aaa"})),i.createElement(dt.a,{size:"small",style:{marginLeft:10},onClick:function(){return r(null)}},i.createElement(rn.a,null))):i.createElement(bn,{onClick:function(){return r(Object(Qt.a)().getTime())}},"Add date & time")},cn=function(e){var t=e.card;return t.time?i.createElement(fn,{icon:i.createElement(qt.a,null),label:Object(j.n)(t.time),title:Object(en.a)(new Date(t.time),"dd/MM/yyyy hh:mmaaa"),className:Object(j.r)(new Date(t.time).getTime())}):null},on=n(139),un=n.n(on),ln=function(e){var t=e.card,n=e.setCard,r=i.useState(t.duration?sn(t.duration):""),a=Object(s.a)(r,2),c=a[0],o=a[1],u=i.useRef(null),l=function(e){var r=dn(e);o(e),"number"===typeof r&&n(Object(b.a)(Object(b.a)({},t),{},{duration:r}))};if(!t.duration)return i.createElement(bn,{onClick:function(){l("1h"),setTimeout((function(){try{u.current.focus()}catch(nr){}}),0)}},"Add duration");var d=function(e){return""!==e&&null!==e&&null===dn(e)};return i.createElement("div",{style:{marginTop:10}},i.createElement(It.a,{className:"custom-label"},"Duration"),i.createElement(Dt.a,{style:{width:201,marginTop:4},ref:u,margin:"dense",fullWidth:!0,value:c,error:d(c),helperText:d(c)?"Invalid format. Examples: 2d 1h 30m, 5m":null,onChange:function(e){return l(e.target.value)}}),i.createElement(dt.a,{size:"small",style:{marginLeft:10},onClick:function(){return n(Object(b.a)(Object(b.a)({},t),{},{duration:null}))}},i.createElement(rn.a,null)))},sn=function(e){if("string"===typeof e)return e;var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),r=Math.floor(e%3600/60);return 0===t&&0===n&&0===r?"0m":((t?t+"d ":"")+(n?n+"h ":"")+(r?r+"m":"")).trim()},dn=function(e){if("number"===typeof e)return e;var t=/^(\d+d|\d*\.\d+d)?\s*(\d+h|\d*\.\d+h)?\s*(\d+m|\d*\.\d+m)?$/m.exec(e);if(!t||4!==t.length||!t.slice(1).filter((function(e){return e})).length)return null;var n=function(e){return parseFloat(e.substring(0,e.length-1))};return 86400*n((t=t.slice(1))[0]||"0d")+3600*n(t[1]||"0h")+60*n(t[2]||"0m")},mn=function(e){var t=e.card;if(t.duration){var n=sn(t.duration),r="Duration: ".concat(n),a=i.createElement(un.a,null);return i.createElement(fn,{label:n,title:r,icon:a})}return null},fn=function(e){var t=e.icon,n=e.label,r=e.title,a=e.className;return i.createElement(Bt.a,{size:"small",icon:t,label:n,title:r,classes:n&&n.length?null:{label:"attribute-label"},className:"attribute-indicator "+(a||""),variant:"outlined"})},bn=function(e){return i.createElement("div",{className:"attribute-header"},i.createElement(St.a,Object.assign({variant:"outlined",color:"primary",size:"small"},e)))},pn=function(e){var t=e.open,n=e.respond,r=e.title,a=e.subtitle,c=e.labels,o=void 0===c?["Cancel","OK"]:c;return i.createElement(xt.a,{open:t,onClose:function(){return n(null)}},i.createElement(kt.a,null,r),i.createElement(Ct.a,null,i.createElement(Tt.a,null,a)),i.createElement(_t.a,null,i.createElement(St.a,{onClick:function(){return n(!1)},color:"primary"},o[0]),i.createElement(St.a,{onClick:function(){return n(!0)},color:"primary",variant:"contained",autoFocus:!0},o[1])))},hn=function(e){var t=e.open,n=e.respond,r=e.title,a=e.subtitle,c=e.labels,o=void 0===c?["Cancel","OK"]:c,u=e.label,l=e.inputType,d=void 0===l?"text":l,m=e.placeholder,f=void 0===m?"":m,b=e.buttons,p=void 0===b?null:b,h=i.useState(f),v=Object(s.a)(h,2),g=v[0],O=v[1],E=function(e){n(e),O(f)};return i.createElement(xt.a,{open:t,onClose:function(){return E(null)}},i.createElement(kt.a,null,r),i.createElement(Ct.a,null,"string"===typeof a&&i.createElement(Tt.a,null,a),i.createElement(Dt.a,{autoFocus:!0,margin:"dense",fullWidth:!0,label:u,type:d,value:g,onChange:function(e){return O(e.target.value)}})),i.createElement(_t.a,null,p,i.createElement(St.a,{onClick:function(){return E(!1)},color:"primary"},o[0]),i.createElement(St.a,{onClick:function(){return E(g)},color:"primary",variant:"contained"},o[1])))},vn=function(e){var t=e.respond,n=e.card,o=Object(d.c)(),u=Object(d.d)((function(e){return Object.values(Lt(e).columns).filter((function(e){return-1!==e.items.indexOf(n.id)}))[0].id})),l=i.useState(u),m=Object(s.a)(l,2),p=m[0],h=m[1],v=i.useState(n),g=Object(s.a)(v,2),O=g[0],E=g[1],y=function(e){return E(Object(b.a)(Object(b.a)({},O),{},{content:e}))},w=Object(d.d)(Rt.boards.columns),x=Object(d.d)(Rt.boards.tabs),k=function(){t(),y(n.content)};return i.createElement(xt.a,{open:!0,onClose:function(){return k()},fullWidth:!0,maxWidth:"md",disableBackdropClick:JSON.stringify(O)!==JSON.stringify(n)},i.createElement(j.c,{shouldProtect:JSON.stringify(O)!==JSON.stringify(n)}),i.createElement(kt.a,null,"Edit card"),i.createElement(Ct.a,null,i.createElement(It.a,{id:"kanban/card-column",className:"custom-label"},"Column"),i.createElement(Nt.a,{labelId:"kanban/card-column",value:p,onChange:function(e){return h(e.target.value)}},Object.values(x).flatMap((function(e){return[i.createElement(At.a,{key:e.id},e.name)].concat(Object(f.a)(e.columns.map((function(e){return i.createElement(pt.a,{value:e,key:e},w[e].name)}))))}))),i.createElement(It.a,{id:"kanban/card-title",className:"custom-label"},"Title"),i.createElement(Dt.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:O.content,onChange:function(e){return y(e.target.value)}}),i.createElement(r.Edit,{card:O,setCard:E}),i.createElement(a.Edit,{card:O,setCard:E}),i.createElement(c.Edit,{card:O,setCard:E})),i.createElement(_t.a,null,i.createElement(St.a,{onClick:function(){o(Pe({card:O,colID:p})),o(ze(n.id)),k()}},"Delete"),i.createElement(St.a,{onClick:k,color:"primary"},"Cancel"),i.createElement(St.a,{onClick:function(){o(Pe({card:O,colID:p})),k()},color:"primary",variant:"contained"},"OK")))},gn=function(e){var t=e.open,n=e.respond;return i.createElement(xt.a,{open:t,onClose:n,fullWidth:!0},i.createElement(kt.a,null,"About Mirror"),i.createElement(Ct.a,null,i.createElement(Tt.a,null,"A free and open source personal task management and note taking app.",i.createElement("br",null),"Made by Oliver Balfour. \xa9 2020-2021.",i.createElement("br",null),"App icon is ",i.createElement("a",{href:"https://thenounproject.com/term/mirror/340140/"},"Mirror"),"\xa0 by Lastspark from ",i.createElement("a",{href:"http://thenounproject.com/"},"The Noun Project"),".")),i.createElement(_t.a,null,i.createElement(St.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},On=function(e){var t=e.open,n=e.respond,r=i.useState(""),a=Object(s.a)(r,2),c=a[0],o=a[1],u=i.useState(""),l=Object(s.a)(u,2),d=l[0],m=l[1],f=i.useState(""),b=Object(s.a)(f,2),p=b[0],h=b[1];return i.createElement(xt.a,{open:t,onClose:n,fullWidth:!0},i.createElement(kt.a,null,"Log in via GitHub"),i.createElement(Ct.a,null,i.createElement(Tt.a,null,i.createElement(Gt.a,{source:'To log in via GitHub for synchronisation,\n            [create a new token](https://github.com/settings/tokens/new) with\n            the `gist` permission and save it somewhere safe. Then, go to\n            [gist.github.com](https://gist.github.com) and create a new Gist\n            with any title and add one file, `main.md`, with any contents.\n            Then click "Create secret gist" and copy the gist ID from the URL.\n            Enter your token, gist ID and username below.'})),i.createElement(It.a,{className:"custom-label"},"GitHub Username"),i.createElement(Dt.a,{margin:"dense",fullWidth:!0,value:p,onChange:function(e){return h(e.target.value)},autoComplete:"username"}),i.createElement(It.a,{className:"custom-label"},"Gist ID"),i.createElement(Dt.a,{margin:"dense",fullWidth:!0,value:d,onChange:function(e){return m(e.target.value)},autoComplete:"off"}),i.createElement(It.a,{className:"custom-label"},"GitHub access token"),i.createElement(Dt.a,{margin:"dense",autoFocus:!0,fullWidth:!0,value:c,onChange:function(e){return o(e.target.value)},type:"password",autoComplete:"current-password"})),i.createElement(_t.a,null,i.createElement(St.a,{onClick:function(){return n(!1)},color:"primary"},"Cancel"),i.createElement(St.a,{onClick:function(){return n(c,d,p)},color:"primary",variant:"contained"},"Log in")))},En=function(e){var t=e.active,n=e.setActive,r=o.a.useState(!1),a=Object(s.a)(r,2),c=a[0],i=a[1],u=o.a.useState(!1),l=Object(s.a)(u,2),m=l[0],f=l[1],p=Object(d.c)(),h=Object(b.a)(Object(b.a)({"Submit feedback":function(){return window.open("mailto:".concat("leolalor1+mirrorsupport@googlemail.com"),"_blank")},About:function(){return i(!0)}},P()?{"Log out of GitHub":ve,"Force push to GitHub":Y}:{"Log in via GitHub":function(){return f(!0)}}),{},{"Clear saved state":function(){return"YES"===window.prompt("Delete all saved state? Pressing undo will fix this. Type YES to confirm","NO")&&window.deleteAllState()}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(ut.a,{color:"primary",style:{top:"auto",bottom:0}},o.a.createElement(Ot.a,{style:{minHeight:0}},o.a.createElement(lt.a,{value:t,onChange:function(e,t){return n(t)},TabIndicatorProps:{style:{backgroundColor:"white"}}},o.a.createElement(st.a,{label:o.a.createElement("div",null,o.a.createElement(yt.a,{style:{verticalAlign:"middle"}})," Boards")}),o.a.createElement(st.a,{label:o.a.createElement("div",null,o.a.createElement(wt.a,{style:{verticalAlign:"middle"}})," Notes")})),o.a.createElement("div",{style:{flexGrow:1}}),o.a.createElement(kn,null),o.a.createElement(ht,{map:h},o.a.createElement(dt.a,{edge:"end",color:"inherit"},o.a.createElement(ft.a,null))))),o.a.createElement(gn,{open:c,respond:function(){return i(!1)}}),o.a.createElement(On,{open:m,respond:function(e,t,n){f(!1),!1!==e&&(Z.token=e,Z.gist_id=t,Z.username=n,function(){return V.apply(this,arguments)}().then((function(e){return p(Le(e))})))}}))},yn=n(141),jn=n.n(yn),wn=n(142),xn=n.n(wn),kn=function(){var e=Object(d.c)();return i.createElement(i.Fragment,null,i.createElement(dt.a,{onClick:function(){return e(O.ActionCreators.undo())},color:"inherit",edge:"end"},i.createElement(jn.a,null)),i.createElement(dt.a,{onClick:function(){return e(O.ActionCreators.redo())},color:"inherit",edge:"end"},i.createElement(xn.a,null)))},Cn=function(e){return o.a.createElement("div",{className:"loading-screen-container"},o.a.createElement("span",{className:"loading-screen-contents"},"Loading..."))},Tn=n(59),_n=n(257),Sn=n(69),Dn=n.n(Sn),In=n(104),Nn=n.n(In),An=function(e){var t=e.col,n=e.add,r=(e.menu,Object(d.c)()),a=i.useState(!1),c=Object(s.a)(a,2),o=c[0],u=c[1],l=i.useState(!1),m=Object(s.a)(l,2),f=m[0],p=m[1],h=t.items.filter((function(e){return-1!==["string","number"].indexOf(typeof e.time)})).length>0;return i.createElement("div",null,i.createElement("div",{className:"columnHeaderContainer"},i.createElement("div",{className:"columnHeaderText"},t.name),i.createElement("div",null,i.createElement(dt.a,{size:"small",onClick:function(){return n()}},i.createElement(Dn.a,null)),i.createElement(ht,{map:Object(b.a)(Object(b.a)({"Archive all":function(){return r($e(t.id))}},h?{"Sort by due":function(){return r(Ke(t.id))}}:{}),{},{Rename:function(){return p(!0)},Delete:function(){return u(!0)}})},i.createElement(dt.a,{size:"small"},i.createElement(ft.a,null))))),i.createElement("hr",{className:"columnHeaderRule"}),o&&i.createElement(pn,{open:!0,respond:function(e){u(!1),e&&r(Fe(t.id))},title:"Delete this column?",subtitle:"Don't worry, this action can be undone."}),f&&i.createElement(hn,{open:!0,respond:function(e){p(!1),"string"===typeof e&&e.length&&r(We({colID:t.id,name:e}))},title:'Rename column "'.concat(t.name,'"'),subtitle:"Don't worry, this action can be undone.",label:"Name",placeholder:t.name}))},Mn=i.memo((function(e){var t=e.card,n=e.index,o=e.setEditingCard,u=Object(d.d)(Rt.boards.cards);if(!t)return null;var l=t.id,s=t.content;return i.createElement(i.Fragment,null,i.createElement(Tn.b,{draggableId:l,index:n},(function(e,n){return i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"card "+(n.isDragging?" draggingCard":""),style:e.draggableProps.style,onClick:function(){return o(l)}}),i.createElement(Pt,{source:s,cards:u}),i.createElement(r.Indicator,{card:t}),i.createElement(a.Indicator,{card:t}),i.createElement(c.Indicator,{card:t}))})))})),Hn=i.memo((function(e){var t=e.col,n=e.index,r=e.setEditingCard,a=t.id,c=t.items,o=i.useState(!1),u=Object(s.a)(o,2),l=u[0],m=u[1],f=i.useState(""),b=Object(s.a)(f,2),p=b[0],h=b[1],v=Object(d.c)(),g=function(){p.length&&v(Ge({content:p,colID:a})),h(""),m(!1)},O=function(){l?h(""):E.current.scrollTop=0,m(!l)},E=i.useRef(null),y=function(){console.log("pressed menu button")},w=i.createElement(Tn.c,{droppableId:a,className:"card-droppable",type:"card",ignoreContainerClipping:!0},(function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:"column-internals"+(t.isDraggingOver?" dragging-over":""),ref:Object(j.j)(e.innerRef,E)},l&&i.createElement(Ln,{value:p,setValue:h,add:g,cancel:function(){h(""),m(!1)}}),c.map((function(e,t){return e?i.createElement(Mn,{card:e,index:t,key:e.id,setEditingCard:r}):null}))),e.placeholder)}));return i.createElement(Tn.b,{draggableId:a,index:n},(function(e,n){return i.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:"columnContainer"+(n.isDragging?" draggingColumn":""),style:e.draggableProps.style}),i.createElement("div",{className:"column"},i.createElement("div",e.dragHandleProps,i.createElement(An,{col:t,add:O,menu:y})),w))}))})),Ln=function(e){var t=e.value,n=e.setValue,r=e.add,a=e.cancel;return i.useEffect((function(){var e=function(e){return 27===e.which&&a()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),i.createElement("div",null,i.createElement(Dt.a,{label:"New Card",multiline:!0,autoFocus:!0,rowsMax:6,value:t,onChange:function(e){return n(e.target.value)},variant:"filled",style:{width:"100%"}}),i.createElement(_n.a,{variant:"contained",size:"small",className:"editingCardButtons"},i.createElement(St.a,{style:{flexGrow:1},variant:"contained",onClick:r},"Done"),i.createElement(St.a,{onClick:a},i.createElement(Nn.a,{style:{color:"#555"}}))))},Rn=function(e){var t=e.add,n=e.hide;return i.createElement("div",{className:"addColumnContainer"+(n?" hidden":"")},i.createElement("div",{className:"addColumn"},i.createElement(dt.a,{onClick:t},i.createElement(Dn.a,null))))},Bn=(n(201),function(e){var t=e.tabInfo,n=t.index,r=t.tab,a=Object(d.c)(),c=Object(d.d)(Rt.boards.tabOrder),o=Object(d.d)(Rt.boards.getColumnsInTabs)[c[n]],u=Object(d.d)(Rt.boards.tabs),l=Object(d.d)(Rt.boards.cards),m=u[c[n]].columns,f=i.useState(!1),b=Object(s.a)(f,2),p=b[0],h=b[1],v=Object(j.s)(),g=Object(s.a)(v,2),O=g[0],E=g[1],y="edit"===O.split("/")[4]?O.split("/")[3]:null,w=Object(d.d)(Rt.boards.cardsByTab),x=function(e){return E(e?"/boards/".concat(u[function(e){return Object.keys(w).filter((function(t){return-1!==w[t].indexOf(e)}))}(e)].name.toLowerCase(),"/").concat(e,"/edit"):"/boards/".concat(O.split("/")[2]))};return i.createElement("div",{className:"boardview-root"},i.createElement(Tn.a,{onDragEnd:function(e){e.destination&&("card"===e.type?a(function(e){var t=Object(s.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return n===r?Be({colID:n,srcIndex:a,dstIndex:c}):Re({srcColID:n,dstColID:r,srcIndex:a,dstIndex:c})}([e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index])):"column"===e.type&&a(Je([e.source.index,e.destination.index,n])))}},i.createElement(Tn.c,{droppableId:"default",className:"column-droppable",direction:"horizontal",type:"column"},(function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:"root",ref:e.innerRef},m.map((function(e,t){return i.createElement(Hn,{col:o[t],key:e,index:t,setEditingCard:x})})),i.createElement(Rn,{add:function(){return h(!0)},hide:t.isDraggingOver||t.draggingFromThisWith})),e.placeholder)}))),p&&i.createElement(hn,{open:!0,respond:function(e){h(!1),"string"===typeof e&&e.length&&a(Ue({tabID:r.id,name:e}))},title:"Add column",label:"Name"}),y&&Object.prototype.hasOwnProperty.call(l,y)&&i.createElement(vn,{respond:function(){return x(null)},card:l[y]}))}),Gn=function(e){var t=e.active,n=Object(d.c)(),r=Object(j.s)(),a=Object(s.a)(r,2),c=a[0],o=a[1],u=Object(d.d)(Rt.boards.tabs),l=Object(d.d)(Rt.boards.tabOrder),m=l.map((function(e){return u[e].name.toLowerCase()===c.split("/")[2]})).indexOf(!0),f=function(e){return o("/boards/"+u[l[e]].name.toLowerCase())};Object(j.u)((function(){return t&&m>=0&&u[l[m]].name+" | Mirror"})),m<0&&(m=0);var b=i.useState(!1),p=Object(s.a)(b,2),h=p[0],v=p[1],g=i.useState(!1),O=Object(s.a)(g,2),E=O[0],y=O[1],w=i.useState(!1),x=Object(s.a)(w,2),k=x[0],C=x[1];return i.createElement(i.Fragment,null,i.createElement(gt,{tabs:l.map((function(e){return u[e].name})),render:function(e){return i.createElement(Bn,{tabInfo:{tab:u[l[e]],index:e}})},addTab:function(){return y(!0)},renameTab:function(){return C(!0)},deleteTab:function(){return Object.values(u).length>1?v(!0):alert("Cannot delete only tab")},moveTab:function(e){return n(Xe(e))},index:m,setIndex:f}),h&&i.createElement(pn,{open:!0,respond:function(e){v(!1),e&&(n(Ve(m)),f(Math.max(0,m-1)))},title:"Delete this tab?",subtitle:"Don't worry, this action can be undone."}),E&&i.createElement(hn,{open:!0,respond:function(e){y(!1),"string"===typeof e&&e.length&&n(qe(e))},title:"Add tab",label:"Name"}),k&&i.createElement(hn,{open:!0,respond:function(e){C(!1),"string"===typeof e&&e.length&&n(Ye({tabID:l[m],name:e}))},title:"Rename tab ".concat(u[l[m]].name),label:"Name"}))},Zn=n(143),Pn=n.n(Zn),zn=n(144),Un=n.n(zn),Fn=n(146),Wn=n.n(Fn),Jn=n(145),$n=n.n(Jn),Kn=(n(202),function(e){var t=e.active,n=Object(j.s)(),r=Object(s.a)(n,1)[0],a=Object(d.c)(),c=Object(d.d)(Rt.boards.cards),o=Object(d.d)(Rt.boards.loadingZettel),u=r.split("/")[2]||"main";return Object.prototype.hasOwnProperty.call(c,u)?!0===o?i.createElement(qn,null):o===u?i.createElement(Vn,{id:u}):i.createElement(Yn,{active:t,dispatch:a,cards:c,currentCardID:u}):(a(rt(u)),i.createElement(qn,null))});function qn(){return i.createElement("span",null,"Loading Zettel...")}function Vn(){return i.createElement("span",null,"Failed to load Zettel. Either synchronisation failed or it does not exist.")}function Yn(e){var t=e.active,n=e.dispatch,r=e.cards,a=e.currentCardID,c=Object(j.s)(),o=Object(s.a)(c,2),u=o[0],l=o[1],m=Object(d.d)(Rt.boards.starredZettels),f=r[a],p=i.useState(Object(b.a)({},f)),h=Object(s.a)(p,2),v=h[0],g=h[1];Object(j.u)((function(){return t&&v.content+" | Mirror"}));var O=function(e){return g(Object(b.a)(Object(b.a)({},v),e))};if("object"!==typeof f)return null;var E="edit"===u.split("/")[3],y=function(e){return l(e?"/notes/".concat(a,"/edit"):"/notes/".concat(a))},w=function(){return n(nt(a))};f.id!==v.id&&(n(et({zettel:v})),g(Object(b.a)({},f)));var x=function(e){n(Qe({zettel:{content:"New note",description:"...",id:e}})),l("/notes/".concat(e,"/edit"))};return i.createElement(i.Fragment,null,i.createElement(j.c,{shouldProtect:JSON.stringify(v)!==JSON.stringify(f)}),i.createElement("div",{className:"zettelContainer"},E&&i.createElement("div",{className:"zettel"},i.createElement(Dt.a,{margin:"dense",autoFocus:!0,fullWidth:!0,multiline:!0,rowsMax:3,value:v.content||"",onChange:function(e){return O({content:e.target.value})}}),i.createElement(Wt,{value:v.description||"",setValue:function(e){return O({description:e})},addNote:function(e){n(et({zettel:v})),x(e)}}),i.createElement("div",{className:"zettelEditingButtons"},i.createElement(St.a,{onClick:function(){y(!1),g(Object(b.a)({},f))},color:"primary"},"Cancel"),i.createElement(St.a,{onClick:function(){return n(et({zettel:v})),void y(!1)},color:"primary",variant:"contained"},"Save"))),i.createElement("div",{className:"zettel"+(E?" notes-editing":"")},i.createElement("div",{className:"zettelTitle"},(E?v.content:f.content)||""),i.createElement(Pt,{source:(E?v.description:f.description)||"",cards:r}))),i.createElement("div",{className:"zettelButtons",id:"zettel-buttons-container"},i.createElement(_n.a,{variant:"contained",color:"primary"},!E&&i.createElement(St.a,{onClick:function(){return y(!0)},title:"Edit note"},i.createElement(Pn.a,null)),"main"!==f.id&&i.createElement(St.a,{onClick:function(){n(ze(a)),l("/notes/main")},title:"Delete note"},i.createElement(Nn.a,null)),!E&&i.createElement(St.a,{onClick:function(){return x(Object(j.h)())},title:"Add note"},i.createElement(Dn.a,null)),i.createElement(St.a,{onClick:function(){return alert("TODO")},title:"Search notes"},i.createElement(Un.a,null)),-1===m.indexOf(f.id)?i.createElement(St.a,{onClick:w,title:"Star this note"},i.createElement($n.a,null)):i.createElement(St.a,{onClick:w,title:"Unstar this note"},i.createElement(Wn.a,null)))))}var Xn=["boards","notes"],Qn=function(e){var t=e.active;e.setActive;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{show:0===t},o.a.createElement(Gn,{active:0===t})),o.a.createElement(j.a,{show:1===t},o.a.createElement(Kn,{active:1===t})))},er=function(){var e=Object(d.c)();Object(j.t)((function(){P()&&X().then((function(t){return e(Le(t))}))}),15e3);var t=Object(j.s)(),n=Object(s.a)(t,2),r=n[0],a=n[1],c=o.a.useState([]),i=Object(s.a)(c,2),u=i[0],l=i[1],m=o.a.useState(!0),f=Object(s.a)(m,2),b=f[0],p=f[1],h=Object(d.d)((function(e){return void 0===e.present||Lt(e).loading}));if(b&&!h&&(l(["/boards/","/notes/main"]),p(!1)),h)return o.a.createElement(Cn,null);var v=function(e,t,n){var r=u.slice(0);r[t]=e,l(r),n&&a(e)},g=function(e){return Math.max(Xn.indexOf((n=0,(t=e).split("/").filter((function(e){return e.length}))[n<0?t.length+n:n])),0);var t,n}(r),O=function(e){e===g?v(["/boards/","/notes/main"][g],g,!0):(v(r,g),a(u[e]))};return o.a.createElement("div",{id:"jsx-root"},o.a.createElement("div",{style:{height:"calc(100% - 48px)"}},o.a.createElement(Qn,{active:g,setActive:O})),o.a.createElement(En,{active:g,setActive:O}))},tr=function(){return o.a.createElement(d.a,{store:Ht},o.a.createElement(er,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(203);l.a.render(o.a.createElement(tr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(80),a=n(0),c=n(126),i=n.n(c),o=n(11),u=a.lazy((function(){return n.e(4).then(n.bind(null,208))})),l=function(e){var t=e.source,n=e.postprocess,c=void 0===n?function(e){return e}:n,l=Object(r.a)(e,["source","postprocess"]);try{return-1!==t.indexOf("```")?a.createElement(a.Suspense,{fallback:a.createElement("span",null,"Loading...")},a.createElement(u,{source:t,postprocess:c})):a.createElement(o.b,Object.assign({source:c(i()(t,{gfm:!0})),className:"markdown"},l))}catch(s){return a.createElement("span",null,"Sorry, an error occurred.",a.createElement("br",null),"Try editing the note to ensure any LaTeX math equations and the Markdown syntax are valid.",a.createElement("br",null),"Error: ",s.toString())}}}},[[170,1,2]]]);
//# sourceMappingURL=main.306f7dec.chunk.js.map